webpackJsonp([1],{10:function(t,e,a){"use strict";var i=a(6),s=a(12),n=a(7),r=a.n(n);a(9);i.default.use(s.a),sessionStorage.loginData||(window.location.href="/login.html#/"),""!=r.a&&(i.default.http.options.xhr={withCredentials:!0}),i.default.http.interceptors.push(function(t,e){""!=r.a&&(t.credentials=!0),sessionStorage.token&&t.headers.set("Authorization",sessionStorage.token),e(function(t){if(-5==t.body.code)window.location.href="/login.html#/";else{if(-10!=t.body.code)return t;window.location.href=r.a.error_url}})}),window.FormatDate=function(t,e){if(t instanceof Date){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}throw new Error("日期格式转换发现错误的参数类型")},Date.prototype.FormatDate=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},function(){var t=window.location.href;!(t.indexOf("login.html")>0)||t.endsWith("login.html")&&t.endsWith("login.html#")&&t.endsWith("login.html#/")||(window.location.href="/login.html#/")}(),String.prototype.TrimBlank=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},window.dateChange=function(t){var e=new Date;return e.setDate(e.getDate()+t),e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())},window.DateDiff=function(t,e){var a=void 0,i=void 0,s=void 0;return a=t.split("-"),i=new Date(parseInt(a[1])+"-"+parseInt(a[2])+"-"+parseInt(a[0])),a=e.split("-"),s=new Date(parseInt(a[1])+"-"+parseInt(a[2])+"-"+parseInt(a[0])),parseInt((i-s)/1e3/60/60/24)},window.filterSendData=function(t,e){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&("name"===a&&(console.log("data[key]"),console.log(t[a])),t[a]||0===t[a]||("delete"===e||void 0===e?delete t[a]:"blankStr"===e?t[a]="":"null"===e&&(t[a]=null)));return t},Array.prototype.removeArr=function(t){for(var e=0;e<this.length;e++)if(this[e]==t){this.splice(e,1);break}},window.RegExObj={moneyTwoPoint:/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,mobildPhone:function(t){return/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/.test(t)},idCard:function(t){var t,e,a,i,s=new Array("ok","身份证号码位数不对!","身份证号码出生日期超出范围或含有非法字符!","验证失败，请注意数字或字母大小写的准确性，填写正确的验证信息!","身份证地区非法!"),n={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},r=new Array;r=t.split("");var l=n[parseInt(t.substr(0,2))];if(null==l)return{start:0,info:s[4]};var o="",c="";switch(t.length){case 15:o="19"+t.substr(6,2)+"-"+t.substr(8,2)+"-"+t.substr(10,2),c=t.substring(14,15);break;case 18:if(o=t.substr(6,4)+"-"+t.substr(10,2)+"-"+t.substr(12,2),c=t.substring(16,17),i=7*(parseInt(r[0])+parseInt(r[10]))+9*(parseInt(r[1])+parseInt(r[11]))+10*(parseInt(r[2])+parseInt(r[12]))+5*(parseInt(r[3])+parseInt(r[13]))+8*(parseInt(r[4])+parseInt(r[14]))+4*(parseInt(r[5])+parseInt(r[15]))+2*(parseInt(r[6])+parseInt(r[16]))+1*parseInt(r[7])+6*parseInt(r[8])+3*parseInt(r[9]),e=i%11,"F",a="10X98765432",a.substr(e,1)!=r[17])return{start:0,info:s[3]};break;default:return{start:0,info:s[1]}}var u="";return u=c%2==0?"女":"男",{start:1,data:{area:l,birthday:o,sex:u}}},passport:function(t){return/^1[45][0-9]{7}|([P|S]\d{7})|([S|G]\d{8})|([G|T|S|L|Q|D|A|F|E]\d{8})|([G|T|S|L|Q|D|A|F|E][\w]\d{7})|([H|M]\d{8,10})$/.test(t)}},window.menuData=null},1003:function(t,e){},1006:function(t,e){},1007:function(t,e){},1011:function(t,e){},1019:function(t,e){},102:function(t,e,a){var i=a(1)(a(493),a(1339),null,null,null);t.exports=i.exports},1020:function(t,e){},1024:function(t,e){},1026:function(t,e){},1028:function(t,e){},1030:function(t,e){},1036:function(t,e){},1038:function(t,e){},1049:function(t,e){},105:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a(119),a(117),a(118),window.Quill||(window.Quill=a(89)),e.default={name:"quill-editor",data:function(){return{_content:"",defaultModules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}}},props:{content:String,value:String,disabled:Boolean,options:{type:Object,required:!1,default:function(){return{}}}},mounted:function(){this.initialize()},beforeDestroy:function(){this.quill=null},methods:{initialize:function(){if(this.$el){var t=this;t.options.theme=t.options.theme||"snow",t.options.boundary=t.options.boundary||document.body,t.options.modules=t.options.modules||t.defaultModules,t.options.modules.toolbar=void 0!==t.options.modules.toolbar?t.options.modules.toolbar:t.defaultModules.toolbar,t.options.placeholder=t.options.placeholder||"Insert text here ...",t.options.readOnly=void 0!==t.options.readOnly&&t.options.readOnly,t.quill=new Quill(t.$refs.editor,t.options),(t.value||t.content)&&t.quill.pasteHTML(t.value||t.content),t.quill.on("selection-change",function(e){e?t.$emit("focus",t.quill):t.$emit("blur",t.quill)}),t.quill.on("text-change",function(e,a,i){var s=t.$refs.editor.children[0].innerHTML,n=t.quill.getText();"<p><br></p>"===s&&(s=""),t._content=s,t.$emit("input",t._content),t.$emit("change",{editor:t.quill,html:s,text:n})}),this.disabled&&this.quill.enable(!1),t.$emit("ready",t.quill)}}},watch:{content:function(t,e){this.quill&&(t&&t!==this._content?(this._content=t,this.quill.pasteHTML(t)):t||this.quill.setText(""))},value:function(t,e){this.quill&&(t&&t!==this._content?(this._content=t,this.quill.pasteHTML(t)):t||this.quill.setText(""))},disabled:function(t,e){this.quill&&this.quill.enable(!t)}}}},1058:function(t,e){},106:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=(a(6),a(203)),s=(a.n(i),a(89)),n=a.n(s),r=a(107),l=a(108);n.a.register("modules/imageImport",r.a),n.a.register("modules/imageResize",l.a),e.default={name:"quilleditor",props:{content:String,attr:String,index:Number},data:function(){return{dcontent:this.content,editorOption:{modules:{toolbar:[[{size:["small",!1,"large"]}],["bold","italic"],[{list:"ordered"},{list:"bullet"}]],history:{delay:1e3,maxStack:50,userOnly:!1},imageImport:!0,imageResize:{displaySize:!0}}},uploadUrl:api_prefix+"/common/file/upload",config:{headers:{"Content-Type":"multipart/form-data"}}}},computed:{imgUploadPath:function(){this.uploadUrl=api_prefix+this.action}},methods:{onEditorBlur:function(t){t.editor,t.html,t.text},onEditorFocus:function(t){t.editor,t.html,t.text},onEditorReady:function(t){t.editor,t.html,t.text},onEditorChange:function(t){var e=(t.editor,t.html);t.text;console.log(this.$refs.myTextEditor.quill.getSelection()),console.log(this.index),this.$emit("input",e,this.attr,this.index)},uploadFile:function(t){if(t.length>0){var e=new FormData;e.append("fileType","jpg"),e.append("file",t[0]),this.$http.post(this.uploadUrl,e,this.config).then(function(t){var e=this.$refs.myTextEditor.quill;e.focus(),e.insertEmbed(e.getSelection().index,"image",t.body.body.key)})}},addMyImageModule:function(){var e='<span class="ql-formats"><button type="button" class="ql-image"><svg viewBox="0 0 18 18"> <rect class="ql-stroke" height="10" width="12" x="3" y="4"></rect> <circle class="ql-fill" cx="6" cy="7" r="1"></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg></button></span>',a='<input type="file" accept="image/png, image/gif, image/jpeg, image/bmp, image/x-icon" class="ql-image"/>';e=t(e),a=t(a),e.on("click",function(t){a.click()}),t(this.$refs.myTextEditor.$el).find(".ql-toolbar.ql-snow").eq(0).append(e).append(a);var i=this;a.on("change",function(t){i.uploadFile(t.target.files),a.val("")})}},mounted:function(){this.addMyImageModule()},components:{quillEditor:i.quillEditor},watch:{content:{handler:function(t,e){if(t&&t!=e&&t!=this.dcontent){var a=this.$refs.myTextEditor.quill;this.dcontent=t,a.focus()}}}}}}.call(e,a(2))},1060:function(t,e){},1062:function(t,e){},1063:function(t,e){},1067:function(t,e){},107:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var i=a(78),s=a.n(i),n=a(79),r=a.n(n),l=function(){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];s()(this,t),this.quill=e,this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1)}return r()(t,[{key:"handleDrop",value:function(t){t.preventDefault(),t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length&&this.readFiles(t.dataTransfer.files,this.insert.bind(this))}},{key:"handlePaste",value:function(t){var e=this;t.clipboardData&&t.clipboardData.items&&t.clipboardData.items.length&&this.readFiles(t.clipboardData.items,function(t){e.quill.getSelection()||setTimeout(function(){return e.insert(t)},0)})}},{key:"insert",value:function(t){var e=(this.quill.getSelection()||{}).index||this.quill.getLength();this.quill.insertEmbed(e,"image",t,"user")}},{key:"readFiles",value:function(t,e){[].forEach.call(t,function(t){if(t.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp|vnd\.microsoft\.icon)/i)){var a=new FileReader;a.onload=function(t){e(t.target.result)};var i=t.getAsFile?t.getAsFile():t;i instanceof Blob&&a.readAsDataURL(i)}})}}]),t}()},1071:function(t,e){},1075:function(t,e){},1077:function(t,e){},1078:function(t,e){},108:function(t,e,a){"use strict";a.d(e,"a",function(){return l});var i=a(78),s=a.n(i),n=a(79),r=a.n(n),l=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s()(this,t),this.quill=e,this.options=a,this.handleClick=this.handleClick.bind(this),this.handleMousedown=this.handleMousedown.bind(this),this.handleMouseup=this.handleMouseup.bind(this),this.handleDrag=this.handleDrag.bind(this),this.checkImage=this.checkImage.bind(this),this.boxes=[],document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1)}return r()(t,[{key:"handleClick",value:function(t){if(t.target&&t.target.tagName&&"IMG"==t.target.tagName.toUpperCase()){if(this.img===t.target)return;this.img&&this.hide(),this.show(t.target)}else this.img&&this.hide()}},{key:"show",value:function(t){this.img=t,this.showResizers(),this.showSizeDisplay();var e=this.img.getBoundingClientRect();this.positionBoxes(e),this.positionSizeDisplay(e)}},{key:"hide",value:function(){this.hideResizers(),this.hideSizeDisplay(),this.img=void 0}},{key:"showResizers",value:function(){this.setUserSelect("none"),this.addBox("nwse-resize"),this.addBox("nesw-resize"),this.addBox("nwse-resize"),this.addBox("nesw-resize"),document.addEventListener("keyup",this.checkImage,!0),this.quill.root.addEventListener("input",this.checkImage,!0)}},{key:"hideResizers",value:function(){document.removeEventListener("keyup",this.checkImage),this.quill.root.removeEventListener("input",this.checkImage),this.setUserSelect(""),this.setCursor(""),this.boxes.forEach(function(t){return document.body.removeChild(t)}),this.dragBox=void 0,this.dragStartX=void 0,this.preDragWidth=void 0,this.boxes=[]}},{key:"addBox",value:function(t){var e=document.createElement("div"),a={position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",zIndex:9,cursor:t};this.extend(e.style,a,this.options.handleStyles||{}),e.addEventListener("mousedown",this.handleMousedown,!1),document.body.appendChild(e),this.boxes.push(e)}},{key:"extend",value:function(t){for(var e=arguments.length,a=Array(e>1?e-1:0),i=1;i<e;i++)a[i-1]=arguments[i];return a.forEach(function(e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])}),t}},{key:"positionBoxes",value:function(t){var e=this;[{left:t.left-6,top:t.top-6},{left:t.left+t.width-6,top:t.top-6},{left:t.left+t.width-6,top:t.top+t.height-6},{left:t.left-6,top:t.top+t.height-6}].forEach(function(t,a){e.extend(e.boxes[a].style,{top:Math.round(t.top+window.pageYOffset)+"px",left:Math.round(t.left+window.pageXOffset)+"px"})})}},{key:"handleMousedown",value:function(t){this.dragBox=t.target,this.dragStartX=t.clientX,this.preDragWidth=this.img.width||this.img.naturalWidth,this.setCursor(this.dragBox.style.cursor),document.addEventListener("mousemove",this.handleDrag,!1),document.addEventListener("mouseup",this.handleMouseup,!1)}},{key:"handleMouseup",value:function(){this.setCursor(""),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleMouseup)}},{key:"handleDrag",value:function(t){if(this.img){this.dragBox==this.boxes[0]||this.dragBox==this.boxes[3]?this.img.width=Math.round(this.preDragWidth-t.clientX-this.dragStartX):this.img.width=Math.round(this.preDragWidth+t.clientX-this.dragStartX);var e=this.img.getBoundingClientRect();this.positionBoxes(e),this.positionSizeDisplay(e)}}},{key:"setUserSelect",value:function(t){var e=this;["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(a){e.quill.root.style[a]=t,document.documentElement.style[a]=t})}},{key:"setCursor",value:function(t){[document.body,this.img,this.quill.root].forEach(function(e){return e.style.cursor=t})}},{key:"checkImage",value:function(){this.img&&this.hide()}},{key:"showSizeDisplay",value:function(){if(this.options.displaySize){this.display=document.createElement("div");var t={position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"};this.extend(this.display.style,t,this.options.displayStyles||{}),document.body.appendChild(this.display)}}},{key:"hideSizeDisplay",value:function(){document.body.removeChild(this.display),this.display=void 0}},{key:"positionSizeDisplay",value:function(t){if(this.display&&this.img){var e=this.getCurrentSize();if(this.display.innerHTML=e.join(" &times; "),e[0]>120&&e[1]>30){var a=this.display.getBoundingClientRect();this.extend(this.display.style,{left:Math.round(t.left+t.width+window.pageXOffset-a.width-8)+"px",top:Math.round(t.top+t.height+window.pageYOffset-a.height-8)+"px"})}else this.extend(this.display.style,{left:Math.round(t.left+t.width+window.pageXOffset+8)+"px",top:Math.round(t.top+t.height+window.pageYOffset+8)+"px"})}}},{key:"getCurrentSize",value:function(){return[this.img.width,Math.round(this.img.width/this.img.naturalWidth*this.img.naturalHeight)]}}]),t}()},1092:function(t,e){},1100:function(t,e){},1105:function(t,e){},1111:function(t,e){},1116:function(t,e){},1122:function(t,e){},1126:function(t,e,a){function i(t){return a(s(t))}function s(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var n={"./af":294,"./af.js":294,"./ar":301,"./ar-dz":295,"./ar-dz.js":295,"./ar-kw":296,"./ar-kw.js":296,"./ar-ly":297,"./ar-ly.js":297,"./ar-ma":298,"./ar-ma.js":298,"./ar-sa":299,"./ar-sa.js":299,"./ar-tn":300,"./ar-tn.js":300,"./ar.js":301,"./az":302,"./az.js":302,"./be":303,"./be.js":303,"./bg":304,"./bg.js":304,"./bm":305,"./bm.js":305,"./bn":306,"./bn.js":306,"./bo":307,"./bo.js":307,"./br":308,"./br.js":308,"./bs":309,"./bs.js":309,"./ca":310,"./ca.js":310,"./cs":311,"./cs.js":311,"./cv":312,"./cv.js":312,"./cy":313,"./cy.js":313,"./da":314,"./da.js":314,"./de":317,"./de-at":315,"./de-at.js":315,"./de-ch":316,"./de-ch.js":316,"./de.js":317,"./dv":318,"./dv.js":318,"./el":319,"./el.js":319,"./en-au":320,"./en-au.js":320,"./en-ca":321,"./en-ca.js":321,"./en-gb":322,"./en-gb.js":322,"./en-ie":323,"./en-ie.js":323,"./en-il":324,"./en-il.js":324,"./en-nz":325,"./en-nz.js":325,"./eo":326,"./eo.js":326,"./es":329,"./es-do":327,"./es-do.js":327,"./es-us":328,"./es-us.js":328,"./es.js":329,"./et":330,"./et.js":330,"./eu":331,"./eu.js":331,"./fa":332,"./fa.js":332,"./fi":333,"./fi.js":333,"./fo":334,"./fo.js":334,"./fr":337,"./fr-ca":335,"./fr-ca.js":335,"./fr-ch":336,"./fr-ch.js":336,"./fr.js":337,"./fy":338,"./fy.js":338,"./gd":339,"./gd.js":339,"./gl":340,"./gl.js":340,"./gom-latn":341,"./gom-latn.js":341,"./gu":342,"./gu.js":342,"./he":343,"./he.js":343,"./hi":344,"./hi.js":344,"./hr":345,"./hr.js":345,"./hu":346,"./hu.js":346,"./hy-am":347,"./hy-am.js":347,"./id":348,"./id.js":348,"./is":349,"./is.js":349,"./it":350,"./it.js":350,"./ja":351,"./ja.js":351,"./jv":352,"./jv.js":352,"./ka":353,"./ka.js":353,"./kk":354,"./kk.js":354,"./km":355,"./km.js":355,"./kn":356,"./kn.js":356,"./ko":357,"./ko.js":357,"./ky":358,"./ky.js":358,"./lb":359,"./lb.js":359,"./lo":360,"./lo.js":360,"./lt":361,"./lt.js":361,"./lv":362,"./lv.js":362,"./me":363,"./me.js":363,"./mi":364,"./mi.js":364,"./mk":365,"./mk.js":365,"./ml":366,"./ml.js":366,"./mr":367,"./mr.js":367,"./ms":369,"./ms-my":368,"./ms-my.js":368,"./ms.js":369,"./mt":370,"./mt.js":370,"./my":371,"./my.js":371,"./nb":372,"./nb.js":372,"./ne":373,"./ne.js":373,"./nl":375,"./nl-be":374,"./nl-be.js":374,"./nl.js":375,"./nn":376,"./nn.js":376,"./pa-in":377,"./pa-in.js":377,"./pl":378,"./pl.js":378,"./pt":380,"./pt-br":379,"./pt-br.js":379,"./pt.js":380,"./ro":381,"./ro.js":381,"./ru":382,"./ru.js":382,"./sd":383,"./sd.js":383,"./se":384,"./se.js":384,"./si":385,"./si.js":385,"./sk":386,"./sk.js":386,"./sl":387,"./sl.js":387,"./sq":388,"./sq.js":388,"./sr":390,"./sr-cyrl":389,"./sr-cyrl.js":389,"./sr.js":390,"./ss":391,"./ss.js":391,"./sv":392,"./sv.js":392,"./sw":393,"./sw.js":393,"./ta":394,"./ta.js":394,"./te":395,"./te.js":395,"./tet":396,"./tet.js":396,"./tg":397,"./tg.js":397,"./th":398,"./th.js":398,"./tl-ph":399,"./tl-ph.js":399,"./tlh":400,"./tlh.js":400,"./tr":401,"./tr.js":401,"./tzl":402,"./tzl.js":402,"./tzm":404,"./tzm-latn":403,"./tzm-latn.js":403,"./tzm.js":404,"./ug-cn":405,"./ug-cn.js":405,"./uk":406,"./uk.js":406,"./ur":407,"./ur.js":407,"./uz":409,"./uz-latn":408,"./uz-latn.js":408,"./uz.js":409,"./vi":410,"./vi.js":410,"./x-pseudo":411,"./x-pseudo.js":411,"./yo":412,"./yo.js":412,"./zh-cn":413,"./zh-cn.js":413,"./zh-hk":414,"./zh-hk.js":414,"./zh-tw":415,"./zh-tw.js":415};i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id=1126},117:function(t,e){},118:function(t,e){},119:function(t,e){},120:function(t,e){},122:function(t,e,a){var i=a(1)(a(490),a(1423),null,null,null);t.exports=i.exports},123:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"quill-editor"},[t._t("toolbar"),t._v(" "),a("div",{ref:"editor"})],2)},staticRenderFns:[]}},1235:function(t,e,a){function i(t){a(1122)}var s=a(1)(a(613),a(1432),i,"data-v-f2a72dca",null);t.exports=s.exports},1236:function(t,e,a){function i(t){a(1077)}var s=a(1)(a(614),a(1378),i,"data-v-69b1ba8c",null);t.exports=s.exports},1237:function(t,e,a){function i(t){a(1038)}var s=a(1)(a(615),a(1326),i,"data-v-398e6d89",null);t.exports=s.exports},1238:function(t,e,a){function i(t){a(999)}var s=a(1)(a(616),a(1274),i,"data-v-02996252",null);t.exports=s.exports},1239:function(t,e,a){var i=a(1)(a(617),a(1395),null,null,null);t.exports=i.exports},124:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"quilleditor"},[a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption},on:{blur:function(e){t.onEditorBlur(e)},change:function(e){t.onEditorChange(e)},focus:function(e){t.onEditorFocus(e)},ready:function(e){t.onEditorReady(e)}},model:{value:t.dcontent,callback:function(e){t.dcontent=e},expression:"dcontent"}})],1)},staticRenderFns:[]}},1240:function(t,e,a){function i(t){a(1011)}var s=a(1)(a(618),a(1290),i,null,null);t.exports=s.exports},1241:function(t,e,a){function i(t){a(1049)}var s=a(1)(a(619),a(1345),i,"data-v-4fdca79f",null);t.exports=s.exports},1242:function(t,e,a){function i(t){a(1063)}var s=a(1)(a(620),a(1360),i,"data-v-5b66c641",null);t.exports=s.exports},1243:function(t,e,a){function i(t){a(1062)}var s=a(1)(a(621),a(1359),i,null,null);t.exports=s.exports},1244:function(t,e,a){function i(t){a(1003)}var s=a(1)(a(622),a(1279),i,"data-v-08260068",null);t.exports=s.exports},1245:function(t,e,a){function i(t){a(1105)}var s=a(1)(a(623),a(1411),i,"data-v-c16ef002",null);t.exports=s.exports},1246:function(t,e,a){function i(t){a(1028)}var s=a(1)(a(624),a(1312),i,"data-v-2bea9096",null);t.exports=s.exports},1247:function(t,e,a){function i(t){a(1026)}var s=a(1)(a(625),a(1310),i,"data-v-2a951144",null);t.exports=s.exports},1248:function(t,e,a){function i(t){a(1006)}var s=a(1)(a(626),a(1283),i,null,null);t.exports=s.exports},1249:function(t,e,a){function i(t){a(1030)}var s=a(1)(a(627),a(1314),i,"data-v-2e7b80bc",null);t.exports=s.exports},1250:function(t,e,a){function i(t){a(1058)}var s=a(1)(a(628),a(1354),i,"data-v-560e7505",null);t.exports=s.exports},1251:function(t,e,a){function i(t){a(1019)}var s=a(1)(a(629),a(1299),i,"data-v-1edfd856",null);t.exports=s.exports},1252:function(t,e,a){function i(t){a(1036)}var s=a(1)(a(630),a(1323),i,"data-v-37024ba7",null);t.exports=s.exports},1253:function(t,e,a){function i(t){a(1007)}var s=a(1)(a(631),a(1286),i,"data-v-12dc64ff",null);t.exports=s.exports},1254:function(t,e,a){var i=a(1)(a(632),a(1300),null,null,null);t.exports=i.exports},1255:function(t,e,a){function i(t){a(1067)}var s=a(1)(a(633),a(1365),i,"data-v-6111b75f",null);t.exports=s.exports},1256:function(t,e,a){var i=a(1)(a(634),a(1330),null,null,null);t.exports=i.exports},1257:function(t,e,a){function i(t){a(1092)}var s=a(1)(a(635),a(1394),i,null,null);t.exports=s.exports},1258:function(t,e,a){function i(t){a(1071)}var s=a(1)(a(636),a(1370),i,null,null);t.exports=s.exports},1259:function(t,e,a){function i(t){a(1100)}var s=a(1)(a(637),a(1405),i,"data-v-b5d41202",null);t.exports=s.exports},1260:function(t,e,a){function i(t){a(1111)}var s=a(1)(a(638),a(1418),i,null,null);t.exports=s.exports},1261:function(t,e,a){function i(t){a(1078)}var s=a(1)(a(639),a(1380),i,"data-v-6e33bdff",null);t.exports=s.exports},1262:function(t,e,a){function i(t){a(1060)}var s=a(1)(a(640),a(1357),i,"data-v-57553086",null);t.exports=s.exports},1263:function(t,e,a){var i=a(1)(a(641),a(1369),null,null,null);t.exports=i.exports},1264:function(t,e,a){var i=a(1)(a(642),a(1333),null,null,null);t.exports=i.exports},1265:function(t,e,a){var i=a(1)(a(643),a(1400),null,null,null);t.exports=i.exports},1266:function(t,e,a){var i=a(1)(a(644),a(1321),null,null,null);t.exports=i.exports},1267:function(t,e,a){function i(t){a(1020)}var s=a(1)(a(645),a(1301),i,"data-v-1f2f10ad",null);t.exports=s.exports},1268:function(t,e,a){function i(t){a(1024)}var s=a(1)(a(646),a(1307),i,null,null);t.exports=s.exports},1269:function(t,e,a){function i(t){a(1075)}var s=a(1)(a(647),a(1376),i,"data-v-678d00e1",null);t.exports=s.exports},1270:function(t,e,a){function i(t){a(1116)}var s=a(1)(a(648),a(1425),i,null,null);t.exports=s.exports},1271:function(t,e,a){var i=a(1)(a(649),a(1433),null,null,null);t.exports=i.exports},1274:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jl-information gz-paddingBottom"},[a("div",{staticClass:"jdy-content jdy-transfer fleft noborder"},[a("div",{staticClass:"winCenter"},[a("el-form",{ref:"saveForm",attrs:{model:t.saveForm,rules:t.saveFormRules}},[a("el-form-item",{attrs:{label:"广告位置:",prop:"aPlace","label-width":"93px"}},[a("el-select",{staticClass:"gz-Block",model:{value:t.saveForm.aPlace,callback:function(e){t.$set(t.saveForm,"aPlace",e)},expression:"saveForm.aPlace"}},t._l(t.OptionsList,function(t){return a("el-option",{key:t.id,attrs:{label:t.dName,value:t.id}})}))],1),t._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-form-item",{staticClass:"gz-Block",attrs:{label:"有效日期:",prop:"aStartTime","label-width":"93px"}},[a("el-col",{attrs:{span:50}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期时间"},model:{value:t.saveForm.aStartTime,callback:function(e){t.$set(t.saveForm,"aStartTime",e)},expression:"saveForm.aStartTime"}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"gz-Block",attrs:{label:"至",prop:"aEndTime","label-width":"93px"}},[a("el-col",{attrs:{span:50}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期时间"},model:{value:t.saveForm.aEndTime,callback:function(e){t.$set(t.saveForm,"aEndTime",e)},expression:"saveForm.aEndTime"}})],1)],1)],1),t._v(" "),0==this.uCompanyId?a("el-form-item",{attrs:{label:"投放单位:","label-width":"93px",prop:"companyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,"remote-method":t.searchCompany,remote:"",clearable:"",placeholder:"请选择单位名称"},model:{value:t.saveForm.companyId,callback:function(e){t.$set(t.saveForm,"companyId",e)},expression:"saveForm.companyId"}},t._l(t.selectList,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})}))],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"显示文字:","label-width":"93px"}},[a("el-input",{attrs:{rows:1,placeholder:"请输入内容"},model:{value:t.saveForm.aTitle,callback:function(e){t.$set(t.saveForm,"aTitle",e)},expression:"saveForm.aTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"链接地址:","label-width":"93px"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.saveForm.aLink,callback:function(e){t.$set(t.saveForm,"aLink",e)},expression:"saveForm.aLink"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"其他内容:","label-width":"93px"}},[a("el-input",{attrs:{rows:1,placeholder:"请输入内容"},model:{value:t.saveForm.aOther,callback:function(e){t.$set(t.saveForm,"aOther",e)},expression:"saveForm.aOther"}})],1),t._v(" "),a("span",{staticClass:"xing"},[t._v("*")]),t._v(" "),a("el-form-item",{staticClass:"upload-attach",attrs:{label:"上传图片:","label-width":"93px"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.saveForm.attachUrl,expression:"!saveForm.attachUrl"}],staticClass:"upload-div",attrs:{"data-v-dbb7f45e":""}},[a("ul",{staticClass:"el-upload-list el-upload-list--picture-card"}),t._v(" "),a("div",{staticClass:"el-upload el-upload--picture-card",on:{click:function(e){return e.stopPropagation(),t.openFileWindow(e)}}},[a("i",{staticClass:"el-icon-plus",attrs:{"data-v-dbb7f45e":""}}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",id:"uploadFile",name:"file"},on:{change:t.getFileAndUpload}})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.saveForm.attachUrl,expression:"saveForm.attachUrl"}],attrs:{"data-v-dbb7f45e":""}},[a("ul",{staticClass:"el-upload-list el-upload-list--picture-card",on:{click:t.deleteAttachUrl}},[a("li",{staticClass:"el-upload-list__item is-success"},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.saveForm.attachUrl,alt:""}}),t._v(" "),a("a",{staticClass:"el-upload-list__item-name"},[a("i",{staticClass:"el-icon-document"})]),t._v(" "),a("label",{staticClass:"el-upload-list__item-status-label"},[a("i",{staticClass:"el-icon-upload-success el-icon-check"})]),t._v(" "),a("i",{staticClass:"el-icon-close"}),t._v(" "),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-delete"},[a("i",{staticClass:"el-icon-delete2"})])])])]),t._v(" "),a("div",{staticClass:"el-upload el-upload--picture-card",staticStyle:{display:"none"}},[a("i",{staticClass:"el-icon-plus",attrs:{"data-v-dbb7f45e":""}}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file"}})])])]),t._v(" "),a("el-form-item",{attrs:{label:"广告说明:","label-width":"93px"}},[a("el-input",{attrs:{rows:1,placeholder:"请输入内容"},model:{value:t.saveForm.aComment,callback:function(e){t.$set(t.saveForm,"aComment",e)},expression:"saveForm.aComment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"打开类型:","label-width":"93px",prop:"aOpenType"},model:{value:t.saveForm.aOpenType,callback:function(e){t.$set(t.saveForm,"aOpenType",e)},expression:"saveForm.aOpenType"}},[a("div",{staticClass:"leftPadding"},[a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("本窗口")]),t._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("新窗口")])],1)]),t._v(" "),a("el-form-item",{attrs:{label:"是否显示:","label-width":"93px",prop:"aShow"},model:{value:t.saveForm.aShow,callback:function(e){t.$set(t.saveForm,"aShow",e)},expression:"saveForm.aShow"}},[a("div",{staticClass:"leftPadding"},[a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:t.showradio,callback:function(e){t.showradio=e},expression:"showradio"}},[t._v("显示")]),t._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:t.showradio,callback:function(e){t.showradio=e},expression:"showradio"}},[t._v("隐藏")])],1)]),t._v(" "),a("el-form-item",{attrs:{label:"排序位置:","label-width":"93px"}},[a("el-input-number",{attrs:{min:0},model:{value:t.saveForm.aSort,callback:function(e){t.$set(t.saveForm,"aSort",e)},expression:"saveForm.aSort"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"rightFlex"},[a("router-link",{attrs:{to:"/advertising"}},[a("el-button",[t._v("取消")])],1),t._v(" "),a("el-button",{staticClass:"adverBtn",attrs:{type:"primary",disabled:t.btnFlag},on:{click:t.saveNewAD}},[t._v("保存")])],1)]),t._v(" "),t.showcfCityFlag?a("jdy-alert",{staticClass:"alertJournal showtfcity",attrs:{title:"投放城市选择"},on:{closeAlert:t.closecfCity}},[a("div",{staticClass:"showtfcityaa"},[a("div",{staticClass:"showtfcityaa-scroll"},[a("div",{staticClass:"showtfcityaa-i"},t._l(t.proviceArr,function(e,i){return a("div",{key:e,staticClass:"showtfcityaaa"},[a("div",{staticClass:"showtfcityaaa-head plr10 clearfix"},[a("span",[t._v(t._s(i))]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 allSelect",attrs:{size:"small"}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 mr10 allCancel",attrs:{size:"small"}},[t._v("取消全选")])],1),t._v(" "),a("div",{staticClass:"showtfcityaaa-content plr10 clearfix"},t._l(e,function(e){return a("span",{key:e.id,class:{"showtfcityaaa-span":!0,active:-1!=t.selectCityArr.name.indexOf(e.name)},attrs:{dataId:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"hide"},[t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.type,staticClass:"taCountry"},[t._v(t._s(e.type))])}),t._v(" "),t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.pName,staticClass:"taProvince"},[t._v(t._s(e.pName))])})],2)])}))])]),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.closecfCity}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.removeAll}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",id:"selectAll"},on:{click:t.selectAllAll}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.saveCC}},[t._v("保存")])],1)]):t._e()],1)},staticRenderFns:[]}},1277:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["textarea"===t.type?"el-textarea":"el-input",t.size?"el-input--"+t.size:"",{"is-disabled":t.disabled,"el-input-group":t.$slots.prepend||t.$slots.append,"el-input-group--append":t.$slots.append,"el-input-group--prepend":t.$slots.prepend}]},["textarea"!==t.type?[t.$slots.prepend?a("div",{staticClass:"el-input-group__prepend"},[t._t("prepend")],2):t._e(),t._v(" "),t._t("icon",[t.icon?a("i",{staticClass:"el-input__icon",class:["el-icon-"+t.icon,t.onIconClick?"is-clickable":""],on:{click:t.handleIconClick}}):t._e()]),t._v(" "),"textarea"!==t.type?a("input",t._b({ref:"input",staticClass:"el-input__inner",attrs:{autocomplete:t.autoComplete},domProps:{value:t.currentValue},on:{input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur}},"input",t.$props,!1)):t._e(),t._v(" "),t.validating?a("i",{staticClass:"el-input__icon el-icon-loading"}):t._e(),t._v(" "),t.$slots.append?a("div",{staticClass:"el-input-group__append"},[t._t("append")],2):t._e()]:a("textarea",t._b({ref:"textarea",staticClass:"el-textarea__inner",style:t.textareaStyle,domProps:{value:t.currentValue},on:{input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur}},"textarea",t.$props,!1))],2)},staticRenderFns:[]}},1279:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-resources fleft"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"resources-tab"},[a("div",{staticClass:"fright"},[a("el-button",{on:{click:t.goback}},[t._v("返回")]),t._v(" "),t.readOnly?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)]),t._v(" "),a("div",{staticClass:"jdy-table jdy-table-padding"},[a("table",{staticClass:"table-custom",attrs:{cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",[a("th",{staticStyle:{width:"150px"}},[t._v("产品名称")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v("\n                                "+t._s(t.productCostingTitle.productName)+"\n                            ")])]),t._v(" "),t._m(0),t._v(" "),a("tr",[a("th",[t._v("核算人数")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入人数"},model:{value:t.productCostingTitle.peopleNum,callback:function(e){t.$set(t.productCostingTitle,"peopleNum",e)},expression:"productCostingTitle.peopleNum"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.peopleNum))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入说明"},model:{value:t.productCostingTitle.peopleNumExplain,callback:function(e){t.$set(t.productCostingTitle,"peopleNumExplain",e)},expression:"productCostingTitle.peopleNumExplain"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.peopleNumExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("领队/全陪是否免")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly?t._e():a("el-radio",{staticClass:"radio",attrs:{label:1},model:{value:t.productCostingTitle.isExempt,callback:function(e){t.$set(t.productCostingTitle,"isExempt",e)},expression:"productCostingTitle.isExempt"}},[t._v("是")]),t._v(" "),t.readOnly?t._e():a("el-radio",{staticClass:"radio",attrs:{label:0},model:{value:t.productCostingTitle.isExempt,callback:function(e){t.$set(t.productCostingTitle,"isExempt",e)},expression:"productCostingTitle.isExempt"}},[t._v("否")]),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.isExempt?"是":"否"))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入说明"},model:{value:t.productCostingTitle.isExemptExplain,callback:function(e){t.$set(t.productCostingTitle,"isExemptExplain",e)},expression:"productCostingTitle.isExemptExplain"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.isExemptExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("价格适用期")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[a("el-date-picker",{attrs:{disabled:t.readOnly,type:"daterange",placeholder:"选择日期范围"},on:{change:t.dateRangeChange},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1),t._v(" "),a("td")])]),t._v(" "),t._l(t.tableData,function(e,i){return a("tbody",{key:i},[a("tr",{on:{click:function(e){t.getIndex(i)}}},[a("th",[t.readOnly?t._e():a("el-button-group",[a("el-button",{on:{click:t.inputdesc}},[t._v("-")]),t._v(" "),a("el-button",{on:{click:t.inputadd}},[t._v("+")])],1)],1),t._v(" "),a("th",{staticClass:"sec"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("数量")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("单位（人/团）")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("单价")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("小计")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("备注说明")])]),t._v(" "),a("tr",[50!=e.categoryId?a("th",{attrs:{rowspan:e.listSize+3}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e(),t._v(" "),50==e.categoryId?a("th",{attrs:{rowspan:e.listSize+2}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e()]),t._v(" "),t._l(e.productCostingCategoryDetailList,function(e,s){return a("tr",{key:s},[a("td",[t.readOnly?t._e():a("el-input",{model:{value:e.content,callback:function(a){t.$set(e,"content","string"==typeof a?a.trim():a)},expression:"tdata.content"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.content))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{on:{change:function(e){t.getTotalCell(i)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",t._n(a))},expression:"tdata.amount"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.amount))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-select",{model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"tdata.unit"}},[a("el-option",{key:1,attrs:{label:"人",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"团",value:2}})],1),t._v(" "),t.readOnly?a("span",[t._v(t._s(null!=e.unit?1==e.unit?"人":"团":""))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{on:{change:function(e){t.getTotalCell(i)}},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"tdata.unitPrice"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.unitPrice))]):t._e()],1),t._v(" "),a("td",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.amount*e.unitPrice,1))+"\n                            ")]),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{model:{value:e.remark,callback:function(a){t.$set(e,"remark","string"==typeof a?a.trim():a)},expression:"tdata.remark"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.remark))]):t._e()],1)])}),t._v(" "),50!=e.categoryId?a("tr",[e.categoryId>=50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i+1)+"\n                            ")]):t._e(),t._v(" "),e.categoryId<50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i)+"\n                            ")]):t._e(),t._v(" "),a("td",{staticClass:"sec",attrs:{colspan:"3"}}),t._v(" "),a("td",{staticClass:"sec"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.subtotal,1))+"\n                            ")]),t._v(" "),a("td")]):t._e(),t._v(" "),50==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                接待部分合计（1-6项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum1_6,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                活动部分费用合计（7-9项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum7_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                以上费用小计（1-9项）\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum1_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e()],2)}),t._v(" "),a("tfoot",[a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                成本单价（人/团）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.costSingle,1))+"\n                            ")]),t._v(" "),a("th")]),t._v(" "),a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                团费总计\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.allTotal,1))+"\n                            ")]),t._v(" "),a("th")])])],2)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"sec"},[t._v("费用类别")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec",attrs:{colspan:"4"}},[t._v("价格明细（RMB）")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("报价说明")])])}]}},1283:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jl-information"},[a("div",{staticClass:"jdy-content jdy-transfer yjk-fleft noborder"},[a("div",{staticClass:"jdy-tab",staticStyle:{margin:"0","padding-right":"0"}},[a("a",{class:{active:null==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(null)}}},[t._v("全部\n                "),a("span")]),t._v(" "),a("a",{class:{active:0==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(0)}}},[t._v("待发团\n                "),a("span")]),t._v(" "),a("a",{class:{active:1==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(1)}}},[t._v("发团中\n                "),a("span")]),t._v(" "),a("a",{class:{active:3==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(3)}}},[t._v("已回团\n                "),a("span")]),t._v(" "),a("a",{class:{active:2==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(2)}}},[t._v("已结团\n                "),a("span")]),t._v(" "),a("a",{class:{active:4==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(4)}}},[t._v("已取消  "),a("div",{staticClass:"yjk-number"},[t._v(t._s(t.orderTotal))]),t._v(" "),a("span")]),t._v(" "),a("el-button",{staticClass:"fright mr20 mt10",on:{click:t.alertJournal}},[t._v("日志")])],1),t._v(" "),a("div",[a("el-form",{ref:"ruleform",staticClass:"demo-form",attrs:{model:t.ruleform,inline:!0,"label-width":"150px"}},[a("el-row",{staticClass:"mt10"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==t.uDataLimit,expression:"uDataLimit == 3"}],staticClass:"yjk-mb10 paddLeft",attrs:{label:"",prop:"uCompanyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择单位名称"},model:{value:t.ruleform.companyId,callback:function(e){t.$set(t.ruleform,"companyId",e)},expression:"ruleform.companyId"}},t._l(t.selectList,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"yjk-mb10"},[a("el-select",{on:{change:t.getTableData},model:{value:t.dataParam.dateType,callback:function(e){t.$set(t.dataParam,"dateType",e)},expression:"dataParam.dateType"}},[a("el-option",{key:0,attrs:{label:"出团时间",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"回团时间",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"创建团期时间",value:2}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"yjk-mb10"},[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:t.dateRangeChange},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1),t._v(" "),a("el-form-item",{staticClass:"yjk-mb10 yjk-search"},[a("el-input",{attrs:{placeholder:"请输入线路名称、团号搜索"},model:{value:t.ruleform.searchContent,callback:function(e){t.$set(t.ruleform,"searchContent","string"==typeof e?e.trim():e)},expression:"ruleform.searchContent"}})],1),t._v(" "),a("el-form-item",{staticClass:"yjk-ml100 yjk-mb10"},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:4==t.jdytabActive,expression:"jdytabActive==4"}],staticClass:"mr10",on:{change:t.changeOtStatus},model:{value:t.checkedOtStatus,callback:function(e){t.checkedOtStatus=e},expression:"checkedOtStatus"}},[t._v("游客未被全部取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getTableData()}}},[t._v("确认查询")]),t._v(" "),a("el-button",{attrs:{type:"primary"}},[a("a",{staticStyle:{color:"#fff"},attrs:{href:t.downLoadHref,download:"导出成本损益表"},on:{click:t.changeHref}},[t._v("\n                            导出成本损益表\n                        ")])])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"jdy-table p10 yjksell"},[a("el-table",{staticClass:"mt20 all",attrs:{data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.handleRowChange}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("filterStatus")(e.row.departureStatus))+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出团日期",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("dateFormat")(e.row.outGroupTime))+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"回团日期",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("dateFormat")(e.row.backGroupTime))+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建团期时间",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("dateFormat")(e.row.scheduleTime))+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"线路名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.routeName)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"团号",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.groupNo)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"成团人数",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.groupPeopleNum)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"收客数",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"colorSpan",on:{click:function(a){t.getTouristInfo(e.row.scheduleId)}}},[t._v(t._s(e.row.touristsNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"行程天数",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.tripDays)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"目的地",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.destination)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"线路类型",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("lineType")(e.row.routeType))+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品经理",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.productManager)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{staticClass:"goto-update",attrs:{size:"mini",placeholder:"操作"},on:{change:t.orderChange},model:{value:t.orderChangeType[e.row.scheduleId],callback:function(a){t.$set(t.orderChangeType,e.row.scheduleId,a)},expression:"orderChangeType[scope.row.scheduleId]"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:0==e.row.departureStatus,expression:"scope.row.departureStatus==0"}],key:"1",attrs:{value:"1",label:"发团"}}),t._v(" "),a("el-option",{directives:[{name:"show",rawName:"v-show",value:3==e.row.departureStatus,expression:"scope.row.departureStatus==3"}],key:"2",attrs:{value:"2",label:"结团"}}),t._v(" "),a("el-option",{directives:[{name:"show",rawName:"v-show",value:2!=e.row.departureStatus,expression:"scope.row.departureStatus != 2"}],key:"3",attrs:{value:"3",label:"取消客人"}}),t._v(" "),a("el-option",{directives:[{name:"show",rawName:"v-show",value:0==e.row.departureStatus,expression:"scope.row.departureStatus==0"}],key:"4",attrs:{value:"4",label:"取消团期"}}),t._v(" "),a("el-option",{directives:[{name:"show",rawName:"v-show",value:2==e.row.departureStatus,expression:"scope.row.departureStatus == 2"}],key:"5",attrs:{value:"5",label:"成本核算"}})],1),t._v(" "),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){t.gotoNotice(e.row.scheduleId)}}},[t._v("\n                            出团通知书\n                        ")])]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)]),t._v(" "),t.cancelGroupObj.flag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"取消团期"},on:{closeAlert:t.closeAlertBtn}},[a("div",{staticClass:"yjk-alertInner"},[a("div",[a("span",{staticClass:"yjk-innerTitle"},[t._v("团号:")]),t._v(" "),a("span",{staticClass:"w70per inlineblock"},[t._v(t._s(t.cancelGroupObj.groupNo))])]),t._v(" "),a("div",[a("span",{staticClass:"yjk-innerTitle"},[t._v("线路名称:")]),t._v(" "),a("span",{staticClass:"w70per inlineblock"},[t._v(t._s(t.cancelGroupObj.line))])]),t._v(" "),a("div",[a("span",{staticClass:"yjk-innerTitle redstar fleft"},[t._v("取消原因:")]),t._v(" "),a("span",{staticClass:"w70per inlineblock"},[a("el-input",{attrs:{type:"textarea"},model:{value:t.cancelGroupObj.reason,callback:function(e){t.$set(t.cancelGroupObj,"reason",e)},expression:"cancelGroupObj.reason"}})],1)])]),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:t.cancelGroup_submit}},[t._v("提交")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",on:{click:t.closeAlertBtn}},[t._v("关闭")])],1)]):t._e(),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.focusPriceId,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e()],1)},staticRenderFns:[]}},1286:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jl-information fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("div",{staticClass:"jdy-tab"},[a("el-form",{ref:"ruleSearchForm",staticClass:"ml10",attrs:{model:t.ruleSearchForm,inline:!0}},[a("el-row",{staticClass:"search-row pt10"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.tableDataTotal,expression:"tableDataTotal!=0"}],staticClass:"fleft mt14"},[t._v("【"+t._s(t.$route.query.pname)+"】"+t._s(t.$route.query.name)+t._s(t.$route.query.time)+"\n                "+t._s(0==t.$route.query.jdytabActive?"全部":1==t.$route.query.jdytabActive?"预约":"订购")+"名单")]),t._v(" "),a("el-button",{staticClass:"ml10 btnbg fright",staticStyle:{"margin-right":"-10px"},attrs:{type:"default"},on:{click:function(e){t.goBack()}}},[t._v("返回")])],1)],1)],1),t._v(" "),a("div",{staticClass:"jdy-table pt20 jl-information"},[a("el-table",{staticClass:"all yjk-orderList",attrs:{data:t.tableData,border:""},on:{"current-change":t.handleRowChange}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"下单人员","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.getUserInfo(e.row.userId)}}},[t._v(t._s(e.row.uName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下单人员手机号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.uTel)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下单人员所属们部门","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.dName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"游客信息","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.touristName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"游客手机号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.touristTel)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"游客身份证号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.touristID)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.getOrderInfo(e.row.oId)}}},[t._v(t._s(e.row.orderNO))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票价类目","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.tCategory)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票价名称","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.tName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下单时间","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(e.row.orderTime)+"\n          ")]}}])})],1),t._v(" "),a("div",{staticClass:"fleft totelDiv"},[t._v("游客人数合计："+t._s(t.totelPeople))]),t._v(" "),a("div",{staticClass:"fright clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1),t._v(" "),t.alertFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"用户基本信息"},on:{closeAlert:t.closeAlert}},[a("div",{staticClass:"yjk-alertInner"},[a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("用户账号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uAccount))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("真实姓名：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uRealName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("员工编号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uNo))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("职务：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uPost))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("单位名称：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.cName))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("部门名称：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.dName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("负责人：")]),t._v(" "),a("span",[t._v(t._s(t._f("chargePersonType")(t.userInfo.uDtype)))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("身份证：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uIdcard))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("手机号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uTel))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("出生年月：")]),t._v(" "),a("span",[t._v(t._s(t._f("dateFormat")(t.userInfo.uBirthday)))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("性别：")]),t._v(" "),a("span",[t._v(t._s(t._f("sexName")(t.userInfo.uSex)))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("文化程度：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.degreeName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("紧急联系人：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uContacts))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uAddress))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uPhone))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("微信号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uWxname))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("QQ：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uQq))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("邮箱：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uEmail))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("备注：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uRemark))])])])])]):t._e()],1)])},staticRenderFns:[]}},1290:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"banqiForm",staticClass:"demo-form-inline",attrs:{model:t.banqiForm,rules:t.banqiRule,"label-width":"100px"}},[a("div",{staticClass:"jdy-tab"},[a("el-button",{staticClass:"fright mt10 mr10",on:{click:function(e){t.goback("assemblySchedule")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmit("banqiForm")}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix  relative mt60"},[2!=t.addType?a("div",{staticClass:"clearfix p10 border pb30"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--班期信息--")])]),t._v(" "),a("el-row",{staticClass:"mt30"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"班期编号:",prop:"sScheduleNo"}},[a("el-input",{attrs:{placeholder:"请输入班期编号",disabled:!0},model:{value:t.banqiForm.sScheduleNo,callback:function(e){t.$set(t.banqiForm,"sScheduleNo",e)},expression:"banqiForm.sScheduleNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开始时间:"}},[a("el-date-picker",{staticClass:"all",staticStyle:{width:"100%"},attrs:{editable:!1,type:"date",placeholder:"开始时间",disabled:!0,"picker-options":t.pickerOptions0},on:{change:t.calendarsChange},model:{value:t.calendars,callback:function(e){t.calendars=e},expression:"calendars"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"星期几:"}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择开始时间",disabled:!0},model:{value:t.week,callback:function(e){t.week=e},expression:"week"}},t._l(t.WeekDay,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"班期名称:"}},[a("el-input",{attrs:{placeholder:"请输入班期名称",disabled:!0},model:{value:t.banqiForm.sScheduleName,callback:function(e){t.$set(t.banqiForm,"sScheduleName",e)},expression:"banqiForm.sScheduleName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出发时分:",prop:""}},[[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":{format:"HH:mm"},format:"HH:mm",placeholder:"出发时分",clearable:"",disabled:!0,editable:!1},model:{value:t.sLeaveTime,callback:function(e){t.sLeaveTime=e},expression:"sLeaveTime"}})]],2)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"停售时间:",prop:"sStopSale"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"number",disabled:!0},model:{value:t.banqiForm.sStopSale,callback:function(e){t.$set(t.banqiForm,"sStopSale",t._n(e))},expression:"banqiForm.sStopSale"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择",disabled:!0},slot:"prepend",model:{value:t.banqiForm.sStopType,callback:function(e){t.$set(t.banqiForm,"sStopType",e)},expression:"banqiForm.sStopType"}},[a("el-option",{attrs:{label:"分钟",value:0}}),t._v(" "),a("el-option",{attrs:{label:"小时",value:1}}),t._v(" "),a("el-option",{attrs:{label:"天",value:2}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"虚拟已售数:"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"虚拟已售数",min:0,max:100,controls:!1,disabled:!0},model:{value:t.banqiForm.sShamNum,callback:function(e){t.$set(t.banqiForm,"sShamNum",t._n(e))},expression:"banqiForm.sShamNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对号入座:",prop:""}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择",disabled:!0},on:{change:t.changeType},model:{value:t.banqiForm.sSitType,callback:function(e){t.$set(t.banqiForm,"sSitType",e)},expression:"banqiForm.sSitType"}},t._l(t.setType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"成团人数:"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:100,controls:!1,disabled:!0},model:{value:t.banqiForm.sGroupNum,callback:function(e){t.$set(t.banqiForm,"sGroupNum",e)},expression:"banqiForm.sGroupNum"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出发地:"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:t.banqiForm.chufa,callback:function(e){t.$set(t.banqiForm,"chufa",e)},expression:"banqiForm.chufa"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"始发站:"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:t.banqiForm.shifa,callback:function(e){t.$set(t.banqiForm,"shifa",e)},expression:"banqiForm.shifa"}})],1)],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt60"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--票价信息--")])]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.ticketList,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"适用站点",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.departureNum)+"个站点")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价类目",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tCategory))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tName))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"门市价",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{controls:!1,min:0,max:1e6,disabled:!0},model:{value:e.row.tMarketPrice,callback:function(a){t.$set(e.row,"tMarketPrice",a)},expression:"scope.row.tMarketPrice"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"库存量（-1代表无限制）",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{controls:!1,min:-1,max:1e6,disabled:!0},model:{value:e.row.tStock,callback:function(a){t.$set(e.row,"tStock",a)},expression:"scope.row.tStock"}})]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt30 carboxss"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--车座信息--")])]),t._v(" "),a("el-table",{staticClass:"myclass",staticStyle:{width:"100%"},attrs:{data:t.tableData2,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"调整车辆数",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:5}},[t._v("\n                       \n                    ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:" ml10 carboxss-button mt10",attrs:{disabled:!0},on:{click:t.addCar}},[a("i",{staticClass:"el-icon-plus blue transx07"}),t._v("新增\n                      ")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button",attrs:{disabled:!0},on:{click:t.removeCar}},[a("i",{staticClass:"el-icon-close red  transx06"}),t._v("删除\n                      ")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"调整座位数",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"当前车号:",prop:""}},[a("el-input",{attrs:{value:t.currentCar>-1?t.currentCar+1:"",readonly:!0,placeholder:"请选择车辆",disabled:!0}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新座位数:",prop:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!0,placeholder:"请选择车辆"},on:{change:t.seatChange},model:{value:-1==t.currentCar?null:t.currentCarSeatNum,callback:function(e){-1==t.currentCar||(t.currentCarSeatNum=t._n(e))},expression:"currentCar==-1?null:currentCarSeatNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"border caredit1 tc",staticStyle:{"background-color":"#eef1f6"}},[a("span",{staticClass:"icon3 inlineblock icon3-edit mt25"}),t._v(" "),a("p",{staticClass:"f12 mt010"},[t._v("修改")])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预留座位数",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"选择单位:"}},[a("el-select",{staticClass:"all",attrs:{clearable:"",filterable:"",remote:"",placeholder:"请选择单位","remote-method":t.searchCompany,loading:t.loading,disabled:!0},model:{value:t.currentCompany,callback:function(e){t.currentCompany=e},expression:"currentCompany"}},t._l(t.companyList,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"预留时效(h):",prop:""}},[a("el-input",{attrs:{type:"number",placeholder:"请输入预留时效",disabled:!0},model:{value:t.temptoraryTime,callback:function(e){t.temptoraryTime=e},expression:"temptoraryTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:"mt10 ml10 carboxss-button",attrs:{disabled:!0},on:{click:t.addTemporary}},[a("i",{staticClass:"icon3 inlineblock icon3-stay "}),t._v("预留\n                      ")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button",attrs:{disabled:!0},on:{click:t.releaseTemporary}},[a("i",{staticClass:"icon3 inlineblock icon3-discharge"}),t._v("释放\n                      ")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"其他管理",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc",staticStyle:{"background-color":"#eef1f6"}},[a("i",{staticClass:"icon3 inlineblock icon3-suo1 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("锁定车位")])])]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc ml10",staticStyle:{"background-color":"#eef1f6"}},[a("i",{staticClass:"icon3 inlineblock icon3-suo2 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("解锁车位")])])])]}}])})],1),t._v(" "),a("div",{staticClass:"carboxbb border mt30"},[a("div",{staticClass:"carboxbb-top"},[a("el-row",{staticClass:"tc"},[a("el-col",{attrs:{span:16}},[t._v("可用车辆信息")]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("座位信息")])],1)],1),t._v(" "),a("div",{staticClass:"carboxbb-content"},[a("el-row",{staticStyle:{height:"500px"}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"carboxbb-table"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.carList,"show-header":!1,"highlight-current-row":"",border:"",height:"500"},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{property:"bus",label:"bus",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("BUS"),a("input",{staticClass:"sortNum",attrs:{hidden:""},domProps:{value:e.$index+1}})]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"info",label:"信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t.banqiForm.sScheduleNo)+" "+t._s(e.$index+1)+"号车["+t._s(t.formatDate(t.calendars,"yyyy-MM-dd"))+"]")]),t._v(" "),a("div",[t._v("总数："+t._s(t.carList[e.$index].bSeatsNum)+"\n                              "),a("span",{staticClass:"ml10"},[t._v("已售："+t._s(t.carList[e.$index].seatsSoldNum?t.carList[e.$index].seatsSoldNum:0))])])]}}])})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[t.currentCar>-1?a("div",{staticClass:"carboxbb-right"},[t._l(t.carList[t.currentCar].bSeatsNum,function(e){return[a("el-tooltip",{attrs:{content:t.getTipContent(e),placement:"top",effect:"light",disabled:!0}},[a("div",{staticClass:"icon3 icon3-seat inlineblock",class:{"icon3-seat-temporary":t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString()),"icon3-seat-lock":t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString()),"icon3-seat-success":-1!=t.selectedList.indexOf(e)},attrs:{al:""},on:{click:function(a){t.setSeat(e)}}},[t._v(t._s(e)+"\n                          ")])])]}),t._v(" "),t.carList[t.currentCar].bSeatsNum<=0?a("div",{staticStyle:{"margin-left":"100px",color:"red"}},[t._v("请设置座位数")]):t._e()],2):t._e()])],1)],1)])],1)])])])],1)])},staticRenderFns:[]}},1299:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jl-information jl-onlinebill"},[a("div",{staticClass:"jdy-content jdy-transfer fleft jl-ad"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"jdy-tab"},[a("a",{class:{active:null==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(null)}}},[t._v("全部\n          "),a("span")]),t._v(" "),a("a",{class:{active:1==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(1)}}},[t._v("已预约\n          "),a("span")]),t._v(" "),a("a",{class:{active:2==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(2)}}},[t._v("已订购\n          "),a("span")])]),t._v(" "),a("div",{staticClass:"mt30"}),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"mt30",attrs:{model:t.ruleForm,inline:!0,"label-width":"100px"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==t.uDataLimit,expression:"uDataLimit == 3"}],attrs:{label:"单位名称：",prop:"uCompanyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择单位名称"},model:{value:t.ruleForm.companyId,callback:function(e){t.$set(t.ruleForm,"companyId",e)},expression:"ruleForm.companyId"}},t._l(t.selectList,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:"选择时间范围"},on:{change:t.datetimerange},model:{value:t.ruleForm.dateRange,callback:function(e){t.$set(t.ruleForm,"dateRange",e)},expression:"ruleForm.dateRange"}})],1),t._v(" "),a("el-button",{staticClass:"el-button btnbg el-button--primary",attrs:{type:"primary"},on:{click:t.firstSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"btnbg fr",attrs:{type:"default"}},[a("a",{attrs:{href:t.downLoadHref,download:"出团计划管理"},on:{click:t.changeHref}},[t._v("\n                  导出\n                ")])])],1)],1)],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"线路编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.pNO))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aTitle",label:"线路行程名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.pName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"areaList",label:"产品经理"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.pManager))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aEndTime",label:"天数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pDays))])]}}])}),t._v(" "),2!=t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"预约人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{name:"groupSheet",query:{beginDate:t.ruleForm.beginDate,endDate:t.ruleForm.endDate,jdytabActive:1,name:e.row.pName,dateRange:t.ruleForm.dateRange,productId:e.row.productId}}}},[e.row.reserveNums?a("span",{staticStyle:{color:"#20a0ff"}},[t._v(t._s(e.row.reserveNums))]):t._e()]),t._v(" "),e.row.reserveNums?t._e():a("span",{staticStyle:{color:"#20a0ff"}},[t._v("0")])]}}])}):t._e(),t._v(" "),1!=t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"订购人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{name:"groupSheet",query:{beginDate:t.ruleForm.beginDate,endDate:t.ruleForm.endDate,jdytabActive:2,name:e.row.pName,dateRange:t.ruleForm.dateRange,productId:e.row.productId}}}},[e.row.payedNum?a("span",{staticStyle:{color:"#20a0ff"}},[t._v(t._s(e.row.payedNum))]):t._e()]),t._v(" "),e.row.payedNum?t._e():a("span",{staticStyle:{color:"#20a0ff"}},[t._v("0")])]}}])}):t._e(),t._v(" "),null==t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{name:"groupSheet",query:{beginDate:t.ruleForm.beginDate,endDate:t.ruleForm.endDate,jdytabActive:0,name:e.row.pName,dateRange:t.ruleForm.dateRange,productId:e.row.productId}}}},[e.row.totalNums?a("span",{staticStyle:{color:"#20a0ff"}},[t._v(t._s(e.row.totalNums))]):t._e()]),t._v(" "),e.row.totalNums?t._e():a("span",{staticStyle:{color:"#20a0ff"}},[t._v("0")])]}}])}):t._e()],1),t._v(" "),a("el-table",{staticClass:"childBill",staticStyle:{width:"100%","border-top":"none"},attrs:{data:t.tableDataOne,border:""}},[a("el-table-column",{attrs:{label:"线路编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("本页合计：")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aTitle",label:"线路行程名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"areaList",label:"产品经理"}}),t._v(" "),a("el-table-column",{attrs:{prop:"aEndTime",label:"天数",width:"100"}}),t._v(" "),2!=t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"预约人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pageReserve))])]}}])}):t._e(),t._v(" "),1!=t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"订购人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pagePayed))])]}}])}):t._e(),t._v(" "),null==t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pageTotalNums))])]}}])}):t._e()],1),t._v(" "),a("el-table",{staticClass:"childBill",staticStyle:{width:"100%","border-top":"none"},attrs:{data:t.tableDataTwo,border:""}},[a("el-table-column",{attrs:{label:"线路编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("合计：")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aTitle",label:"线路行程名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"areaList",label:"产品经理"}}),t._v(" "),a("el-table-column",{attrs:{prop:"aEndTime",label:"天数",width:"100"}}),t._v(" "),2!=t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"预约人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalReserve))])]}}])}):t._e(),t._v(" "),1!=t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"订购人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalPayed))])]}}])}):t._e(),t._v(" "),null==t.jdytabActive?a("el-table-column",{attrs:{prop:"aStatus",label:"人数合计"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalNums))])]}}])}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])])},staticRenderFns:[]}},1300:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner jdy-content-inner-pr30"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:1}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"行程信息",icon:"upload"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:t.goback}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mr10 mt10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmitGo("lineForm")}}},[t._v("下一步")]),t._v(" "),a("el-button",{staticClass:"fright mt10",attrs:{disabled:t.btnFlag},on:{click:function(e){t.onSubmit("lineForm")}}},[t._v("保存")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mt10"}),t._v(" "),a("el-form",{ref:"lineForm",attrs:{model:t.lineForm,rules:t.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-row",[a("el-form-item",{attrs:{prop:"cover",label:"上传封面："}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:!1,action:t.imgUploadPath,"before-upload":t.checkFileType,data:t.fileType,"on-success":t.uploadSuccess,"show-file-list":!1,"on-error":t.uploadError,headers:t.uploadHeader,"with-credentials":!0}},[t.lineForm.cover?a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.lineForm.cover}}):a("div",[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将封面拖到此处，或\n                      "),a("em",[t._v("点击上传")])])]),t._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"15px"},attrs:{slot:"tip"},slot:"tip"},[t._v("建议尺寸:最小(550*350)，一般(715*455)，大小:不超过(5M)")])])],1)],1),t._v(" "),a("el-row",[0==t.lineForm.pFrom?a("el-form-item",{attrs:{label:"产品来源：",prop:"pFrom"}},[a("el-select",{staticClass:"all",attrs:{clearable:""},model:{value:t.lineForm.pFrom,callback:function(e){t.$set(t.lineForm,"pFrom",e)},expression:"lineForm.pFrom"}},t._l(t.comeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),a("el-col",{attrs:{span:12}},[1==t.lineForm.pFrom?a("el-form-item",{attrs:{label:"产品来源：",prop:"pFrom"}},[a("el-select",{staticClass:"all",attrs:{clearable:""},model:{value:t.lineForm.pFrom,callback:function(e){t.$set(t.lineForm,"pFrom",e)},expression:"lineForm.pFrom"}},t._l(t.comeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1),t._v(" "),a("el-col",{attrs:{span:12}},[1==t.lineForm.pFrom?a("el-form-item",{attrs:{label:"单位名称：",prop:"pFromName"}},[a("el-input",{attrs:{placeholder:"请输入供应商单位名称"},model:{value:t.lineForm.pFromName,callback:function(e){t.$set(t.lineForm,"pFromName",e)},expression:"lineForm.pFromName"}})],1):t._e()],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"产品类型：",prop:"pType",placeholder:"请选择产品类型"}},[a("el-select",{staticClass:"all",on:{change:t.productTypeChange},model:{value:t.lineForm.pType,callback:function(e){t.$set(t.lineForm,"pType",e)},expression:"lineForm.pType"}},t._l(t.productTypes,function(t){return a("el-option",{key:t.code,attrs:{label:t.label,value:t.code}})}))],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称：",prop:"pName"}},[a("el-input",{attrs:{placeholder:"产品名称"},model:{value:t.lineForm.pName,callback:function(e){t.$set(t.lineForm,"pName",e)},expression:"lineForm.pName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"目的地：",prop:"pDestination"}},[a("el-select",{staticClass:"all",model:{value:t.lineForm.pDestination,callback:function(e){t.$set(t.lineForm,"pDestination",e)},expression:"lineForm.pDestination"}},t._l(t.destinationList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name_des,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品简称：",prop:"pShortName"}},[a("el-input",{attrs:{placeholder:"产品简称"},model:{value:t.lineForm.pShortName,callback:function(e){t.$set(t.lineForm,"pShortName",e)},expression:"lineForm.pShortName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属品牌：",prop:"pBrand",placeholder:"请选择所属品牌"}},[a("el-select",{staticClass:"all",attrs:{filterable:!0,"remote-method":t.searchBrand,clearable:"",remote:""},model:{value:t.lineForm.pBrand,callback:function(e){t.$set(t.lineForm,"pBrand",e)},expression:"lineForm.pBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.bName,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品编号：",prop:"pNo"}},[a("el-input",{attrs:{placeholder:"请填写字母、数字"},model:{value:t.lineForm.pNo,callback:function(e){t.$set(t.lineForm,"pNo",e)},expression:"lineForm.pNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人：",prop:"pContacts"}},[a("el-select",{staticClass:"all",attrs:{filterable:!0,"remote-method":t.searchContacts,clearable:"",remote:""},on:{change:t.testChange123},model:{value:t.lineForm.pContacts,callback:function(e){t.$set(t.lineForm,"pContacts",e)},expression:"lineForm.pContacts"}},t._l(t.peopleList,function(t){return a("el-option",{key:t.puserId,attrs:{label:t.uRealName,value:t.userId}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品排序："}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{type:"number",placeholder:"产品排序",min:0,max:1e6,controls:!1},model:{value:t.lineForm.pSort,callback:function(e){t.$set(t.lineForm,"pSort",e)},expression:"lineForm.pSort"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系方式："}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{data:"pQq",placeholder:"qq"},model:{value:t.lineForm.pQq,callback:function(e){t.$set(t.lineForm,"pQq",e)},expression:"lineForm.pQq"}})],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"tel"},model:{value:t.lineForm.pPhone,callback:function(e){t.$set(t.lineForm,"pPhone",e)},expression:"lineForm.pPhone"}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"支付类型："}},[a("el-col",{attrs:{span:10}},[a("el-radio-group",{model:{value:t.lineForm.pPayWay,callback:function(e){t.$set(t.lineForm,"pPayWay",e)},expression:"lineForm.pPayWay"}},[a("el-radio",{attrs:{label:0}},[t._v("全款支付")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("首付款支付")])],1)],1)],1)],1),t._v(" "),1==t.lineForm.pPayWay?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"首付款类型："}},[a("el-col",{attrs:{span:10}},[a("el-radio-group",{on:{change:t.clearPay},model:{value:t.lineForm.pFirstPayType,callback:function(e){t.$set(t.lineForm,"pFirstPayType",e)},expression:"lineForm.pFirstPayType"}},[a("el-radio",{attrs:{label:1}},[t._v("固定金额（每人）")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("百分比（订单总额）")])],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[1==t.lineForm.pFirstPayType?a("el-input",{attrs:{clearable:"",placeholder:"请输入首款固定金额"},model:{value:t.lineForm.pPayAmount,callback:function(e){t.$set(t.lineForm,"pPayAmount",t._n(e))},expression:"lineForm.pPayAmount"}},[1==t.lineForm.pFirstPayType?a("template",{slot:"append"},[t._v("元")]):t._e()],2):t._e(),t._v(" "),2==t.lineForm.pFirstPayType?a("el-input",{attrs:{clearable:"",placeholder:"请输入首款百分比",maxlength:2},model:{value:t.lineForm.pPayAmount,callback:function(e){t.$set(t.lineForm,"pPayAmount",t._n(e))},expression:"lineForm.pPayAmount"}},[2==t.lineForm.pFirstPayType?a("template",{slot:"append"},[t._v("%")]):t._e()],2):t._e()],1)],1)],1):t._e()],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品归属："}},[a("el-col",{attrs:{span:10}},[a("el-radio-group",{attrs:{disabled:1==t.lineForm.ascriptionFlag},model:{value:t.lineForm.ascription,callback:function(e){t.$set(t.lineForm,"ascription",e)},expression:"lineForm.ascription"}},[a("el-radio",{attrs:{label:0}},[t._v("本地产品")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("区域产品")])],1)],1)],1)],1),t._v(" "),t.lineForm.ascription?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"集结分公司："}},[a("el-col",{attrs:{span:20}},[a("el-checkbox-group",{on:{change:t.subCompanyChange},model:{value:t.lineForm.subCompany,callback:function(e){t.$set(t.lineForm,"subCompany",e)},expression:"lineForm.subCompany"}},t._l(t.subCompanyArr,function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id,disabled:1==t.lineForm.ascriptionFlag}},[t._v(t._s(e.cName))])}))],1)],1)],1):t._e()],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"线路特色："}},[a("jdy-editor",{attrs:{content:t.lineForm.pSpecial,attr:"pSpecial"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"费用包含："}},[a("jdy-editor",{attrs:{content:t.lineForm.pCostInclude,attr:"pCostInclude"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"费用不包含："}},[a("jdy-editor",{attrs:{content:t.lineForm.pCostExclude,attr:"pCostExclude"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"预定须知："}},[a("jdy-editor",{attrs:{content:t.lineForm.pNotes,attr:"pNotes"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),20==t.lineForm.pType?a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"签证信息："}},[a("jdy-editor",{attrs:{content:t.lineForm.pVisa,attr:"pVisa"},on:{input:t.editorUpdate}})],1)],1):t._e()],1)],1)])},staticRenderFns:[]}},1301:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"tickForm",staticClass:"demo-form-inline",attrs:{model:t.tickForm,rules:t.rules,"label-width":"150px"}},[a("div",{staticClass:"jdy-tab"},[a("a",{staticStyle:{border:"0"}},[t._v(t._s(t.productDetail.pName)+"\n                    "),a("span")]),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("Ticketprice")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmit()}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix border relative mt30"},[a("div",{staticClass:"clearfix p10"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价类目:",prop:"tCategory"}},[a("el-select",{staticClass:"inputGeneral",model:{value:t.tickForm.tCategory,callback:function(e){t.$set(t.tickForm,"tCategory",e)},expression:"tickForm.tCategory"}},t._l(t.baseCategory,function(t,e){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价类型:",prop:"tType"}},[a("el-select",{staticClass:"inputGeneral",on:{change:t.getName},model:{value:t.tickForm.tType,callback:function(e){t.$set(t.tickForm,"tType",e)},expression:"tickForm.tType"}},[a("el-option",{key:0,attrs:{label:"成人票",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"儿童票",value:1}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价名称:",prop:"tName"}},[a("el-input",{staticClass:"inputGeneral",model:{value:t.tickForm.tName,callback:function(e){t.$set(t.tickForm,"tName",e)},expression:"tickForm.tName"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"门市价:",prop:"tMarketPrice"}},[a("el-input",{staticClass:"inputGeneral",model:{value:t.tickForm.tMarketPrice,callback:function(e){t.$set(t.tickForm,"tMarketPrice",e)},expression:"tickForm.tMarketPrice"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"库存量:"}},[a("el-input-number",{staticClass:"inputGeneral",attrs:{min:-1},model:{value:t.tickForm.tStock,callback:function(e){t.$set(t.tickForm,"tStock",e)},expression:"tickForm.tStock"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交通类目:",prop:"tTraffic"}},[a("el-select",{staticClass:"inputGeneral",attrs:{id:"TrafficDiv"},on:{change:function(e){t.getStationList(!1)}},model:{value:t.tickForm.tTraffic,callback:function(e){t.$set(t.tickForm,"tTraffic",e)},expression:"tickForm.tTraffic"}},[a("el-option",{key:0,attrs:{label:"飞机",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"火车",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"汽车",value:2}}),t._v(" "),a("el-option",{key:3,attrs:{label:"邮轮",value:3}})],1)],1)],1)],1),t._v(" "),a("el-row",[1==t.productDetail.ascription?a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"内部集结价:",prop:"tGatherPrice"}},[a("el-input",{staticClass:"inputGeneral",attrs:{min:1},model:{value:t.tickForm.tGatherPrice,callback:function(e){t.$set(t.tickForm,"tGatherPrice",e)},expression:"tickForm.tGatherPrice"}})],1)],1):t._e(),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"成人数:"}},[a("el-input-number",{staticClass:"inputGeneral",attrs:{min:0},model:{value:t.tickForm.tAdultNum,callback:function(e){t.$set(t.tickForm,"tAdultNum",e)},expression:"tickForm.tAdultNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"儿童数:"}},[a("el-input-number",{staticClass:"inputGeneral",attrs:{min:0},model:{value:t.tickForm.tChildNum,callback:function(e){t.$set(t.tickForm,"tChildNum",e)},expression:"tickForm.tChildNum"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{staticClass:"redstar",attrs:{label:"始发站:"}},[a("div",{staticClass:"tfcity relative"},[a("div",{staticClass:"el-input",attrs:{id:"SFstation"}},[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择始发站"},model:{value:t.selectStationArr,callback:function(e){t.selectStationArr=e},expression:"selectStationArr"}},t._l(t.stationArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.dName+"-"+t.dProvince+"-"+t.dCity+"-"+t.dArea,value:t.id}})}))],1)])])],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"票价简介:"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.tickForm.tIntroduction,callback:function(e){t.$set(t.tickForm,"tIntroduction",e)},expression:"tickForm.tIntroduction"}})],1)],1)],1)])])],1),t._v(" "),t.showcfCityFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"投放城市选择"},on:{closeAlert:t.closecfCity}},[a("div",{staticClass:"showtfcityaa"},[a("div",{staticClass:"showtfcityaa-scroll"},[a("div",{staticClass:"showtfcityaa-i"},t._l(t.proviceArr,function(e,i){return a("div",{key:e,staticClass:"showtfcityaaa"},[a("div",{staticClass:"showtfcityaaa-head plr10 clearfix"},[a("span",[t._v(t._s(i))]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 allSelect",attrs:{size:"small"}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 mr10 allCancel",attrs:{size:"small"}},[t._v("取消全选")])],1),t._v(" "),a("div",{staticClass:"showtfcityaaa-content plr10 clearfix"},t._l(e,function(e){return a("span",{key:e.id,class:{"showtfcityaaa-span":!0,active:-1!=t.selectCityArr.name.indexOf(e.name)},attrs:{dataId:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"hide"},[t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.id,staticClass:"taCountry"},[t._v(t._s(e.type))])}),t._v(" "),t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.id,staticClass:"taProvince"},[t._v(t._s(e.pName))])})],2)])}))])]),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.closecfCity}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.removeAll}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",id:"selectAll"},on:{click:t.selectAllAll}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.saveCC}},[t._v("保存")])],1)]):t._e()],1)},staticRenderFns:[]}},1307:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"tickForm",staticClass:"demo-form-inline",attrs:{model:t.tickForm,"label-width":"150px"}},[a("div",{staticClass:"jdy-tab"},[a("a",{staticStyle:{border:"0"}},[t._v(t._s(t.productDetail.pName)+"\n                    "),a("span")]),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("Ticketprice")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:t.onSubmit}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix border relative mt30"},[a("div",{staticClass:"clearfix p10"},[a("div",{staticClass:"alertAddProduct3-tablebtn"},[a("el-button",{staticClass:" mt10 ml20",on:{click:t.addTr}},[a("i",{staticClass:"el-icon-plus t07 green"}),t._v("添加行")]),t._v(" "),a("el-button",{staticClass:" mt10 ",on:{click:function(e){t.removeTr()}}},[a("i",{staticClass:"el-icon-close t07 red"}),t._v("移除行")]),t._v(" "),a("el-button",{staticClass:" mt10 ",on:{click:t.cloneTr}},[t._v("复制")])],1),t._v(" "),a("div",{staticClass:"p10"},[a("el-form",{ref:"tickForm3",attrs:{rules:t.rules}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tickForm3,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"票价名称","min-width":"120",prop:"rules[scope.$index].tName"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.tickForm3[e.$index].tName,callback:function(a){t.$set(t.tickForm3[e.$index],"tName",a)},expression:"tickForm3[scope.$index].tName"}}),t._v(" "),a("span",{staticClass:"getIndex",model:{value:t.tickForm3[e.$index].Index,callback:function(a){t.$set(t.tickForm3[e.$index],"Index",a)},expression:"tickForm3[scope.$index].Index"}},[t._v(t._s(e.$index))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"tType",label:"票价类型","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{on:{change:function(a){t.getNames(e.$index)}},model:{value:t.tickForm3[e.$index].tType,callback:function(a){t.$set(t.tickForm3[e.$index],"tType",a)},expression:"tickForm3[scope.$index].tType"}},[a("el-option",{key:0,attrs:{label:"成人票",value:"0"}}),t._v(" "),a("el-option",{key:1,attrs:{label:"儿童票",value:"1"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票价类目","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{model:{value:t.tickForm3[e.$index].tCategory,callback:function(a){t.$set(t.tickForm3[e.$index],"tCategory",a)},expression:"tickForm3[scope.$index].tCategory"}},t._l(t.baseCategory,function(t,e){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交通类目","min-width":"120",prop:"rules[scope.$index].tTraffic"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{on:{change:function(a){t.clearSFstation(t.tickForm3[e.$index].Index)}},model:{value:t.tickForm3[e.$index].tTraffic,callback:function(a){t.$set(t.tickForm3[e.$index],"tTraffic",a)},expression:"tickForm3[scope.$index].tTraffic"}},[a("el-option",{key:0,attrs:{label:"飞机",value:"0"}}),t._v(" "),a("el-option",{key:1,attrs:{label:"火车",value:"1"}}),t._v(" "),a("el-option",{key:2,attrs:{label:"汽车",value:"2"}}),t._v(" "),a("el-option",{key:3,attrs:{label:"邮轮",value:"3"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"rules[scope.$index].tMarketPrice",label:"门市价","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticClass:"inputGeneral",attrs:{min:0},model:{value:t.tickForm3[e.$index].tMarketPrice,callback:function(a){t.$set(t.tickForm3[e.$index],"tMarketPrice",a)},expression:"tickForm3[scope.$index].tMarketPrice"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"fareType",label:"投放市场","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"tfcity relative"},[a("div",{staticClass:"el-input",attrs:{title:t.tickForm3[e.$index].tfCityShow}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tickForm3[e.$index].tfCityShow,expression:"tickForm3[scope.$index].tfCityShow"}],staticClass:"el-input__inner",attrs:{autocomplete:"off",placeholder:"请选择投放城市",type:"text"},domProps:{value:t.tickForm3[e.$index].tfCityShow},on:{click:function(a){t.showtfCity(t.tickForm3[e.$index].Index)},input:function(a){a.target.composing||t.$set(t.tickForm3[e.$index],"tfCityShow",a.target.value)}}})])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"始发站","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"tfcity relative"},[a("div",{staticClass:"el-input",attrs:{title:t.tickForm3[e.$index].sfStationShow}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tickForm3[e.$index].sfStationShow,expression:"tickForm3[scope.$index].sfStationShow"}],staticClass:"el-input__inner",attrs:{autocomplete:"off",placeholder:"请选择始发站",type:"text"},domProps:{value:t.tickForm3[e.$index].sfStationShow},on:{click:function(a){t.showStation(t.tickForm3[e.$index].Index)},input:function(a){a.target.composing||t.$set(t.tickForm3[e.$index],"sfStationShow",a.target.value)}}})])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"补房差","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticClass:"inputGeneral",attrs:{min:0},model:{value:t.tickForm3[e.$index].tPriceAdd,callback:function(a){t.$set(t.tickForm3[e.$index],"tPriceAdd",a)},expression:"tickForm3[scope.$index].tPriceAdd"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"退房差","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticClass:"inputGeneral",attrs:{min:0},model:{value:t.tickForm3[e.$index].tPriceReduce,callback:function(a){t.$set(t.tickForm3[e.$index],"tPriceReduce",a)},expression:"tickForm3[scope.$index].tPriceReduce"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"限制类型","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{on:{change:function(a){t.getLimits(e.$index)}},model:{value:t.tickForm3[e.$index].tLimitType,callback:function(a){t.$set(t.tickForm3[e.$index],"tLimitType",a)},expression:"tickForm3[scope.$index].tLimitType"}},[a("el-option",{key:0,attrs:{label:"无限制",value:"0"}}),t._v(" "),a("el-option",{key:1,attrs:{label:"实名制",value:"1"}}),t._v(" "),a("el-option",{key:2,attrs:{label:"限制性别",value:"2"}}),t._v(" "),a("el-option",{key:3,attrs:{label:"限制年龄",value:"3"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"限制条件","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[3!=t.tickForm3[e.$index].tLimitType?a("el-select",{attrs:{disabled:0==t.tickForm3[e.$index].tLimitType||1==t.tickForm3[e.$index].tLimitType},model:{value:t.tickForm3[e.$index].tLimitCondition,callback:function(a){t.$set(t.tickForm3[e.$index],"tLimitCondition",a)},expression:"tickForm3[scope.$index].tLimitCondition"}},[2==t.tickForm3[e.$index].tLimitType?a("el-option",{key:0,attrs:{label:"男",value:"0"}}):t._e(),t._v(" "),2==t.tickForm3[e.$index].tLimitType?a("el-option",{key:1,attrs:{label:"女",value:"1"}}):t._e()],1):t._e(),t._v(" "),3==t.tickForm3[e.$index].tLimitType?a("el-input",{staticClass:"age_input",attrs:{placeholder:"请输入限制年龄",disabled:3!=t.tickForm3[e.$index].tLimitType},model:{value:t.tickForm3[e.$index].tLimitCondition,callback:function(a){t.$set(t.tickForm3[e.$index],"tLimitCondition",a)},expression:"tickForm3[scope.$index].tLimitCondition"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"库存量","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{placeholder:"请输入内容",min:-1},model:{value:t.tickForm3[e.$index].tStock,callback:function(a){t.$set(t.tickForm3[e.$index],"tStock",a)},expression:"tickForm3[scope.$index].tStock"}})]}}])})],1)],1)],1)])])])],1),t._v(" "),t.showcfCityFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"投放城市选择"},on:{closeAlert:t.closecfCity}},[a("div",{staticClass:"showtfcityaa"},[a("div",{staticClass:"showtfcityaa-scroll"},[a("div",{staticClass:"showtfcityaa-i"},t._l(t.proviceArr,function(e,i){return a("div",{staticClass:"showtfcityaaa"},[a("div",{staticClass:"showtfcityaaa-head plr10 clearfix"},[a("span",[t._v(t._s(i))]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 allSelect",attrs:{size:"small"}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 mr10 allCancel",attrs:{size:"small"}},[t._v("取消全选")])],1),t._v(" "),a("div",{staticClass:"showtfcityaaa-content plr10 clearfix"},t._l(e,function(e){return a("span",{class:{"showtfcityaaa-span":!0,active:-1!=t.activeCityArr.indexOf(e.name)},attrs:{dataId:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"hide"},[t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"taCountry"},[t._v(t._s(e.type))])}),t._v(" "),t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"taProvince"},[t._v(t._s(e.pName))])})],2)])}))])]),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.closecfCity}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.removeAll}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.selectAllAll}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.saveCC}},[t._v("保存")])],1)]):t._e(),t._v(" "),t.showStationFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"始发站选择"},on:{closeAlert:t.closecfCity}},[a("div",{staticClass:"showtfcityaa"},[a("el-select",{staticClass:"SFstation",attrs:{multiple:"",filterable:"",placeholder:"请选择始发站"},model:{value:t.selectStationArr,callback:function(e){t.selectStationArr=e},expression:"selectStationArr"}},t._l(t.stationArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.dName+"————"+t.dProvince+"-"+t.dCity+"-"+t.dArea,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.closecfCity}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.saveStation}},[t._v("确认选择")])],1)]):t._e()],1)},staticRenderFns:[]}},1309:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-wrap",attrs:{id:"app"}},[a("jdy-nav"),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"jdy-main fleft",attrs:{id:"jdyMain"}},[a("div",{staticClass:"jdy-main-scroll"},[a("jdy-header"),t._v(" "),a("transition",[a("router-view")],1)],1)])],1)},staticRenderFns:[]}},131:function(t,e){var a=[{state:!0,departureDate:"2017,7.2",stopTime:"2017,7.3",seatNumber:"",sold:"",regiments:"",effective:"",block:"",reserve:"",locking:"",limitingCondition:"",week:"",accordingly:"",operation:{edit:1,editSeat:1,del:1}}],i={number:"",startTime:"",week:"",car:"",carNumber:"",seatNumber:"",goTime:"",endTime:"",fictitious:"",right:"",peopleNumber:"",sStopType:"1",tableData:[{applicableSite:"",ticketName:"",rackRate:"",colleaguePrice:"",week:"",inventory:"",presetType:"",restrictionType:"",limitingCondition:""}]},s={number:"",startTime:"",car:"",carNumber:"",fictitious:"",seatNumber:"",daying:"",right:"",peopleNumber:"",endTime:"",tableData:[{state:"",applicableSite:"",ticketName:"",rackRate:"",colleaguePrice:"",week:"",inventory:"",presetType:"",restrictionType:"",limitingCondition:""}]},n={number:[{required:!0,message:"请输入班期编号",trigger:"blur"}],carNumber:[{required:!0,message:"请输入车俩数",trigger:"blur"}],seatNumber:[{required:!0,message:"请输入座位数",trigger:"blur"}],endTime:[{required:!0,message:"请输入停售时间",trigger:"change"}]},r={number:[{required:!0,message:"请输入班期编号",trigger:"blur"}],carNumber:[{required:!0,message:"请输入车俩数",trigger:"blur"}],seatNumber:[{required:!0,message:"请输入座位数",trigger:"blur"}],endTime:[{required:!0,message:"请输入停售时间",trigger:"change"}]};t.exports={tableData:a,banqiForm:i,banqiForm2:s,banqiRule:n,banqiRule2:r}},1310:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-resources fleft jdy-content"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"resources-tab"},[t._m(0),t._v(" "),a("div",[a("el-button",{staticClass:"btnInTab",attrs:{type:"default"},on:{click:t.firstSearch}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"btnInTab",attrs:{type:"default"}},[a("a",{staticStyle:{color:"#000000"},attrs:{href:t.downLoadHref,download:"出团计划管理"},on:{click:t.changeHref}},[t._v("\n                  导出取消名单\n              ")])])],1)])]),t._v(" "),a("div",{staticClass:"jdy-table jdy-table-padding"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.cancelList}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("span",{staticClass:"jl-noticeTitle"},[t._v("正常")]):t._e(),t._v(" "),1==e.row.status?a("span",{staticClass:"jl-noticeTitle"},[t._v("已取消")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aTitle",label:"票价类目"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.tCategory))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"areaList",label:"票种"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.tName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aEndTime",label:"游客姓名",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.touristName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"游客电话"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.touristTel))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"票价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("moneyTwoPoints")(e.row.tPrice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"订单号","min-width":"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.orderNo))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"支付时间","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.payTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"取消原因"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cancelReason))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},on:{click:function(a){t.goCancel(e.row.id)}}},[t._v("\n                    取消\n                ")]):t._e()]}}])})],1),t._v(" "),t.cancelFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",staticStyle:{width:"600px",height:"180px"},attrs:{title:"取消客人"},on:{closeAlert:t.closeAlert}},[a("el-form",{ref:"lineForm",staticStyle:{"margin-top":"20px"},attrs:{model:t.ruleform,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{label:"取消原因："}},[a("el-select",{model:{value:t.ruleform.cancelReason,callback:function(e){t.$set(t.ruleform,"cancelReason",e)},expression:"ruleform.cancelReason"}},[a("el-option",{key:1,attrs:{label:"客人退团",value:"客人退团"}}),t._v(" "),a("el-option",{key:2,attrs:{label:"取消团期",value:"取消团期"}}),t._v(" "),a("el-option",{key:3,attrs:{label:"超售",value:"超售"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",on:{click:t.closeAlert}},[t._v("关闭")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",on:{click:t.cancelUser}},[t._v("确定")])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-button",{staticClass:"fright mt10",on:{click:t.goCancelList}},[t._v("取消客人")])],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"inlineblock mr10 "})])}]}},1312:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-resources fleft"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"resources-tab"},[a("span",{staticClass:"title"},[t._v("预算成本明细")]),t._v(" "),a("div",{staticClass:"fright"},[a("span",[t._v("成本保底增加比例：")]),t._v(" "),a("el-input",{staticStyle:{width:"100px"},model:{value:t.productCostingTitle2.percentage,callback:function(e){t.$set(t.productCostingTitle2,"percentage",t._n(e))},expression:"productCostingTitle2.percentage"}},[a("template",{slot:"append"},[t._v("%")])],2)],1)]),t._v(" "),a("div",{staticClass:"jdy-table jdy-table-padding"},[a("table",{staticClass:"table-custom",attrs:{cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",[a("th",{staticStyle:{width:"120px"}},[t._v("产品名称")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v("\n                                "+t._s(t.productCostingTitle.productName)+"\n                            ")])]),t._v(" "),t._m(0),t._v(" "),a("tr",[a("th",[t._v("核算人数")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入人数"},model:{value:t.productCostingTitle.peopleNum,callback:function(e){t.$set(t.productCostingTitle,"peopleNum",e)},expression:"productCostingTitle.peopleNum"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.peopleNum))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入说明"},model:{value:t.productCostingTitle.peopleNumExplain,callback:function(e){t.$set(t.productCostingTitle,"peopleNumExplain",e)},expression:"productCostingTitle.peopleNumExplain"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.peopleNumExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("领队/全陪是否免")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly?t._e():a("el-radio",{staticClass:"radio",attrs:{label:1},model:{value:t.productCostingTitle.isExempt,callback:function(e){t.$set(t.productCostingTitle,"isExempt",e)},expression:"productCostingTitle.isExempt"}},[t._v("是")]),t._v(" "),t.readOnly?t._e():a("el-radio",{staticClass:"radio",attrs:{label:0},model:{value:t.productCostingTitle.isExempt,callback:function(e){t.$set(t.productCostingTitle,"isExempt",e)},expression:"productCostingTitle.isExempt"}},[t._v("否")]),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.isExempt?"是":"否"))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入说明"},model:{value:t.productCostingTitle.isExemptExplain,callback:function(e){t.$set(t.productCostingTitle,"isExemptExplain",e)},expression:"productCostingTitle.isExemptExplain"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.isExemptExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("价格适用期")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[a("el-date-picker",{attrs:{size:"small",disabled:t.readOnly,type:"daterange",placeholder:"选择日期范围"},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1),t._v(" "),a("td")])]),t._v(" "),t._l(t.tableData,function(e,i){return a("tbody",{key:i},[a("tr",{on:{click:function(e){t.getIndex(i)}}},[a("th"),t._v(" "),a("th",{staticClass:"sec"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("数量")]),t._v(" "),a("th",{staticClass:"sec th2"},[t._v("单位（人/团）")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("单价")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("小计")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("备注说明")])]),t._v(" "),a("tr",[50!=e.categoryId?a("th",{attrs:{rowspan:e.listSize+3}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e(),t._v(" "),50==e.categoryId?a("th",{attrs:{rowspan:e.listSize+2}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e()]),t._v(" "),t._l(e.productCostingCategoryDetailList,function(e,s){return a("tr",{key:s},[a("td",[t.readOnly?t._e():a("el-input",{model:{value:e.content,callback:function(a){t.$set(e,"content","string"==typeof a?a.trim():a)},expression:"tdata.content"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.content))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{on:{change:function(e){t.getTotalCell(i)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",t._n(a))},expression:"tdata.amount"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.amount))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-select",{model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"tdata.unit"}},[a("el-option",{key:1,attrs:{label:"人",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"团",value:2}})],1),t._v(" "),t.readOnly?a("span",[t._v(t._s(null!=e.unit?1==e.unit?"人":"团":""))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{on:{change:function(e){t.getTotalCell(i)}},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"tdata.unitPrice"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.unitPrice))]):t._e()],1),t._v(" "),a("td",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.amount*e.unitPrice,1))+"\n                            ")]),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{model:{value:e.remark,callback:function(a){t.$set(e,"remark","string"==typeof a?a.trim():a)},expression:"tdata.remark"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.remark))]):t._e()],1)])}),t._v(" "),50!=e.categoryId?a("tr",[e.categoryId>=50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i+1)+"\n                            ")]):t._e(),t._v(" "),e.categoryId<50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i)+"\n                            ")]):t._e(),t._v(" "),a("td",{staticClass:"sec",attrs:{colspan:"3"}}),t._v(" "),a("td",{staticClass:"sec"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.subtotal,1))+"\n                            ")]),t._v(" "),a("td")]):t._e(),t._v(" "),50==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                接待部分合计（1-6项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum1_6,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                活动部分费用合计（7-9项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum7_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                以上费用小计（1-9项）\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum1_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e()],2)}),t._v(" "),a("tfoot",[a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                成本单价（人/团）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.costSingle,1))+"\n                            ")]),t._v(" "),a("th")]),t._v(" "),a("tr",[a("th",{attrs:{colspan:"2"}},[t._v("\n                                团费总计\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.allTotal,1))+"\n                            ")]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v("\n                                保底后总计\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.percentAllTotal,1))+"\n                            ")]),t._v(" "),a("th")])])],2)])]),t._v(" "),a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"resources-tab"},[a("span",{staticClass:"title"},[t._v("实际支出成本明细")]),t._v(" "),a("div",{staticClass:"fright"},[a("el-button",{staticClass:"ml10",attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"primary"}},[a("a",{staticStyle:{color:"#fff"},attrs:{href:t.downLoadHref,download:"导出成本核算表"},on:{click:t.changeHref}},[t._v("\n                            导出成本核算表\n                        ")]),t._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:t.changeHref}},[t._v("导出成本核算表")])]),t._v(" "),a("el-button",{on:{click:t.goback}},[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"jdy-table jdy-table-padding"},[a("table",{staticClass:"table-custom",attrs:{cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",[a("th",[t._v("产品名称")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v("\n                                "+t._s(t.productCostingTitle2.productName)+"\n                            ")])]),t._v(" "),t._m(1),t._v(" "),a("tr",[a("th",[t._v("核算人数")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly2?t._e():a("el-input",{attrs:{size:"small",placeholder:"输入人数"},model:{value:t.productCostingTitle2.peopleNum,callback:function(e){t.$set(t.productCostingTitle2,"peopleNum",e)},expression:"productCostingTitle2.peopleNum"}}),t._v(" "),t.readOnly2?a("span",[t._v(t._s(t.productCostingTitle2.peopleNum))]):t._e()],1),t._v(" "),a("td",[t.readOnly2?t._e():a("el-input",{attrs:{size:"small",placeholder:"输入说明"},model:{value:t.productCostingTitle2.peopleNumExplain,callback:function(e){t.$set(t.productCostingTitle2,"peopleNumExplain",e)},expression:"productCostingTitle2.peopleNumExplain"}}),t._v(" "),t.readOnly2?a("span",[t._v(t._s(t.productCostingTitle2.peopleNumExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("领队/全陪是否免")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly2?t._e():a("el-radio",{staticClass:"radio",attrs:{size:"small",label:1},model:{value:t.productCostingTitle2.isExempt,callback:function(e){t.$set(t.productCostingTitle2,"isExempt",e)},expression:"productCostingTitle2.isExempt"}},[t._v("是")]),t._v(" "),t.readOnly2?t._e():a("el-radio",{staticClass:"radio",attrs:{size:"small",label:0},model:{value:t.productCostingTitle2.isExempt,callback:function(e){t.$set(t.productCostingTitle2,"isExempt",e)},expression:"productCostingTitle2.isExempt"}},[t._v("否")]),t._v(" "),t.readOnly2?a("span",[t._v(t._s(t.productCostingTitle2.isExempt?"是":"否"))]):t._e()],1),t._v(" "),a("td",[t.readOnly2?t._e():a("el-input",{attrs:{size:"small",placeholder:"输入说明"},model:{value:t.productCostingTitle2.isExemptExplain,callback:function(e){t.$set(t.productCostingTitle2,"isExemptExplain",e)},expression:"productCostingTitle2.isExemptExplain"}}),t._v(" "),t.readOnly2?a("span",[t._v(t._s(t.productCostingTitle2.isExemptExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("价格适用期")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[a("el-date-picker",{attrs:{size:"small",disabled:t.readOnly2,type:"daterange",placeholder:"选择日期范围"},on:{change:t.dateRangeChange},model:{value:t.datePicker2,callback:function(e){t.datePicker2=e},expression:"datePicker2"}})],1),t._v(" "),a("td")])]),t._v(" "),t._l(t.tableData2,function(e,i){return a("tbody",{key:i},[a("tr",[a("th",{on:{click:function(e){t.getIndex(i)}}},[a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:t.inputdesc}},[t._v("-")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.inputadd}},[t._v("+")])],1)],1),t._v(" "),a("th",{staticClass:"sec"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("数量")]),t._v(" "),a("th",{staticClass:"sec th2"},[t._v("单位（人/团）")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("单价")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("小计")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("备注说明")])]),t._v(" "),a("tr",[50!=e.categoryId?a("th",{attrs:{rowspan:e.listSize+3}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e(),t._v(" "),50==e.categoryId?a("th",{attrs:{rowspan:e.listSize+2}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e()]),t._v(" "),t._l(e.productCostingCategoryDetailList,function(e,s){return a("tr",{key:s},[a("td",[t.readOnly2?t._e():a("el-input",{attrs:{size:"small"},model:{value:e.content,callback:function(a){t.$set(e,"content","string"==typeof a?a.trim():a)},expression:"tdata.content"}}),t._v(" "),t.readOnly2?a("span",[t._v(t._s(e.content))]):t._e()],1),t._v(" "),a("td",[t.readOnly2?t._e():a("el-input",{attrs:{size:"small"},on:{change:function(e){t.getTotalCell(i)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",t._n(a))},expression:"tdata.amount"}}),t._v(" "),t.readOnly2?a("span",[t._v(t._s(e.amount))]):t._e()],1),t._v(" "),a("td",[t.readOnly2?t._e():a("el-select",{attrs:{size:"small"},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"tdata.unit"}},[a("el-option",{key:1,attrs:{label:"人",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"团",value:2}})],1),t._v(" "),t.readOnly2?a("span",[t._v(t._s(null!=e.unit?1==e.unit?"人":"团":""))]):t._e()],1),t._v(" "),a("td",[t.readOnly2?t._e():a("el-input",{attrs:{size:"small"},on:{change:function(e){t.getTotalCell(i)}},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"tdata.unitPrice"}}),t._v(" "),t.readOnly2?a("span",[t._v(t._s(e.unitPrice))]):t._e()],1),t._v(" "),a("td",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.amount*e.unitPrice,1))+"\n                            ")]),t._v(" "),a("td",[t.readOnly2?t._e():a("el-input",{attrs:{size:"small"},model:{value:e.remark,callback:function(a){t.$set(e,"remark","string"==typeof a?a.trim():a)},expression:"tdata.remark"}}),t._v(" "),t.readOnly2?a("span",[t._v(t._s(e.remark))]):t._e()],1)])}),t._v(" "),50!=e.categoryId?a("tr",[e.categoryId>=50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i+1)+"\n                            ")]):t._e(),t._v(" "),e.categoryId<50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i)+"\n                            ")]):t._e(),t._v(" "),a("td",{staticClass:"sec",attrs:{colspan:"3"}}),t._v(" "),a("td",{staticClass:"sec"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.subtotal,1))+"\n                            ")]),t._v(" "),a("td")]):t._e(),t._v(" "),50==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                接待部分合计（1-6项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total2.sum1_6,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                活动部分费用合计（7-9项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total2.sum7_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                以上费用小计（1-9项）\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total2.sum1_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e()],2)}),t._v(" "),a("tfoot",[a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                成本单价（人/团）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total2.costSingle,1))+"\n                            ")]),t._v(" "),a("th")]),t._v(" "),a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                团费总计\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total2.allTotal,1))+"\n                            ")]),t._v(" "),a("th")])])],2)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"sec th1"},[t._v("费用类别")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec",attrs:{colspan:"4"}},[t._v("价格明细（RMB）")]),t._v(" "),a("th",{staticClass:"sec th4"},[t._v("报价说明")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"sec th1"},[t._v("费用类别")]),t._v(" "),a("th",{staticClass:"sec th2"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec",attrs:{colspan:"4"}},[t._v("价格明细（RMB）")]),t._v(" "),a("th",{staticClass:"sec th4"},[t._v("报价说明")])])}]}},1314:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jl-sale"},[a("div",{staticClass:"jdy-content fleft lv-creditBill"},[a("div",{staticClass:"jdy-content-inner"},[a("div",[a("el-button",{staticClass:"fright mt10"},[a("a",{staticStyle:{color:"#000000"},attrs:{href:t.downLoadHref,download:"出团通知书"},on:{click:t.changeHref}},[t._v("\n            导出word\n          ")])]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showPrint,expression:"showPrint"}],staticClass:"fright mt10 mr10",on:{click:t.printFn}},[t._v("打印")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showSave,expression:"showSave"}],staticClass:"fright mt10 mr10",attrs:{disabled:this.btnFlag},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showBianji,expression:"showBianji"}],staticClass:"fright mt10",on:{click:t.editPrint}},[t._v("编辑")]),t._v(" "),a("el-button",{staticClass:"fright mt10"},[a("router-link",{attrs:{to:{name:"groupManage"}}},[a("span",{staticStyle:{color:"#000000"}},[t._v("返回")])])],1)],1),t._v(" "),a("div",{attrs:{id:"ptintHtml"}},[a("div",{staticClass:"page-header"},[a("div",[a("h1",[t._v("出团通知书")]),t._v(" "),a("h3",[t._v("团号："+t._s(t.fromData.groupNo))])]),t._v(" "),a("div",[a("image",{attrs:{src:""}})])]),t._v(" "),a("div",{staticClass:"table-wrap"},[a("el-row",[1==this.showEdit?a("el-form",{ref:"form",attrs:{"label-width":"140px",model:t.fromData}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"线路名称："}},[a("el-input",{attrs:{disabled:!0},model:{value:t.fromData.productName,callback:function(e){t.$set(t.fromData,"productName",e)},expression:"fromData.productName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组团社名称："}},[a("el-input",{model:{value:t.fromData.companyName,callback:function(e){t.$set(t.fromData,"companyName",e)},expression:"fromData.companyName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"游客人数：",prop:"uAccount"}},[t._v("\n                          "+t._s(t.fromData.adultTouristsNum)+"大"+t._s(t.fromData.childTouristsNum)+"小\n                          ")]),t._v(" "),a("el-form-item",{attrs:{label:"接团旗号：",prop:"uAccount"}},[a("el-input",{model:{value:t.fromData.banner,callback:function(e){t.$set(t.fromData,"banner",e)},expression:"fromData.banner"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"组团社紧急联系人：",prop:"uAccount"}},[a("el-input",{model:{value:t.fromData.emergencyContact,callback:function(e){t.$set(t.fromData,"emergencyContact",e)},expression:"fromData.emergencyContact"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"集合时间：",prop:"uAccount"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},on:{change:t.changeMusterTime},model:{value:t.fromData.musterTime,callback:function(e){t.$set(t.fromData,"musterTime",e)},expression:"fromData.musterTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"组团社联系人："}},[a("el-input",{model:{value:t.fromData.userName,callback:function(e){t.$set(t.fromData,"userName",e)},expression:"fromData.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"组团社手机：",prop:"uAccount"}},[a("el-input",{model:{value:t.fromData.userPhone,callback:function(e){t.$set(t.fromData,"userPhone",e)},expression:"fromData.userPhone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地接导游及电话：",prop:"uAccount"}},[a("el-input",{model:{value:t.fromData.touristGuide,callback:function(e){t.$set(t.fromData,"touristGuide",e)},expression:"fromData.touristGuide"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系方式：",prop:"uAccount"}},[a("el-input",{model:{value:t.fromData.emergencyCall,callback:function(e){t.$set(t.fromData,"emergencyCall",e)},expression:"fromData.emergencyCall"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"集合地点：",prop:"uAccount"}},[a("el-input",{model:{value:t.fromData.musterPlace,callback:function(e){t.$set(t.fromData,"musterPlace",e)},expression:"fromData.musterPlace"}})],1)],1)],1):t._e()],1),t._v(" "),0==this.showEdit?a("table",{staticClass:"table-custom",attrs:{cellspacing:"0",cellpadding:"0"}},[a("tr",[a("th",[t._v("线路名称")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.fromData.productName)),4==t.fromData.departureStatus?a("p",{staticStyle:{"font-size":"20px",color:"red",float:"right",border:"2px solid red",padding:"2px"}},[t._v("已取消")]):t._e()])]),t._v(" "),a("tr",[a("th",[t._v("组团社名称")]),t._v(" "),a("td",[t._v(t._s(t.fromData.companyName))]),t._v(" "),a("th",[t._v("组团联系人")]),t._v(" "),a("td",[t._v(t._s(t.fromData.userName))])]),t._v(" "),a("tr",[a("th",[t._v("游客人数")]),t._v(" "),a("td",[t._v(t._s(t.fromData.adultTouristsNum)+"大"+t._s(t.fromData.childTouristsNum)+"小")]),t._v(" "),a("th",[t._v("组团社手机")]),t._v(" "),a("td",[t._v(t._s(t.fromData.userPhone))])]),t._v(" "),a("tr",[a("th",[t._v("接团旗号")]),t._v(" "),a("td",[t._v(t._s(t.fromData.banner))]),t._v(" "),a("th",[t._v("地接导游及电话")]),t._v(" "),a("td",[t._v(t._s(t.fromData.touristGuide))])]),t._v(" "),a("tr",[a("th",[t._v("组团社紧急联系人")]),t._v(" "),a("td",[t._v(t._s(t.fromData.emergencyContact))]),t._v(" "),a("th",[t._v("联系方式")]),t._v(" "),a("td",[t._v(t._s(t.fromData.emergencyCall))])]),t._v(" "),a("tr",[a("th",[t._v("集合时间")]),t._v(" "),a("td",[t._v(t._s(t.fromData.musterTime))]),t._v(" "),a("th",[t._v("集合地点")]),t._v(" "),a("td",[t._v(t._s(t.fromData.musterPlace))])]),t._v(" "),4==t.fromData.departureStatus?a("tr",[a("th",[t._v("取消时间")]),t._v(" "),a("td",[t._v(t._s(t._f("dateFormatTwo")(t.fromData.cancelTime)))]),t._v(" "),a("th",[t._v("取消人员")]),t._v(" "),a("td",[t._v(t._s(t.fromData.cancelUserName))])]):t._e(),t._v(" "),4==t.fromData.departureStatus?a("tr",[a("th",[t._v("取消原因")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.fromData.cancelComment))])]):t._e()]):t._e()],1),t._v(" "),a("div",{staticClass:"page-header"},[a("h3",{staticStyle:{display:"inline-block"}},[t._v("航班信息")]),t._v(" "),1==t.showAddFlight?a("el-button",{staticClass:"fright mt10",on:{click:t.addFlight}},[t._v("添加交通信息")]):t._e()],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:1==this.showEdit,expression:"this.showEdit == true"}],ref:"multipleTable",staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:t.planeData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"交通类目","min-width":"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{model:{value:t.planeData[e.$index].lineType,callback:function(a){t.$set(t.planeData[e.$index],"lineType",a)},expression:"planeData[scope.$index].lineType"}},[a("el-option",{key:0,attrs:{label:"出团",value:0}}),t._v(" "),a("el-option",{key:2,attrs:{label:"回团",value:2}}),t._v(" "),a("el-option",{key:1,attrs:{label:"中转",value:1}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交通方式","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{model:{value:t.planeData[e.$index].flightType,callback:function(a){t.$set(t.planeData[e.$index],"flightType",a)},expression:"planeData[scope.$index].flightType"}},[a("el-option",{key:1,attrs:{label:"飞机",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"火车",value:2}}),t._v(" "),a("el-option",{key:3,attrs:{label:"邮轮",value:3}}),t._v(" "),a("el-option",{key:4,attrs:{label:"汽车",value:4}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"第几天","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:t.planeData[e.$index].sortDay,callback:function(a){t.$set(t.planeData[e.$index],"sortDay",a)},expression:"planeData[scope.$index].sortDay"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交通信息","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:t.planeData[e.$index].flightNum,callback:function(a){t.$set(t.planeData[e.$index],"flightNum",a)},expression:"planeData[scope.$index].flightNum"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发地","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:t.planeData[e.$index].departurePlace,callback:function(a){t.$set(t.planeData[e.$index],"departurePlace",a)},expression:"planeData[scope.$index].departurePlace"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"目的地","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticClass:"inputGeneral",model:{value:t.planeData[e.$index].destination,callback:function(a){t.$set(t.planeData[e.$index],"destination",a)},expression:"planeData[scope.$index].destination"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发时间","min-width":"175"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.planeData[e.$index].flightTime,callback:function(a){t.$set(t.planeData[e.$index],"flightTime",a)},expression:"planeData[scope.$index].flightTime"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"抵达时间","min-width":"175"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},on:{change:t.changeDate},model:{value:t.planeData[e.$index].arrivalTime,callback:function(a){t.$set(t.planeData[e.$index],"arrivalTime",a)},expression:"planeData[scope.$index].arrivalTime"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.lineType?a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},on:{click:function(a){t.goCancel([e.$index])}}},[t._v("\n                        删除\n                    ")]):t._e()]}}])})],1),t._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:0==this.showEdit,expression:"this.showEdit == false"}],ref:"multipleTable",staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:t.planeData,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"交通类目","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(t._f("lineTypeFilter")(e.row.lineType)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交通方式","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(t._f("flightTypeFilter")(e.row.flightType)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"第几天","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.sortDay))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交通信息","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.flightNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发地","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.departurePlace))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"目的地","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.destination))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发时间","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.flightTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"抵达时间","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.arrivalTime))])]}}])})],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"table-wrap table2"},[t.tableData.trips?a("table",{staticClass:"table-custom",attrs:{cellspacing:"0",cellpadding:"0"}},[t._l(t.tableData.trips,function(e){return[a("tr",[a("th",{staticClass:"blue-font"},[a("strong",[t._v(t._s(e.tripsDay)+" "+t._s(e.tFromTo))])])]),t._v(" "),a("tr",[a("td",[a("p",{domProps:{innerHTML:t._s(e.tDetailTrip)}})])]),t._v(" "),a("tr",[a("td",{staticClass:"div2"},[a("div",{staticClass:"borderR"},[a("strong",[t._v("用餐：")]),t._v(" "+t._s(e.mealsInfo)+"  "),a("strong",{staticClass:"ml20"},[t._v("[用餐备注]")]),t._v(t._s(e.tMealsRemark))]),t._v(" "),a("div",[a("strong",[t._v("住宿：")]),t._v(" "+t._s(e.hotelNames)+" "),a("strong",{staticClass:"ml20"},[t._v("[住宿备注]")]),t._v(t._s(e.tHotelRemark))])])])]}),t._v(" "),t._m(1),t._v(" "),a("tr",[a("td",[a("p",{staticClass:"jl-pCostInclude",domProps:{innerHTML:t._s(t.tableData.pSpecial)}}),t._v(" "),t.tableData.pSpecial?t._e():a("p",{staticClass:"jl-pCostInclude"},[t._v("无")])])]),t._v(" "),t._m(2),t._v(" "),a("tr",[a("td",[a("p",{staticClass:"jl-pCostInclude",domProps:{innerHTML:t._s(t.tableData.pNotes)}}),t._v(" "),t.tableData.pNotes?t._e():a("p",{staticClass:"jl-pCostInclude"},[t._v("无")])])]),t._v(" "),t._m(3),t._v(" "),a("tr",[a("td",[t._m(4),t._v(" "),a("p",{staticClass:"jl-pCostInclude",domProps:{innerHTML:t._s(t.tableData.pCostInclude)}}),t._v(" "),t.tableData.pCostInclude?t._e():a("p",{staticClass:"jl-pCostInclude"},[t._v("无")]),t._v(" "),t._m(5),t._v(" "),a("p",{staticClass:"jl-pCostExclude",domProps:{innerHTML:t._s(t.tableData.pCostExclude)}}),t._v(" "),t.tableData.pCostExclude?t._e():a("p",{staticClass:"jl-pCostInclude"},[t._v("无")])])]),t._v(" "),t._m(6),t._v(" "),t._m(7)],2):t._e()])],1)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header"},[a("h3",[t._v("线路行程")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("线路特色")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("预订须知")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("费用说明")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("【费用包含】")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("strong",[t._v("【费用不含】")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("温馨提醒")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("p",[t._v("1.游客报名时，请务必提供准确姓名及身份证号码，以免产生不必要的经济损失。机票因享受团队折扣，一经确认出票，不予签改。火车票确认后就会立即出票，如取消行程或更换他人，会产生损失费，请自行承担。")]),t._v(" "),a("p",[t._v("2.70周岁以上老年人预定出游，须出示健康证明并有年轻的家属或朋友陪同出游。")]),t._v(" "),a("p",[t._v("3.出行期间，请随身携带本人有效身份证原件（出行前请务必检查自己证件的有效期），未满16周岁者请携带户口本原件。超过16周岁的游客若没有办理身份证，请在户籍所在地派出所开具相关身份证明，以免影响登机。")])])])}]}},1321:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer jl-addTrip fleft jl-trip"},[a("div",{staticClass:"jdy-content-inner"},[a("div",{staticClass:"jdy-tab"},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("list")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix border relative mt30"},[a("div",{staticClass:"tripbox-tab"},[t._m(0),t._v(" "),a("router-link",{staticClass:"relative inlineblock fleft",attrs:{title:"",to:{name:"Supplement",query:this.$route.query}}},[t._v("\n          行程信息\n          "),a("span",{staticClass:"absolute inlineblock"})])],1),t._v(" "),a("div",{staticClass:"h20 mt10"}),t._v(" "),a("el-form",{ref:"lineForm",attrs:{model:t.lineForm,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[a("el-row",[a("el-form-item",{attrs:{label:"产品编号:"}},[a("el-input",{attrs:{placeholder:"请填写字母、数字",disabled:!0},model:{value:t.lineForm.pNo,callback:function(e){t.$set(t.lineForm,"pNo",e)},expression:"lineForm.pNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品名称:"}},[a("el-input",{attrs:{placeholder:"产品名称",disabled:!0},model:{value:t.lineForm.pName,callback:function(e){t.$set(t.lineForm,"pName",e)},expression:"lineForm.pName"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品简称:"}},[a("el-input",{attrs:{placeholder:"产品简称",disabled:!0},model:{value:t.lineForm.pShortName,callback:function(e){t.$set(t.lineForm,"pShortName",e)},expression:"lineForm.pShortName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属品牌:",placeholder:"请选择所属品牌"}},[a("el-select",{staticClass:"all",attrs:{disabled:!0},model:{value:t.lineForm.pBrand,callback:function(e){t.$set(t.lineForm,"pBrand",e)},expression:"lineForm.pBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.bName,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品类型:",placeholder:"请选择产品类型"}},[a("el-select",{staticClass:"all",attrs:{disabled:!0},on:{change:t.productTypeChange},model:{value:t.lineForm.pType,callback:function(e){t.$set(t.lineForm,"pType",e)},expression:"lineForm.pType"}},t._l(t.productType,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人:"}},[a("el-select",{staticClass:"all",attrs:{disabled:!0},model:{value:t.lineForm.pContacts,callback:function(e){t.$set(t.lineForm,"pContacts",e)},expression:"lineForm.pContacts"}},t._l(t.peopleList,function(t){return a("el-option",{key:t.puserId,attrs:{label:t.uRealName,value:t.userId}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品排序:"}},[a("el-input",{attrs:{type:"number",placeholder:"产品排序",disabled:!0},model:{value:t.lineForm.pSort,callback:function(e){t.$set(t.lineForm,"pSort",e)},expression:"lineForm.pSort"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系方式:"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{data:"pQq",placeholder:"qq",disabled:!0},model:{value:t.lineForm.pQq,callback:function(e){t.$set(t.lineForm,"pQq",e)},expression:"lineForm.pQq"}})],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"tel",disabled:!0},model:{value:t.lineForm.pPhone,callback:function(e){t.$set(t.lineForm,"pPhone",e)},expression:"lineForm.pPhone"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"cover"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",action:t.action,data:t.fileType,"show-file-list":!1,disabled:!0}},[t.lineForm.cover?a("img",{attrs:{src:t.lineForm.cover}}):a("div",[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将封面拖到此处，或\n                    "),a("em",[t._v("点击上传")])])]),t._v(" "),a("div",{staticClass:"el-upload__tip tc",attrs:{slot:"tip"},slot:"tip"},[t._v("建议尺寸:最小(550*350)，一般(715*455)，大小:不超过(5M)")])])],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"线路特色:"}},[a("jdy-editor",{attrs:{content:t.lineForm.pSpecial,attr:"pSpecial"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"费用包含:"}},[a("jdy-editor",{attrs:{content:t.lineForm.pCostInclude,attr:"pCostInclude"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"费用不包含:"}},[a("jdy-editor",{attrs:{content:t.lineForm.pCostExclude,attr:"pCostExclude"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"预定须知:"}},[a("jdy-editor",{attrs:{content:t.lineForm.pNotes,attr:"pNotes"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),20==t.lineForm.pType?a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"签证信息:"}},[a("jdy-editor",{attrs:{content:t.lineForm.pVisa,attr:"pVisa"},on:{input:t.editorUpdate}})],1)],1):t._e()],1)],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"relative inlineblock fleft active",attrs:{title:""}},[t._v("线路信息\n          "),a("span",{staticClass:"absolute inlineblock"})])}]}},1323:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jl-information"},[a("div",{staticClass:"jdy-content jdy-transfer fleft jl-ad"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"jdy-tab"},[a("a",{class:{active:0==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(0)}}},[t._v("全部\n          "),a("span")]),t._v(" "),a("a",{class:{active:1==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(1)}}},[t._v("已预约\n          "),a("span")]),t._v(" "),a("a",{class:{active:2==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(2)}}},[t._v("已订购\n          "),a("span")]),t._v(" "),a("el-button",{staticClass:"mt10 btnbg fright",staticStyle:{"margin-right":"-10px"},attrs:{type:"default"},on:{click:function(e){t.goBack()}}},[t._v("返回")])],1),t._v(" "),a("div",{staticClass:"mt30"}),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"mt30",attrs:{model:t.ruleForm,inline:!0,"label-width":"80px"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:"选择时间范围"},on:{change:t.datetimerange},model:{value:t.ruleForm.dateRange,callback:function(e){t.$set(t.ruleForm,"dateRange",e)},expression:"ruleForm.dateRange"}})],1),t._v(" "),a("el-button",{staticClass:"el-button btnbg el-button--primary",attrs:{type:"primary"},on:{click:t.firstSearch}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("div",{staticClass:"tableTitle"},[t._v("\n              【"+t._s(t.pname)+t._s(t.time)),1==t.jdytabActive?a("span",[t._v("预约游客")]):t._e(),2==t.jdytabActive?a("span",[t._v("订购游客")]):t._e(),t._v("出团计划表】\n          ")]),t._v(" "),a("table",{staticClass:"table-custom",attrs:{width:"100%",cellpadding:"0",cellspacing:"0"}},[a("thead",[a("tr",[a("th",{attrs:{width:"10%"}},[t._v("日期")]),t._v(" "),0==t.jdytabActive?a("th",{attrs:{width:"10%"}},[t._v("预约/订购")]):t._e(),t._v(" "),t._l(t.tableData,function(e,i){return a("th",{key:i,attrs:{width:70/(t.tableData.length+1)}},[t._v(t._s(e.tName))])}),t._v(" "),a("th",{attrs:{width:"10%"}},[t._v("合计游客人数")])],2)]),t._v(" "),t._l(t.tableDataTwo,function(e,i){return a("tbody",{key:i},[2!=t.jdytabActive?a("tr",[a("td",{attrs:{width:"10%"}},[t._v(t._s(e.dateStr))]),t._v(" "),0==t.jdytabActive?a("td",{attrs:{width:"10%"}},[t._v("预约")]):t._e(),t._v(" "),t._l(t.tableData,function(i,s){return a("td",{key:s,attrs:{width:70/(t.tableData.length+1)}},[a("div",[a("router-link",{attrs:{to:{name:"saleDetail",query:{beginDate:t.ruleForm.beginDate,endDate:t.ruleForm.endDate,jdytabActive:1,name:i.tName,id:i.id,time:e.dateStr,productId:t.ruleForm.productId,pname:t.pname,dateRange:t.ruleForm.dateRange}}}},[e.reservePlan.ttmap[i.id]?a("span",{staticStyle:{color:"#20a0ff"}},[t._v(t._s(e.reservePlan.ttmap[i.id]))]):t._e()]),t._v(" "),e.reservePlan.ttmap[i.id]?t._e():a("span",{staticStyle:{color:"#20a0ff"}},[t._v("0")])],1)])}),t._v(" "),a("td",{attrs:{width:"10%"}},[a("div",[a("router-link",{attrs:{to:{name:"saleDetail",query:{beginDate:t.ruleForm.beginDate,endDate:t.ruleForm.endDate,jdytabActive:1,time:e.dateStr,productId:t.ruleForm.productId,pname:t.pname,dateRange:t.ruleForm.dateRange}}}},[e.reservePlan.singleTotal?a("span",{staticStyle:{color:"#20a0ff"}},[t._v(t._s(e.reservePlan.singleTotal))]):t._e()]),t._v(" "),e.reservePlan.singleTotal?t._e():a("span",{staticStyle:{color:"#20a0ff"}},[t._v("0")])],1)])],2):t._e(),t._v(" "),1!=t.jdytabActive?a("tr",[a("td",{attrs:{width:"10%"}},[t._v(t._s(e.dateStr))]),t._v(" "),0==t.jdytabActive?a("td",{attrs:{width:"10%"}},[t._v("订购")]):t._e(),t._v(" "),t._l(t.tableData,function(i,s){return a("td",{key:s,attrs:{width:70/(t.tableData.length+1)}},[a("div",[a("router-link",{attrs:{to:{name:"saleDetail",query:{beginDate:t.ruleForm.beginDate,endDate:t.ruleForm.endDate,jdytabActive:2,name:i.tName,id:i.id,time:e.dateStr,productId:t.ruleForm.productId,pname:t.pname,dateRange:t.ruleForm.dateRange}}}},[e.payPlan.ttmap[i.id]?a("span",{staticStyle:{color:"#20a0ff"}},[t._v(t._s(e.payPlan.ttmap[i.id]))]):t._e()]),t._v(" "),e.payPlan.ttmap[i.id]?t._e():a("span",{staticStyle:{color:"#20a0ff"}},[t._v("0")])],1)])}),t._v(" "),a("td",{attrs:{width:"10%"}},[a("div",[a("router-link",{attrs:{to:{name:"saleDetail",query:{beginDate:t.ruleForm.beginDate,endDate:t.ruleForm.endDate,jdytabActive:2,time:e.dateStr,productId:t.ruleForm.productId,pname:t.pname,dateRange:t.ruleForm.dateRange}}}},[e.payPlan.singleTotal?a("span",{staticStyle:{color:"#20a0ff"}},[t._v(t._s(e.payPlan.singleTotal))]):t._e()]),t._v(" "),e.payPlan.singleTotal?t._e():a("span",{staticStyle:{color:"#20a0ff"}},[t._v("0")])],1)])],2):t._e()])}),t._v(" "),a("tfoot",[a("tr",[0==t.jdytabActive?a("td",{attrs:{width:"10%"}}):t._e(),t._v(" "),a("td",{attrs:{width:"10%"}},[t._v("本页合计")]),t._v(" "),t._l(t.tableData,function(e,i){return a("td",{key:i,attrs:{width:70/(t.tableData.length+1)}},[0==t.jdytabActive?a("span",[t._v(t._s(t.tableDataThree.list[0].sumMap[e.id].all))]):t._e(),t._v(" "),1==t.jdytabActive?a("span",[t._v(t._s(t.tableDataThree.list[0].sumMap[e.id].reserve))]):t._e(),t._v(" "),2==t.jdytabActive?a("span",[t._v(t._s(t.tableDataThree.list[0].sumMap[e.id].payed))]):t._e()])}),t._v(" "),a("td",{attrs:{width:"10%"}},[0==t.jdytabActive?a("span",[t._v(t._s(t.tableDataThree.list[0].sumMap[0].pageTotalSum))]):t._e(),t._v(" "),1==t.jdytabActive?a("span",[t._v(t._s(t.tableDataThree.list[0].sumMap[0].pageReserveSum))]):t._e(),t._v(" "),2==t.jdytabActive?a("span",[t._v(t._s(t.tableDataThree.list[0].sumMap[0].pagePayedSum))]):t._e()])],2),t._v(" "),a("tr",[0==t.jdytabActive?a("td",{attrs:{width:"10%"}}):t._e(),t._v(" "),a("td",{attrs:{width:"10%"}},[t._v("合计")]),t._v(" "),t._l(t.tableData,function(e,i){return a("td",{key:i,attrs:{width:70/(t.tableData.length+1)}},[0==t.jdytabActive?a("span",[t._v(t._s(t.tableDataFour.list[0].sumMap[e.id].all))]):t._e(),t._v(" "),1==t.jdytabActive?a("span",[t._v(t._s(t.tableDataFour.list[0].sumMap[e.id].reserve))]):t._e(),t._v(" "),2==t.jdytabActive?a("span",[t._v(t._s(t.tableDataFour.list[0].sumMap[e.id].payed))]):t._e()])}),t._v(" "),a("td",{attrs:{width:"10%"}},[0==t.jdytabActive?a("span",[t._v(t._s(t.tableDataFour.list[0].sumMap[0].allTotalSum))]):t._e(),t._v(" "),1==t.jdytabActive?a("span",[t._v(t._s(t.tableDataFour.list[0].sumMap[0].allReserveSum))]):t._e(),t._v(" "),2==t.jdytabActive?a("span",[t._v(t._s(t.tableDataFour.list[0].sumMap[0].allPayedSum))]):t._e()])],2)])],2)]),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])])},staticRenderFns:[]}},1326:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jl-information"},[a("div",{staticClass:"jdy-content jdy-transfer fleft noborder jl-ad"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("el-form",{ref:"ruleForm",staticClass:"gz-itemMragin",attrs:{"label-width":"20px",inline:!0}},[a("el-row",[a("el-form-item",{attrs:{label:"快速搜索：",prop:"quickSearch","label-width":"84px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"广告名称、广告内容、其他内容、投放单位"},on:{change:t.getSearchValue},model:{value:t.adverContent,callback:function(e){t.adverContent=e},expression:"adverContent"}})],1),t._v(" "),a("el-button",{staticClass:"el-button btnbg el-button--primary",attrs:{type:"primary"},on:{click:t.firstSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"btnbg fr addBtn",attrs:{type:"primary"},on:{click:t.addInfoRouter}},[t._v("添加")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btnbg fr",attrs:{type:"default"},on:{click:t.refreshBtn}},[t._v("刷新")])],1)],1)],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"aPlace",label:"广告位置"}}),t._v(" "),a("el-table-column",{attrs:{prop:"aTitle",label:"广告名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.aTitle))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aSort",label:"排序",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"areaList",label:"投放单位"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.cName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStartTime",label:"开始日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("filterStartTime")(e.row.aStartTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aEndTime",label:"结束日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("filterStartTime")(e.row.aEndTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aStatus",label:"是否有效"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.aShow?a("span",[t._v("显示")]):a("span",[t._v("隐藏")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aOther",label:"其他内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.aOther))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aComment",label:"广告说明",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.aComment))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"default",size:"mini"}},[a("router-link",{attrs:{to:{name:"advertisingInfo",query:{id:e.row.id}}}},[t._v("编辑")])],1),t._v(" "),a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){t.deleteRow(e.row.id,t.tableData)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.sizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])])},staticRenderFns:[]}},1330:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("el-row",{staticClass:"jdy-content-inner"},[a("div",{staticClass:"jdy-search"},[a("span",{staticClass:"f14  mt20"},[t._v("类型：")]),t._v(" "),a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{clearable:"",placeholder:"选择类型"},on:{change:t.getTableData},model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("el-option",{key:"0",attrs:{label:"类型0",value:0}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"类型1",value:1}})],1),t._v(" "),a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{clearable:"",placeholder:"选择单位"},on:{change:t.getTableData},model:{value:t.search.company,callback:function(e){t.$set(t.search,"company",e)},expression:"search.company"}},[a("el-option",{key:"0",attrs:{label:"单位0",value:0}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"单位1",value:1}})],1),t._v(" "),a("div",{staticClass:"inlineblock mr10 w300 "},[a("el-input",{attrs:{placeholder:"产品名称、拼音码"},model:{value:t.search.selectProduct,callback:function(e){t.$set(t.search,"selectProduct",e)},expression:"search.selectProduct"}},[a("el-select",{staticClass:"w100 hasbg",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.search.selectProduct_select,callback:function(e){t.$set(t.search,"selectProduct_select",e)},expression:"search.selectProduct_select"}},[a("el-option",{attrs:{label:"品牌0：",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"品牌1：",value:"1"}})],1),t._v(" "),a("el-button",{staticClass:"btnbg",attrs:{slot:"append",icon:"search"},on:{click:t.getTableData},slot:"append"})],1)],1),t._v(" "),a("el-button",{staticClass:"btnbg",attrs:{type:"default"}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"btnbg",attrs:{type:"default",icon:"delete"}},[a("router-link",{staticClass:"inlineblock",attrs:{to:"/list"}},[t._v("返回")])],1)],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("el-table",{staticClass:"mt20 all",attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            【预览】"),t._v(t._s(e.row.pName)+"\n            "),a("el-tag",{attrs:{type:"primary"}},[t._v("特色游")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发布状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.pStatus)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品编号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.pNo)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"天数",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.pDays)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分享",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"green",attrs:{href:e.row.share}},[t._v("【分享分析】")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品副标题",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pShortName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"客服",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.pContacts)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否确认",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"on-color":"#71dc1c","on-text":"","off-text":""},model:{value:e.row.confirmState,callback:function(a){t.$set(e.row,"confirmState",a)},expression:"scope.row.confirmState"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"编辑时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.updateTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){t.effect(e.row.companyId,e.row.id,e.row.updateUser)}}},[t._v("\n              恢复\n            ")])]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)])],1)},staticRenderFns:[]}},1333:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.flag?a("div",{staticClass:"jdy-content jdy-transfer fleft noborder jl-trip"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:2}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"行程信息",icon:"upload"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("List")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mr10 mt10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmitGo()}}},[t._v("下一步")]),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("Line")}}},[t._v("上一步")]),t._v(" "),a("el-button",{staticClass:"fright mt10",attrs:{disabled:t.btnFlag},on:{click:function(e){t.onSubmit("ruleForm")}}},[t._v("保存")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mainbg"}),t._v(" "),a("div",{staticClass:"tripbox clearfix border relative"},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"150px"}},[a("div",{staticClass:"tripbox-top"},[a("el-col",{staticClass:"mt10",staticStyle:{"margin-left":"-30px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"行程天数:"}},[a("el-input-number",{staticClass:"all",attrs:{min:1},on:{change:t.setDays},model:{value:t.ruleForm.pDays,callback:function(e){t.$set(t.ruleForm,"pDays",e)},expression:"ruleForm.pDays"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"tripbox-left absolute"},[a("el-steps",{attrs:{direction:"vertical",active:1,space:785}},[t._l(t.ruleForm.pDays,function(e,i){return[a("el-step",{staticStyle:{height:"785px"}},[t._v(t._s(e))])]})],2)],1),t._v(" "),t._l(t.ruleForm.trips,function(e,i){return[a("div",{staticClass:"tripbox-right mt30",on:{click:function(e){t.getIndex(i)}}},[a("div",{staticClass:"hiddens"},[t._v(t._s(i))]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{staticClass:"onfocusInput",attrs:{label:"出发地/目的地：",prop:"address"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.tFromTo,expression:"tripsItem.tFromTo"}],staticClass:"el-input__inner",attrs:{type:"text",placeholder:"出发地/目的地",id:"focusInput"+i},domProps:{value:e.tFromTo},on:{input:function(a){a.target.composing||t.$set(e,"tFromTo",a.target.value)}}})])],1),t._v(" "),a("el-col",{staticClass:"mt7 pl15",attrs:{span:5}},[a("span",{staticClass:"icon2 icon2-i inlineblock icon2-cruise active",attrs:{title:"邮轮"},on:{click:function(e){t.setVehicle(i,1)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-aircraft active",attrs:{title:"飞机"},on:{click:function(e){t.setVehicle(i,2)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-train active",attrs:{title:"火车"},on:{click:function(e){t.setVehicle(i,3)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-bus active",attrs:{title:"巴士"},on:{click:function(e){t.setVehicle(i,4)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-car active",attrs:{title:"汽车"},on:{click:function(e){t.setVehicle(i,5)}}})])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"用餐情况：",prop:"haveMeals"}},[a("el-checkbox-group",{on:{change:function(e){t.getChangeEating(i)}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{label:"早餐"}}),t._v(" "),a("el-checkbox",{attrs:{label:"午餐"}}),t._v(" "),a("el-checkbox",{attrs:{label:"晚餐"}})]}}]),model:{value:e.haveMeals,callback:function(a){t.$set(e,"haveMeals",a)},expression:"tripsItem.haveMeals"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{placeholder:"备注",maxlength:30},on:{change:t.getEatRemark},model:{value:e.tMealsRemark,callback:function(a){t.$set(e,"tMealsRemark",a)},expression:"tripsItem.tMealsRemark"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"住宿情况：",prop:"accommodation"}},[a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","no-data-text":"请输入进行搜索",placeholder:"请输入酒店名称，拼音码","filter-method":t.getChangeLive},on:{change:t.pushHotelIds},model:{value:e.phHotelIds,callback:function(a){t.$set(e,"phHotelIds",a)},expression:"tripsItem.phHotelIds"}},t._l(e.hotel,function(e){return a("el-option",{key:e.id,attrs:{label:e.hName,value:e.id},on:{click:function(a){t.changeHotel(e.id)}}})}))],1)])],1),t._v(" "),a("el-col",{attrs:{span:6,prop:"tHotelRemark"}},[a("el-input",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"备注",maxlength:30},on:{change:t.getRoomRemark},model:{value:e.tHotelRemark,callback:function(a){t.$set(e,"tHotelRemark",a)},expression:"tripsItem.tHotelRemark"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btnbg fr",staticStyle:{"margin-left":"10px"},on:{click:function(a){t.UniteBtn(e.phHotelIds,e.hotel,e.tHotelRemark)}}},[t._v("同步住宿信息")])],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"游玩景点："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","no-data-text":"请输入进行搜索",placeholder:"请输入景点名称，拼音码","filter-method":t.getChangeView},on:{change:t.pushScenicIds},model:{value:e.phScenicIds,callback:function(a){t.$set(e,"phScenicIds",a)},expression:"tripsItem.phScenicIds"}},t._l(e.scenicspot,function(t){return a("el-option",{key:t.id,attrs:{label:t.sName,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"简易行程："}},[a("el-input",{attrs:{type:"textarea",placeholder:"简易行程"},on:{change:t.getEasyTrip},model:{value:e.tSimpleTrip,callback:function(a){t.$set(e,"tSimpleTrip",a)},expression:"tripsItem.tSimpleTrip"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"详细行程："}},[a("jdy-editor",{attrs:{content:e.tDetailTrip,attr:"tDetailTrip",index:i},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:" "}},[a("a",{attrs:{href:"javascript:;"}},[a("p",{staticClass:"absolute bendip blue jl-picBox",on:{click:function(e){e.stopPropagation(),t.alertTag(i)}}},[t._v("图片库")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.attachs.length<4,expression:"tripsItem.attachs.length < 4"}],staticClass:"jl-localPic"},[a("label",{attrs:{for:"fileUpload"+i}},[a("div",{staticClass:"el-upload el-upload--picture-card",staticStyle:{color:"#20a0ff"}},[a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"fileUpload"+i},on:{change:function(e){t.changecover(e)}}}),t._v("\n                      本地上传\n                    ")])])]),t._v(" "),t._l(e.attachs,function(e,s){return a("div",{staticClass:"jl-upLoadPic"},[a("img",{staticClass:"ifImg",attrs:{src:e}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showPicHover,expression:"showPicHover"}],staticClass:"jl-upLoadPicHover"},[a("i",{staticClass:"el-icon-delete2",on:{click:function(e){t.delImage(s,i)}}})])])})],2)],1)],1)]})],2)],1),t._v(" "),t.alertTagFlag?a("jdy-alert",{staticClass:"alertTag",staticStyle:{width:"850px"},attrs:{title:"添加图片"},on:{closeAlert:t.alertTag}},[a("el-form",{ref:"addTagStyle",attrs:{model:t.addTagStyle,rules:t.rules,"label-width":"90px"}},[a("el-row",{staticClass:"alertTagTop"},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"资源分类："}},[a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{clearable:"",placeholder:"请选择类型"},on:{change:t.getChangeSort},model:{value:t.addTagStyle.sort,callback:function(e){t.$set(t.addTagStyle,"sort",e)},expression:"addTagStyle.sort"}},t._l(t.sortData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称："}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择相册名称","filter-method":t.getChangeaName},on:{change:t.getPicList},model:{value:t.addTagStyle.pAlbumId,callback:function(e){t.$set(t.addTagStyle,"pAlbumId",e)},expression:"addTagStyle.pAlbumId"}},t._l(t.picData,function(t){return a("el-option",{key:t.id,attrs:{label:t.aName,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"请输入图片名称"},on:{change:t.getPicName},model:{value:t.addTagStyle.picName,callback:function(e){t.$set(t.addTagStyle,"picName",e)},expression:"addTagStyle.picName"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"btnbg fr addBtn",staticStyle:{"margin-right":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.getSearchPicList()}}},[t._v("\n              查询\n            ")])],1)],1),t._v(" "),a("el-row",{staticClass:"alertTagMain"},t._l(t.photoListData,function(e,i){return a("div",{staticClass:"photoList",on:{click:function(a){t.getChangePicList(e.id,e.pOssName,i)}}},[a("input",{class:"picIndex"+i,attrs:{type:"checkbox"}}),t._v(" "),a("div",{staticClass:"imglist"},[a("img",{attrs:{src:e.pOssName}})])])})),t._v(" "),a("el-row",{staticClass:"alertTagFooter"},[a("el-button",{staticClass:"btnbg fl addBtn",staticStyle:{"margin-left":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.saveToTrip()}}},[t._v("\n            保存到行程\n          ")]),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)],1):t._e()],1)]):t._e()},staticRenderFns:[]}},1339:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdycalendar"},[a("div",{attrs:{id:t.id}})])},staticRenderFns:[]}},1345:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft noborder jl-schedule jl-information"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:4}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("assemblylist")}}},[t._v("返回")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.showstatue,expression:"showstatue!=0"}],staticClass:"fright mr10 mt10",attrs:{type:"primary"},on:{click:t.upJia}},[t._v("入库")]),t._v(" "),a("a",{attrs:{href:t.h5Url,target:"_blank"}},[a("el-button",{staticClass:"fright mt10 mr10 ml10",on:{click:function(e){t.gotoH5()}}},[t._v("预览")])],1),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goLast("assemblyTicketprice")}}},[t._v("上一步")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mainbg"}),t._v(" "),a("div",{staticClass:"ticketprice clearfix border relative"},[a("div",{staticClass:"jdy-search jdy-search-bg2 clearfix"},[a("div",{staticClass:"p20 clearfix c5e fleft"},[a("span",{staticClass:"c1f blod"},[t._v("产品名称："+t._s(t.ProductInfo.pName))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("产品编号："+t._s(t.ProductInfo.pNo))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("类型："+t._s(t.productType[t.ProductInfo.pType]))]),t._v(" "),a("span",{staticClass:"pl10 mr10"},[t._v("计调人员："+t._s(t.ProductInfo.createUser))])])]),t._v(" "),a("div",{staticClass:" p10"},[a("div",{staticClass:"inlineblock mr10"},[a("span",{staticClass:"demonstration"},[t._v("查询日期：")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:t.dateRangeChange},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}}),t._v(" "),a("span",{staticClass:"demonstration ml10"},[t._v("状态选择：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeSelectStatus},model:{value:t.schedulesStatus,callback:function(e){t.schedulesStatus=e},expression:"schedulesStatus"}},[a("el-option",{key:"",attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"正常",value:"0"}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"暂停",value:"1"}}),t._v(" "),a("el-option",{key:"3",attrs:{label:"已过期",value:"3"}})],1)],1),t._v(" "),a("div",{staticClass:"fright"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btnbg",attrs:{type:"default"},on:{click:t.refreshBtn}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"btnbg mr25",attrs:{type:"default"},on:{click:t.alertJournal}},[t._v("日志")])],1)]),t._v(" "),a("div",{staticClass:"jdy-table p10"},[a("el-table",{staticClass:" all",attrs:{data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.rowclickHandler}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[3===e.row.sStatus?a("el-tag",{attrs:{closeTransition:""}},[t._v("已过期")]):t._e(),t._v(" "),0===e.row.sStatus?a("el-tag",{attrs:{closeTransition:"",type:"success"}},[t._v("正常")]):t._e(),t._v(" "),1===e.row.sStatus?a("el-tag",{attrs:{closeTransition:"",type:"danger"}},[t._v("暂停")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"班期编号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sScheduleNo)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"团号",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sGroupOrderNo)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"班期名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sScheduleName)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.formatDate(e.row.sCalendar))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"停售时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.getStopSaleDate(e.row.sCalendar,e.row.sLeaveTime,e.row.sStopType,e.row.sStopSale))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"座位数/车辆数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatTotal)+"/"+t._s(e.row.sCarNum)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已售",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatSold||0)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"成团人数",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sGroupNum)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"虚占",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sShamNum)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"余座",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatLeft)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预留",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatHold)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"锁定",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatLock)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"星期",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.WeekDay[e.row.sWeekDay-1])+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"对号入座",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(null!=e.row.sSitType?0==e.row.sSitType?"不对号入座":"对号入座":"")+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"105",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){t.editBanqi(e.row.id)}}},[t._v("\n                编辑\n              ")])]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.search.pageSize,layout:"prev, pager, next, jumper",total:t.search.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)])],1),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.pid,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e()],1)},staticRenderFns:[]}},1354:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-resources fleft"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"resources-tab"},[a("span",[t._v("游客信息")]),t._v(" "),a("el-button",{staticClass:"fright mr20 mt10",on:{click:t.goback}},[t._v("返回")])],1),t._v(" "),a("div",{staticClass:"jdy-table jdy-table-padding"},[a("el-table",{staticClass:" all",attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"下单人员",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"colorSpan",on:{click:function(a){t.peopleDetail(e.row.orderCreatorId)}}},[t._v(t._s(e.row.orderCreatorName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(1==e.row.touristStatus?"已取消":"正常")+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票价类目",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.ticketPriceCategoryName)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票种",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(1==e.row.ticketType?"儿童":"成人")+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"游客姓名",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.touristName)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"游客电话",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.touristPhone)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"接送信息","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("去程："+t._s(e.row.startPlace))]),t._v(" "),a("div",[t._v("返程："+t._s(e.row.backPlace))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"证件类型",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(1==e.row.licenseType?"护照":"身份证")+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"证件号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.licenseNo)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"colorSpan",on:{click:function(a){t.orderDetail(e.row.orderId)}}},[t._v(t._s(e.row.orderNo))])]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1),t._v(" "),t.alertFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"下单人员基本信息"},on:{closeAlert:t.closeAlert}},[a("div",{staticClass:"yjk-alertInner"},[a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("用户账号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uAccount))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("真实姓名：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uRealName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("员工编号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uNo))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("职务：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uPost))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("单位名称：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.cName))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("部门名称：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.dName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("上级：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.upName))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("身份证：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uIdcard))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("手机号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uTel))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("出生年月：")]),t._v(" "),a("span",[t._v(t._s(t._f("dateFormat")(t.userInfo.uBirthday)))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("性别：")]),t._v(" "),a("span",[t._v(t._s(t._f("sexName")(t.userInfo.uSex)))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("文化程度：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.degreeName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("紧急联系人：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uContacts))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uAddress))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uPhone))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("微信号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uWxname))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("QQ：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uQq))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("邮箱：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uEmail))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("备注：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uRemark))])])])])]):t._e()],1)])},staticRenderFns:[]}},1357:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jl-information"},[a("div",{staticClass:"jdy-content jdy-transfer yjk-fleft"},[a("div",{staticClass:"jdy-tab",staticStyle:{margin:"0"}},[a("a",{class:{active:null==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(null)}}},[t._v("全部\n                "),a("span")]),t._v(" "),a("a",{class:{active:1==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(1)}}},[t._v("待受理\n                "),a("span")]),t._v(" "),a("a",{class:{active:2==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(2)}}},[t._v("定制中\n                "),a("span")]),t._v(" "),a("a",{class:{active:3==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(3)}}},[t._v("已反馈\n                "),a("span")]),t._v(" "),a("a",{class:{active:4==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(4)}}},[t._v("已确认\n                "),a("span")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btnInTab fright mr10 mt10",on:{click:t.refresh}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"btnInTab fright mr10 mt10",on:{click:t.alertJournal}},[t._v("日志")])],1),t._v(" "),a("div",[a("el-form",{ref:"ruleform",staticClass:"demo-form",attrs:{model:t.ruleform,inline:!0}},[a("el-row",{staticClass:"mt10"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==t.logindata.uDataLimit,expression:"logindata.uDataLimit==3"}],staticClass:"yjk-mb10 yjk-ml100 ml10"},[a("el-select",{attrs:{placeholder:"请选择分公司",clearable:""},on:{change:t.getTableData},model:{value:t.ruleform.companyId,callback:function(e){t.$set(t.ruleform,"companyId",e)},expression:"ruleform.companyId"}},t._l(t.BuyerCompanyIdArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"yjk-mb10 yjk-ml100",class:{ml10:3!=t.logindata.uDataLimit}},[a("el-select",{on:{change:t.getTableData},model:{value:t.ruleform.type,callback:function(e){t.$set(t.ruleform,"type",e)},expression:"ruleform.type"}},[a("el-option",{key:9,attrs:{label:"全部",value:9}}),t._v(" "),a("el-option",{key:0,attrs:{label:"个人定制",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"企业定制",value:1}})],1)],1),t._v(" "),a("el-form-item",{staticClass:"yjk-mb10 yjk-search"},[a("el-input",{attrs:{placeholder:"请输入客户姓名或联系电话查询"},model:{value:t.ruleform.searchKey,callback:function(e){t.$set(t.ruleform,"searchKey","string"==typeof e?e.trim():e)},expression:"ruleform.searchKey"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.searchType,expression:"!searchType"}],staticClass:"yjk-ml100 yjk-mb10"},[a("el-button",{staticClass:"btnInTab",attrs:{type:"primary"},on:{click:t.getTableData}},[t._v("确认查询")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("el-table",{staticClass:"all",attrs:{data:t.tableData,border:""},on:{"current-change":t.handleRowChange}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"需求单","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"link",attrs:{to:{path:"/selfTravelList/selfHistory",query:{id:e.row.dId,name:e.row.title}}}},[t._v("【"+t._s(e.row.rType?"企业":"个人")+"】"+t._s(e.row.rStartCity)+"--"+t._s(e.row.rDestinationCitys))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"游玩人数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.totalPeople)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"游玩天数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.rPlayDaysMin)+"-"+t._s(e.row.rPlayDaysMax)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"人均预算","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("moneyTwoPoints")(e.row.rPerBudget))+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发日期","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.rStartDateHead)+"--"+t._s(e.row.rStartDateTail)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"销售经理"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"salemanage",on:{click:function(a){t.getSaleManage(e.row.saleId)}}},[t._v(t._s(e.row.saleName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"提交时间","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.submitTime)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("filterStatus")(e.row.dStatus))+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品经理"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.manageName)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"接单时间","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.takingTime)+"\n                    ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"绑定产品","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"link",attrs:{href:t.h5Url,target:"_blank"}},[a("span",{on:{click:function(a){t.gotoH5(e.row.productId)}}},[t._v("\n                                "+t._s(e.row.productName)+"\n                            ")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.dStatus?a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){t.updateStatus(e.row.dId)}}},[t._v("\n                            应单\n                        ")]):t._e(),t._v(" "),2==e.row.dStatus||3==e.row.dStatus?a("el-button",{attrs:{type:"default",size:"mini",disabled:t.logindata.userId!=e.row.manageId},on:{click:function(a){t.goDetail(e.row)}}},[t._v("\n                            编辑方案\n                        ")]):t._e(),t._v(" "),3==e.row.dStatus||4==e.row.dStatus||2==e.row.dStatus&&null!=e.row.projectId?a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){t.goH5(e.row)}}},[t._v("\n                            查看方案\n                        ")]):t._e(),t._v(" "),4==e.row.dStatus?a("el-button",{attrs:{type:"default",size:"mini",disabled:t.logindata.userId!=e.row.manageId},on:{click:function(a){t.goPro(e.row.dId)}}},[t._v("\n                            绑定产品\n                        ")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.logId,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e()],1)]),t._v(" "),t.alertFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"销售经理基本信息"},on:{closeAlert:t.closeAlert}},[a("div",{staticClass:"yjk-alertInner"},[a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("用户账号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uAccount))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("真实姓名：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uRealName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("员工编号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uNo))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("职务：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uPost))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("单位名称：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.cName))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("部门名称：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.dName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("负责人：")]),t._v(" "),a("span",[t._v(t._s(t._f("chargePersonType")(t.userInfo.uDtype)))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("身份证：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uIdcard))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("手机号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uTel))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("出生年月：")]),t._v(" "),a("span",[t._v(t._s(t._f("dateFormat")(t.userInfo.uBirthday)))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("性别：")]),t._v(" "),a("span",[t._v(t._s(t._f("sexName")(t.userInfo.uSex)))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("文化程度：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.degreeName))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("紧急联系人：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uContacts))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("地址：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uAddress))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("电话：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uPhone))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("微信号：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uWxname))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("QQ：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uQq))])]),t._v(" "),a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("邮箱：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uEmail))])])]),t._v(" "),a("div",[a("span",{staticClass:"infoLine"},[a("span",{staticClass:"infoTitle"},[t._v("备注：")]),t._v(" "),a("span",[t._v(t._s(t.userInfo.uRemark))])])])])]):t._e(),t._v(" "),t.alertproFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"绑定产品"},on:{closeAlert:t.goPro}},[a("div",{staticClass:"yjk-alertInner"},[a("el-select",{staticStyle:{width:"100%",height:"300px"},attrs:{filterable:!0,"remote-method":t.searchProduct,clearable:"",remote:"",placeholder:"请输入产品编号、产品名称搜索"},model:{value:t.productId,callback:function(e){t.productId=e},expression:"productId"}},t._l(t.selectList,function(t){return a("el-option",{key:t.id,attrs:{label:t.pName,value:t.id}})})),t._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[a("el-button",{staticClass:"mt10 btnInTab",attrs:{type:"default",disabled:t.btnFlag},on:{click:t.savePro}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"mt10 mr10 btnInTab",attrs:{type:"default"},on:{click:t.goPro}},[t._v("取消")])],1)],1)]):t._e()],1)},staticRenderFns:[]}},1359:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft noborder jl-information"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:2}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("assemblylist")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mr10 mt10",attrs:{type:"primary"},on:{click:function(e){t.onSubmitGo("assemblySchedule")}}},[t._v("下一步")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mainbg"}),t._v(" "),a("div",{staticClass:"ticketprice clearfix border relative"},[a("div",{staticClass:"jdy-search jdy-search-bg2 clearfix "},[a("div",{staticClass:"p10 clearfix c5e"},[a("p",{staticClass:"mt10 fleft"},[a("span",{staticClass:"c1f blod"},[t._v("产品名称："+t._s(t.productDetail.pName))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("产品编号："+t._s(t.productDetail.pNo))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("类型："+t._s(t._f("filterProType")(t.productDetail.pType)))]),t._v(" "),a("span",{staticClass:"pl10 mr10"},[t._v("计调人员："+t._s(t.productDetail.pContactName))])]),t._v(" "),a("div",{staticClass:"fright"},[a("div",{staticClass:"inlineblock mr10 w300 "},[a("el-input",{attrs:{placeholder:"票价名称"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchTableData(e):null}},model:{value:t.searchParams.tName,callback:function(e){t.$set(t.searchParams,"tName",e)},expression:"searchParams.tName"}})],1),t._v(" "),a("el-button",{staticClass:"mt10",attrs:{type:"primary"},on:{click:t.searchTableData}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"btnbg",attrs:{type:"default"},on:{click:t.alertJournal}},[t._v("日志")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btnbg",attrs:{type:"default"},on:{click:t.updatePage}},[t._v("刷新")])],1)])]),t._v(" "),a("div",{staticClass:"jdy-table p10 jl-onlinebill jl-ticket"},[a("el-table",{staticClass:"mt20 all fatherList",staticStyle:{"text-again":"center"},attrs:{data:t.tableData,"default-expand-all":""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticClass:"childBill inner-table",staticStyle:{border:"none"},attrs:{data:e.row.tickList,border:"","highlight-current-row":""},on:{"current-change":t.handleRowChange}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"109"}}),t._v(" "),a("el-table-column",{attrs:{label:"票价名称","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.tName)+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(1==e.row.tTicketType?"套票":0==e.row.tType?"成人票":"儿童票")+"\n                  ")]}}])}),t._v(" "),0==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.tMarketPrice)+"\n                  ")]}}])}):t._e(),t._v(" "),1==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价/内部集结价","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.tMarketPrice)+t._s("/"+e.row.tGatherPrice)+"\n                  ")]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"交通类目","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0==e.row.tTicketType?e.row.tTraffic:"---")+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"始发站","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.departureList)+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"库存量","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(-1==e.row.tStock?"无限制":e.row.tStock)+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"default",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),t.editFare(t.$route.query.id,e.row.id,e.row.tTicketType)}}},[t._v("\n                      编辑票价\n                    ")])]}}])})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"序号",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"票价名称","min-width":"250"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型","min-width":"80"}}),t._v(" "),1==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价/内部集结价","min-width":"120"}}):t._e(),t._v(" "),0==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价","min-width":"120"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"交通类目","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"始发站","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"库存量","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"140"}})],1)],1)]),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.focusPriceId,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e()],1)])},staticRenderFns:[]}},1360:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"tickForm",staticClass:"demo-form-inline",attrs:{model:t.tickForm,rules:t.rules,"label-width":"150px"}},[a("div",{staticClass:"jdy-tab"},[a("a",{staticStyle:{border:"0"}},[t._v(t._s(t.productDetail.pName)+"\n                    "),a("span")]),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("assemblyTicketprice")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmit()}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix border relative mt30",staticStyle:{"padding-top":"40px"}},[a("div",{staticClass:"clearfix p10"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价类目:",prop:"tCategory"}},[a("el-select",{staticClass:"inputGeneral",attrs:{disabled:!0},model:{value:t.tickForm.tCategory,callback:function(e){t.$set(t.tickForm,"tCategory",e)},expression:"tickForm.tCategory"}},t._l(t.baseCategory,function(t,e){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价类型:",prop:"tType"}},[a("el-select",{staticClass:"inputGeneral",attrs:{disabled:!0},on:{change:t.getName},model:{value:t.tickForm.tType,callback:function(e){t.$set(t.tickForm,"tType",e)},expression:"tickForm.tType"}},[a("el-option",{key:0,attrs:{label:"成人票",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"儿童票",value:1}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价名称:",prop:"tName"}},[a("el-input",{staticClass:"inputGeneral",attrs:{disabled:!0},model:{value:t.tickForm.tName,callback:function(e){t.$set(t.tickForm,"tName",e)},expression:"tickForm.tName"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"门市价:",prop:"tMarketPrice"}},[a("el-input",{staticClass:"inputGeneral",model:{value:t.tickForm.tMarketPrice,callback:function(e){t.$set(t.tickForm,"tMarketPrice",e)},expression:"tickForm.tMarketPrice"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"内部集结价:",prop:"tMarketPrice"}},[a("el-input",{staticClass:"inputGeneral",attrs:{disabled:!0},model:{value:t.tickForm.tGatherPrice,callback:function(e){t.$set(t.tickForm,"tGatherPrice",e)},expression:"tickForm.tGatherPrice"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"库存量:"}},[a("el-input-number",{staticClass:"inputGeneral",attrs:{min:-1,disabled:!0},model:{value:t.tickForm.tStock,callback:function(e){t.$set(t.tickForm,"tStock",e)},expression:"tickForm.tStock"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"成人数:"}},[a("el-input-number",{staticClass:"inputGeneral",attrs:{min:0,disabled:!0},model:{value:t.tickForm.tAdultNum,callback:function(e){t.$set(t.tickForm,"tAdultNum",e)},expression:"tickForm.tAdultNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"儿童数:"}},[a("el-input-number",{staticClass:"inputGeneral",attrs:{min:0,disabled:!0},model:{value:t.tickForm.tChildNum,callback:function(e){t.$set(t.tickForm,"tChildNum",e)},expression:"tickForm.tChildNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交通类目:",prop:"tTraffic"}},[a("el-select",{staticClass:"inputGeneral",attrs:{id:"TrafficDiv",disabled:!0},on:{change:function(e){t.getStationList(!1)}},model:{value:t.tickForm.tTraffic,callback:function(e){t.$set(t.tickForm,"tTraffic",e)},expression:"tickForm.tTraffic"}},[a("el-option",{key:0,attrs:{label:"飞机",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"火车",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"汽车",value:2}}),t._v(" "),a("el-option",{key:3,attrs:{label:"邮轮",value:3}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"始发站:"}},[a("div",{staticClass:"tfcity relative"},[a("div",{staticClass:"el-input",attrs:{id:"SFstation"}},[a("el-select",{attrs:{multiple:"",filterable:"",placeholder:"请选择始发站",disabled:!0},model:{value:t.selectStationArr,callback:function(e){t.selectStationArr=e},expression:"selectStationArr"}},t._l(t.stationArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.dName+"-"+t.dProvince+"-"+t.dCity+"-"+t.dArea,value:t.id}})}))],1)])])],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"票价简介:"}},[a("el-input",{attrs:{type:"textarea",disabled:!0},model:{value:t.tickForm.tIntroduction,callback:function(e){t.$set(t.tickForm,"tIntroduction",e)},expression:"tickForm.tIntroduction"}})],1)],1)],1)])])],1),t._v(" "),t.showcfCityFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"投放城市选择"},on:{closeAlert:t.closecfCity}},[a("div",{staticClass:"showtfcityaa"},[a("div",{staticClass:"showtfcityaa-scroll"},[a("div",{staticClass:"showtfcityaa-i"},t._l(t.proviceArr,function(e,i){return a("div",{key:e,staticClass:"showtfcityaaa"},[a("div",{staticClass:"showtfcityaaa-head plr10 clearfix"},[a("span",[t._v(t._s(i))]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 allSelect",attrs:{size:"small"}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 mr10 allCancel",attrs:{size:"small"}},[t._v("取消全选")])],1),t._v(" "),a("div",{staticClass:"showtfcityaaa-content plr10 clearfix"},t._l(e,function(e){return a("span",{key:e.id,class:{"showtfcityaaa-span":!0,active:-1!=t.selectCityArr.name.indexOf(e.name)},attrs:{dataId:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"hide"},[t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.id,staticClass:"taCountry"},[t._v(t._s(e.type))])}),t._v(" "),t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.id,staticClass:"taProvince"},[t._v(t._s(e.pName))])})],2)])}))])]),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.closecfCity}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.removeAll}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",id:"selectAll"},on:{click:t.selectAllAll}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.saveCC}},[t._v("保存")])],1)]):t._e()],1)},staticRenderFns:[]}},1365:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft jl-information jl-List"},[a("el-row",{staticClass:"jdy-content-inner"},[a("div",{staticClass:"jdy-tab"},[a("a",{class:{active:null==t.jdytabActive},attrs:{href:"#",title:""},on:{click:function(e){t.jdytab(null)}}},[t._v("全部\n        "),a("span")]),t._v(" "),a("a",{class:{active:3==t.jdytabActive},attrs:{href:"#",title:""},on:{click:function(e){t.jdytab(3)}}},[t._v("已入库\n        "),a("span")]),t._v(" "),a("a",{class:{active:2==t.jdytabActive},attrs:{href:"#",title:""},on:{click:function(e){t.jdytab(2)}}},[t._v("待入库\n        "),a("span")]),t._v(" "),a("a",{class:{active:0==t.jdytabActive},attrs:{href:"#",title:""},on:{click:function(e){t.jdytab(0)}}},[t._v("已发布\n        "),a("span")]),t._v(" "),a("el-dropdown",{staticClass:"fr mr10 mt10",attrs:{"split-button":"",type:"defult"}},[a("a",{attrs:{id:"to-line-page",href:"#/list/line"}},[t._v("添加产品")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("span",{on:{click:function(e){t.gotoEditPage(7)}}},[t._v("复制产品")])])],1)],1),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"fright mt10 mr10",attrs:{type:"default"},on:{click:t.updatePage}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"default"},on:{click:t.alertJournal}},[t._v("日志")])],1),t._v(" "),a("div",{staticClass:"jdy-search mt20"},[a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{placeholder:"请选择类型"},model:{value:t.searchParams.pType,callback:function(e){t.$set(t.searchParams,"pType",e)},expression:"searchParams.pType"}},t._l(t.type,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),t._v(" "),a("el-select",{staticClass:"jdy-search-edit hasbg mr10",model:{value:t.searchParams.ascription,callback:function(e){t.$set(t.searchParams,"ascription",e)},expression:"searchParams.ascription"}},[a("el-option",{key:0,attrs:{label:"本地",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"区域",value:1}})],1),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.companyIdFlag,expression:"companyIdFlag"}],attrs:{placeholder:"请选择分公司",clearable:""},on:{change:t.getTableData},model:{value:t.searchParams.companyId,callback:function(e){t.$set(t.searchParams,"companyId",e)},expression:"searchParams.companyId"}},t._l(t.BuyerCompanyIdArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})})),t._v(" "),a("div",{staticClass:"inlineblock mr10",staticStyle:{width:"305px"}},[a("el-input",{attrs:{placeholder:"产品名称、拼音码"},model:{value:t.searchParams.pName,callback:function(e){t.$set(t.searchParams,"pName",e)},expression:"searchParams.pName"}},[2!=t.companyType?a("el-select",{staticClass:"hasbg",staticStyle:{width:"120px"},attrs:{slot:"prepend",filterable:"",placeholder:"请选择品牌",clearable:"",remote:"","remote-method":t.searchBrands},slot:"prepend",model:{value:t.searchParams.pBrand,callback:function(e){t.$set(t.searchParams,"pBrand",e)},expression:"searchParams.pBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.bName,value:t.id}})})):t._e()],1)],1),t._v(" "),a("el-button",{staticClass:"el-button btnbg el-button--primary",attrs:{type:"primary"},on:{click:t.getTableData}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("el-table",{staticClass:"mt20 all",attrs:{data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.rowclickHandler}},[a("el-table-column",{staticClass:"list-more",attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.trip.length>0?a("span",t._l(e.row.trip,function(i){return i.tripStartCalendar?a("span",{key:i.id,staticStyle:{display:"block",height:"35px","line-height":"35px"}},[t._v(t._s(i.tripName)+" 行程时间:"+t._s(i.tripStartCalendar)+"--"+t._s(i.tripEndCalendar)+"\n                "),a("div",{staticClass:"fr",staticStyle:{"padding-left":"30px"}},[i.tripStartCalendar?a("el-button",{attrs:{type:"default",size:"mini"}},[a("router-link",{attrs:{to:{path:"/list/supplement",query:{id:e.row.id,isAdd:!1,pDays:e.row.pDays,tcStartDay:i.tripStartCalendar,tcEndDay:i.tripEndCalendar}}}},[t._v("编辑")])],1):t._e(),t._v(" "),i.tripStartCalendar?a("el-button",{staticStyle:{color:"red"},attrs:{type:"default",size:"mini"},on:{click:function(a){t.deleteTrips(e.row.id,i.tripStartCalendar,i.tripEndCalendar)}}},[t._v("删除")]):t._e()],1)]):t._e()})):a("span",[t._v("暂无补充行程")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品编号",width:"100",prop:"pNo"}}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"text-align":"left",padding:"10px 0 10px 30px"}},[a("a",{attrs:{href:t.h5Url,target:"_blank"}},[a("span",{staticStyle:{color:"#20a0ff"},on:{click:function(a){t.gotoH5(e.row.id)}}},[t._v(t._s(e.row.pName))])]),t._v(" "),t._l(e.row.productKeys,function(e,i){return a("span",{key:e.id},[0==i?a("span",[a("br")]):t._e(),t._v(" "),0==e.kColor?a("span",{staticClass:"jl-noticeTitle bkone"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),1==e.kColor?a("span",{staticClass:"jl-noticeTitle bktwo"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),2==e.kColor?a("span",{staticClass:"jl-noticeTitle bkthree"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),3==e.kColor?a("span",{staticClass:"jl-noticeTitle bkfour"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),4==e.kColor?a("span",{staticClass:"jl-noticeTitle bkfive"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),5==e.kColor?a("span",{staticClass:"jl-noticeTitle bksix"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),6==e.kColor?a("span",{staticClass:"jl-noticeTitle bkseven"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),7==e.kColor?a("span",{staticClass:"jl-noticeTitle bkeight"},[t._v(t._s(e.kName))]):t._e()])})],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品归属","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.ascription?"本地":"区域"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品所属分公司","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.companyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"电子合同","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(null!=e.row.templateTitle?e.row.templateTitle:1==e.row.offlineSignStatus?"线下签署":"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"天数",width:"80",prop:"pDays"}}),t._v(" "),a("el-table-column",{attrs:{label:"客服","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.pContactName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.type,function(i,s){return a("span",{key:i},[e.row.pType==s?a("span",[t._v(t._s(i))]):t._e()])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"编辑时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("changeCreate")(e.row.updateTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.pStatus?a("span",[t._v("已入库")]):0==e.row.pStatus?a("span",[t._v("已发布")]):a("span",[t._v("待入库")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"排序",width:"100",prop:"pSort"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{staticClass:"goto-update",attrs:{size:"mini",placeholder:"编辑",value:""},on:{change:t.gotoEditPage},model:{value:t.editType[e.row.id],callback:function(a){t.$set(t.editType,e.row.id,a)},expression:"editType[scope.row.id]"}},[a("el-option",{key:"1",attrs:{value:"1",label:"线路信息"}}),t._v(" "),a("el-option",{key:"2",attrs:{value:"2",label:"行程信息"}}),t._v(" "),a("el-option",{key:"3",attrs:{value:"3",label:"票价信息"}}),t._v(" "),a("el-option",{key:"4",attrs:{value:"4",label:"班期信息"}}),t._v(" "),a("el-option",{key:"6",attrs:{value:"6",label:"关键词设置"}}),t._v(" "),a("el-option",{key:"9",attrs:{value:"9",label:"合同模板"}}),t._v(" "),a("el-option",{key:"8",attrs:{value:"8",label:"添加成本"}})],1),t._v(" "),0!=e.row.pStatus&&3==e.row.pStatus?a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},on:{click:function(a){t.uneffect(e.row.companyId,e.row.id,e.row.updateUser)}}},[t._v("出库")]):t._e(),t._v(" "),0!=e.row.pStatus&&2==e.row.pStatus?a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},on:{click:function(a){t.effect(e.row.companyId,e.row.id,e.row.updateUser)}}},[t._v("入库")]):t._e(),t._v(" "),3!=e.row.pStatus&&0!=e.row.pStatus?a("el-button",{staticClass:"red mleft0",attrs:{type:"default",size:"mini"},on:{click:function(a){t.deleteProduct(e.row.id)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1),t._v(" "),t.alertSetkeyFlag?a("jdy-alert",{staticClass:"alertSetkey",attrs:{title:"关键词设置"},on:{closeAlert:t.alertSetkey}},[a("div",{staticClass:"setkey p18 clearfix"},[a("div",{staticClass:"setkey-top clearfix"},[t._l(t.productsKeywords,function(e){return a("span",{key:e.id},[0==e.kColor?a("span",{staticClass:"bkone jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),1==e.kColor?a("span",{staticClass:"bktwo jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),2==e.kColor?a("span",{staticClass:"bkthree jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),3==e.kColor?a("span",{staticClass:"bkfour jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),4==e.kColor?a("span",{staticClass:"bkfive jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),5==e.kColor?a("span",{staticClass:"bksix jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),6==e.kColor?a("span",{staticClass:"bkseven jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),7==e.kColor?a("span",{staticClass:"bkeight jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e()])}),t._v(" "),a("p",{staticClass:"c1 f12",staticStyle:{margin:"10px 0 0 15px"}},[t._v("当前产品可选标签数为"+t._s(t.setkeyTagsMax)+"，已选择"+t._s(t.setkeyTagsNumber)+"，剩余数量"+t._s(t.setkeyTagsMax-t.setkeyTagsNumber)+"！")]),t._v(" "),a("div",{staticClass:"mt10"},[t._l(t.setkeyTags,function(e){return a("el-tag",{key:e.name,staticClass:"mr10",attrs:{closable:!0,type:e.type,"close-transition":!1},on:{close:function(a){t.handleSetkeyClose(e)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),t._v(" "),a("el-button",{staticClass:"fright",attrs:{type:"primary",size:"small"},on:{click:t.saveSetkey}},[t._v("保存")])],2)],2),t._v(" "),a("div",{staticClass:"setkey-box mt20 clearfix",staticStyle:{width:"625px"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",{staticClass:"alertTagMain jl-keyWordsMain",staticStyle:{height:"200px","line-height":"36px"}},t._l(t.allProductsKeywords,function(e){return a("span",{key:e.id,on:{click:function(a){t.getCurrentKeyword(e)}}},[0==e.kColor?a("span",{staticClass:"jl-keyWords bkone",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),1==e.kColor?a("span",{staticClass:"jl-keyWords bktwo",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),2==e.kColor?a("span",{staticClass:"jl-keyWords bkthree",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),3==e.kColor?a("span",{staticClass:"jl-keyWords bkfour",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),4==e.kColor?a("span",{staticClass:"jl-keyWords bkfive",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),5==e.kColor?a("span",{staticClass:"jl-keyWords bksix",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),6==e.kColor?a("span",{staticClass:"jl-keyWords bkseven",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),7==e.kColor?a("span",{staticClass:"jl-keyWords bkeight",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e()])}))],1),t._v(" "),a("el-form",{ref:"newKeywordForm",attrs:{"label-width":"80px",rules:t.rules,model:t.newKeywordForm}},[a("el-row",{staticClass:"alertTagTop"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称：",prop:"kName"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.newKeywordForm.kName,callback:function(e){t.$set(t.newKeywordForm,"kName",e)},expression:"newKeywordForm.kName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"排序:",prop:"lSort"}},[a("el-input-number",{staticClass:"all",attrs:{min:1},model:{value:t.newKeywordForm.lSort,callback:function(e){t.$set(t.newKeywordForm,"lSort",e)},expression:"newKeywordForm.lSort"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"fr jl-TagViewBtn"},[t._v(t._s(t.newKeywordForm.kName||"预览样式"))])])],1),t._v(" "),a("el-row",{staticClass:"alertTagMain jl-keyWordsMainCss"},[a("ul",[a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkone",on:{click:function(e){t.changeColor(0)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bktwo",on:{click:function(e){t.changeColor(1)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkthree",on:{click:function(e){t.changeColor(2)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkfour",on:{click:function(e){t.changeColor(3)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkfive",on:{click:function(e){t.changeColor(4)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bksix",on:{click:function(e){t.changeColor(5)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkseven",on:{click:function(e){t.changeColor(6)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkeight",on:{click:function(e){t.changeColor(7)}}})])])]),t._v(" "),a("el-row",{staticClass:"alertTagFooter"},[a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"btnbg fr addBtn",attrs:{type:"primary"},on:{click:function(e){t.saveAddTag("addTagStyle")}}},[t._v("\n                      添加\n                    ")])],1)],1)],1)],1)])]):t._e(),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.pid,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e(),t._v(" "),t.contractFlag?a("jdy-alert",{staticClass:"showtfcity",attrs:{title:"绑定合同模板"},on:{closeAlert:t.closeContract}},[a("div",{staticClass:"alertBody"},[a("el-radio-group",{model:{value:t.tempId,callback:function(e){t.tempId=e},expression:"tempId"}},t._l(t.tempIdGroup,function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.templateTitle))])}))],1),t._v(" "),a("div",{staticClass:"alertFoot"},[a("el-button",{staticClass:"fright",attrs:{type:"primary"},on:{click:t.closeContract}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mr10",attrs:{type:"primary"},on:{click:t.saveContract}},[t._v("确定")])],1)]):t._e()],1)],1)},staticRenderFns:[]}},1369:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer jl-selfLine fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-row",{staticClass:"jdy-content-inner-trip"},[a("el-button",{staticClass:"fright mt10 btnInTab",staticStyle:{"margin-right":"-10px","margin-left":"20px"},on:{click:t.goback}},[t._v("返回")]),t._v(" "),3!=this.$route.query.status?a("el-button",{staticClass:"fright mt10 btnInTab",attrs:{disabled:t.btnFlag},on:{click:function(e){t.onSubmit("lineForm")}}},[t._v("提交")]):t._e(),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10 btnInTab",attrs:{disabled:t.btnFlag},on:{click:function(e){t.onSave("lineForm")}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"h20 mt10"}),t._v(" "),a("el-form",{ref:"lineForm",attrs:{model:t.lineForm,rules:t.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[a("el-row",[a("el-form-item",{attrs:{label:"标题：",prop:"dpLineName","label-width":"90px"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:t.lineForm.dpLineName,callback:function(e){t.$set(t.lineForm,"dpLineName",e)},expression:"lineForm.dpLineName"}})],1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"订单报价：",prop:"dpOrderAmount"}},[a("jdy-editor",{attrs:{content:t.lineForm.dpOrderAmount,attr:"dpOrderAmount"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"最低成团："}},[a("jdy-editor",{attrs:{content:t.lineForm.dpMinClusteringNum,attr:"dpMinClusteringNum"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"核心景点："}},[a("jdy-editor",{attrs:{content:t.lineForm.dpCoreScenic,attr:"dpCoreScenic"},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"住宿标准："}},[a("jdy-editor",{attrs:{content:t.lineForm.dpStandardAccommodation,attr:"dpStandardAccommodation"},on:{input:t.editorUpdate}})],1)],1)],1)],1)])},staticRenderFns:[]}},1370:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"banqiForm",staticClass:"demo-form-inline",attrs:{model:t.banqiForm,rules:t.banqiRule,"label-width":"100px"}},[a("div",{staticClass:"jdy-tab"},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("schedule")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmit("banqiForm")}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix  relative mt60"},[2!=t.addType?a("div",{staticClass:"clearfix p10 border pb30"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--班期信息--")])]),t._v(" "),a("el-row",{staticClass:"mt30"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"班期编号:",prop:"sScheduleNo"}},[a("el-input",{attrs:{placeholder:"请输入班期编号"},model:{value:t.banqiForm.sScheduleNo,callback:function(e){t.$set(t.banqiForm,"sScheduleNo",e)},expression:"banqiForm.sScheduleNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开始时间:"}},[a("el-date-picker",{staticClass:"all",staticStyle:{width:"100%"},attrs:{editable:!1,type:"date",placeholder:"开始时间","picker-options":t.pickerOptions0},on:{change:t.calendarsChange},model:{value:t.calendars,callback:function(e){t.calendars=e},expression:"calendars"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"星期几:"}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择开始时间",disabled:!0},model:{value:t.week,callback:function(e){t.week=e},expression:"week"}},t._l(t.WeekDay,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"班期名称:"}},[a("el-input",{attrs:{placeholder:"请输入班期名称"},model:{value:t.banqiForm.sScheduleName,callback:function(e){t.$set(t.banqiForm,"sScheduleName",e)},expression:"banqiForm.sScheduleName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出发时分:",prop:""}},[[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":{format:"HH:mm"},format:"HH:mm",placeholder:"出发时分",clearable:"",editable:!1},model:{value:t.sLeaveTime,callback:function(e){t.sLeaveTime=e},expression:"sLeaveTime"}})]],2)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"停售时间:",prop:"sStopSale"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:t.banqiForm.sStopSale,callback:function(e){t.$set(t.banqiForm,"sStopSale",t._n(e))},expression:"banqiForm.sStopSale"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.banqiForm.sStopType,callback:function(e){t.$set(t.banqiForm,"sStopType",e)},expression:"banqiForm.sStopType"}},[a("el-option",{attrs:{label:"分钟",value:0}}),t._v(" "),a("el-option",{attrs:{label:"小时",value:1}}),t._v(" "),a("el-option",{attrs:{label:"天",value:2}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"虚拟已售数:"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"虚拟已售数",min:0,max:100,controls:!1},model:{value:t.banqiForm.sShamNum,callback:function(e){t.$set(t.banqiForm,"sShamNum",t._n(e))},expression:"banqiForm.sShamNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对号入座:",prop:""}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择"},model:{value:t.banqiForm.sSitType,callback:function(e){t.$set(t.banqiForm,"sSitType",t._n(e))},expression:"banqiForm.sSitType"}},t._l(t.setType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"成团人数:"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"number"},model:{value:t.banqiForm.sGroupNum,callback:function(e){t.$set(t.banqiForm,"sGroupNum",t._n(e))},expression:"banqiForm.sGroupNum"}})],1)],1)],1)],1):t._e(),t._v(" "),2==t.addType?a("div",{staticClass:"clearfix p10 border pb30"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--班期信息--")])]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"班期编号:",prop:"sScheduleNo"}},[a("el-input",{attrs:{placeholder:"请输入班期编号"},model:{value:t.banqiForm.sScheduleNo,callback:function(e){t.$set(t.banqiForm,"sScheduleNo",e)},expression:"banqiForm.sScheduleNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"班期名称:"}},[a("el-input",{attrs:{placeholder:"请输入班期名称"},model:{value:t.banqiForm.sScheduleName,callback:function(e){t.$set(t.banqiForm,"sScheduleName",e)},expression:"banqiForm.sScheduleName"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"虚拟已售数:",prop:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"虚拟已售数",min:0,max:100,controls:!1},model:{value:t.banqiForm.sShamNum,callback:function(e){t.$set(t.banqiForm,"sShamNum",t._n(e))},expression:"banqiForm.sShamNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"对号入座:",prop:""}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择"},model:{value:t.banqiForm.sSitType,callback:function(e){t.$set(t.banqiForm,"sSitType",e)},expression:"banqiForm.sSitType"}},t._l(t.setType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[[a("el-form-item",{attrs:{label:"出发时分"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":{format:"HH:mm"},format:"HH:mm",placeholder:"出发时分",clearable:"",editable:!1},model:{value:t.sLeaveTime,callback:function(e){t.sLeaveTime=e},expression:"sLeaveTime"}})],1)]],2),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"停售时间:",prop:"sStopSale"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:t.banqiForm.sStopSale,callback:function(e){t.$set(t.banqiForm,"sStopSale",t._n(e))},expression:"banqiForm.sStopSale"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.banqiForm.sStopType,callback:function(e){t.$set(t.banqiForm,"sStopType",e)},expression:"banqiForm.sStopType"}},[a("el-option",{attrs:{label:"分钟",value:0}}),t._v(" "),a("el-option",{attrs:{label:"小时",value:1}}),t._v(" "),a("el-option",{attrs:{label:"天",value:2}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"成团人数:"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:100,controls:!1},model:{value:t.banqiForm.sGroupNum,callback:function(e){t.$set(t.banqiForm,"sGroupNum",e)},expression:"banqiForm.sGroupNum"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("jdy-calendar",{attrs:{id:"jdytCalendar"},on:{change:t.multiCanlederChange},model:{value:t.multiCalendars,callback:function(e){t.multiCalendars=e},expression:"multiCalendars"}})],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt60"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--票价信息--")])]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.ticketList,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"适用站点",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.departureList.length)+"个站点")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价类目",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tCategory))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tName))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"门市价",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{controls:!1,min:0,max:1e6,disabled:!0},model:{value:e.row.tMarketPrice,callback:function(a){t.$set(e.row,"tMarketPrice",a)},expression:"scope.row.tMarketPrice"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"库存量（-1代表无限制）",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{controls:!1,min:-1,max:1e6,disabled:!0},model:{value:e.row.tStock,callback:function(a){t.$set(e.row,"tStock",a)},expression:"scope.row.tStock"}})]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.ticketPage.currPage,"page-size":t.ticketPage.pageSize,layout:"prev, pager, next, jumper",total:t.ticketPage.total},on:{"size-change":t.pageSizeChange,"current-change":t.currentPageChange,"update:currentPage":function(e){t.$set(t.ticketPage,"currPage",e)}}})],1)],1)]),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt30 carboxss"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--车座信息--")])]),t._v(" "),a("el-table",{staticClass:"myclass",staticStyle:{width:"100%"},attrs:{data:t.tableData2,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"调整车辆数",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:5}},[t._v("\n                       \n                    ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:" ml10 carboxss-button mt10",on:{click:t.addCar}},[a("i",{staticClass:"el-icon-plus blue transx07"}),t._v("新增\n                      ")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button",on:{click:t.removeCar}},[a("i",{staticClass:"el-icon-close red  transx06"}),t._v("删除\n                      ")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"调整座位数",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"当前车号:",prop:""}},[a("el-input",{attrs:{value:t.currentCar>-1?t.currentCar+1:"",readonly:!0,placeholder:"请选择车辆"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新座位数:",prop:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:-1==t.currentCar,placeholder:"请选择车辆"},on:{change:t.seatChange},model:{value:-1==t.currentCar?null:t.carList[t.currentCar].bSeatsNum,callback:function(e){t.$set(-1==t.currentCar?null:t.carList[t.currentCar],"bSeatsNum",t._n(e))},expression:"currentCar==-1?null:carList[currentCar].bSeatsNum"}})],1)],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预留座位数",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"选择单位:"}},[a("el-select",{staticClass:"all",attrs:{clearable:"",filterable:"",remote:"",placeholder:"请选择单位","remote-method":t.searchCompany,loading:t.loading},model:{value:t.currentCompany,callback:function(e){t.currentCompany=e},expression:"currentCompany"}},t._l(t.companyList,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"预留时效(h):",prop:""}},[a("el-input",{attrs:{type:"number",placeholder:"请输入预留时效"},model:{value:t.temptoraryTime,callback:function(e){t.temptoraryTime=e},expression:"temptoraryTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:"mt10 ml10 carboxss-button",on:{click:t.addTemporary}},[a("i",{staticClass:"icon3 inlineblock icon3-stay "}),t._v("预留\n                      ")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button",on:{click:t.releaseTemporary}},[a("i",{staticClass:"icon3 inlineblock icon3-discharge"}),t._v("释放\n                      ")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"其他管理",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc",on:{click:t.lockSeat}},[a("i",{staticClass:"icon3 inlineblock icon3-suo1 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("锁定车位")])])]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc ml10",on:{click:t.unlockSeat}},[a("i",{staticClass:"icon3 inlineblock icon3-suo2 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("解锁车位")])])])]}}])})],1),t._v(" "),a("div",{staticClass:"carboxbb border mt30"},[a("div",{staticClass:"carboxbb-top"},[a("el-row",{staticClass:"tc"},[a("el-col",{attrs:{span:16}},[t._v("可用车辆信息")]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("座位信息")])],1)],1),t._v(" "),a("div",{staticClass:"carboxbb-content"},[a("el-row",{staticStyle:{height:"500px"}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"carboxbb-table"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.carList,"show-header":!1,"highlight-current-row":"",border:"",height:"250"},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{property:"bus",label:"bus",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("BUS"),a("input",{staticClass:"sortNum",attrs:{hidden:""},domProps:{value:e.$index+1}})]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"info",label:"信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n                              "+t._s(t.banqiForm.sScheduleNo)+" "+t._s(e.$index+1)+"号车["+t._s(t.formatDate(t.calendars,"yyyy-MM-dd"))+"]\n                            ")]),t._v(" "),a("div",[t._v("总数："+t._s(t.carList[e.$index].bSeatsNum)+"\n                              "),a("span",{staticClass:"ml10"},[t._v("已售："+t._s(t.banqiForm.seatSold?t.banqiForm.seatSold:0))])])]}}])})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[t.currentCar>-1?a("div",{staticClass:"carboxbb-right"},[t._l(t.carList[t.currentCar].bSeatsNum,function(e){return[a("el-tooltip",{attrs:{content:t.getTipContent(e),placement:"top",effect:"light",disabled:!(t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString()))}},[a("div",{staticClass:"icon3 icon3-seat inlineblock",class:{"icon3-seat-temporary":t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString()),"icon3-seat-lock":t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString()),"icon3-seat-success":-1!=t.selectedList.indexOf(e)},on:{click:function(a){t.setSeat(e)}}},[t._v(t._s(e)+"\n                          ")])])]}),t._v(" "),t.carList[t.currentCar].bSeatsNum<=0?a("div",{staticStyle:{"margin-left":"100px",color:"red"}},[t._v("请设置座位数")]):t._e()],2):t._e()])],1)],1)])],1)])])])],1)])},staticRenderFns:[]}},1371:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-form-item",class:{"is-error":"error"===t.validateState,"is-validating":"validating"===t.validateState,"is-required":t.isRequired||t.required}},[t.label||t.$slots.label?a("label",{staticClass:"el-form-item__label",style:t.labelStyle,attrs:{for:t.prop}},[t._t("label",[t._v(t._s(t.label+t.form.labelSuffix))])],2):t._e(),t._v(" "),a("div",{staticClass:"el-form-item__content",style:t.contentStyle},[t._t("default"),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},["error"===t.validateState&&t.showMessage&&t.form.showMessage?a("div",{staticClass:"el-form-item__error"},[t._v(t._s(t.validateMessage))]):t._e()])],2)])},staticRenderFns:[]}},1376:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"tickForm2",staticClass:"demo-form-inline",attrs:{model:t.tickForm2,rules:t.rules,"label-width":"150px"}},[a("div",{staticClass:"jdy-tab"},[a("a",{staticStyle:{border:"0"}},[t._v(t._s(t.productDetail.pName)+"\n                    "),a("span")]),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("Ticketprice")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmit()}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix  relative mt60"},[a("div",{staticClass:"clearfix p10 border pb30"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--套票信息--")])]),t._v(" "),a("el-row",{staticClass:"mt30"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价类型:",prop:"tType"}},[a("el-select",{staticClass:"inputGeneral",attrs:{placeholder:"请选择",disabled:!0},model:{value:t.tickForm2.tType,callback:function(e){t.$set(t.tickForm2,"tType",e)},expression:"tickForm2.tType"}},[a("el-option",{key:0,attrs:{label:"单票",value:0}}),t._v(" "),a("el-option",{key:1,attrs:{label:"套票",value:1}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价名称:",prop:"tName"}},[a("el-input",{staticClass:"inputGeneral",model:{value:t.tickForm2.tName,callback:function(e){t.$set(t.tickForm2,"tName",e)},expression:"tickForm2.tName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"票价类目:"}},[a("el-select",{staticClass:"inputGeneral",attrs:{placeholder:"请选择"},model:{value:t.tickForm2.tCategory,callback:function(e){t.$set(t.tickForm2,"tCategory",e)},expression:"tickForm2.tCategory"}},t._l(t.baseCategory,function(t,e){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"redstar",attrs:{label:"门市价:",prop:"tMarketPrice"}},[a("el-input",{staticClass:"inputGeneral",model:{value:t.tickForm2.tMarketPrice,callback:function(e){t.$set(t.tickForm2,"tMarketPrice",e)},expression:"tickForm2.tMarketPrice"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"库存量:"}},[a("el-input-number",{staticClass:"inputGeneral",attrs:{min:-1},model:{value:t.tickForm2.tStock,callback:function(e){t.$set(t.tickForm2,"tStock",e)},expression:"tickForm2.tStock"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"周几有效:",prop:"tEffectWeek"}},[a("el-checkbox",{attrs:{id:"checkAll"},on:{change:t.handleCheckAllWeek},model:{value:t.checkWeekAll,callback:function(e){t.checkWeekAll=e},expression:"checkWeekAll"}},[t._v("全选")]),t._v(" "),a("el-checkbox-group",{on:{change:t.getSelectWeeks},model:{value:t.tickForm2.tEffectWeek,callback:function(e){t.$set(t.tickForm2,"tEffectWeek",e)},expression:"tickForm2.tEffectWeek"}},[a("el-checkbox",{attrs:{label:"周一",name:"tEffectWeek"}}),t._v(" "),a("el-checkbox",{attrs:{label:"周二",name:"tEffectWeek"}}),t._v(" "),a("el-checkbox",{attrs:{label:"周三",name:"tEffectWeek"}}),t._v(" "),a("el-checkbox",{attrs:{label:"周四",name:"tEffectWeek"}}),t._v(" "),a("el-checkbox",{attrs:{label:"周五",name:"tEffectWeek"}}),t._v(" "),a("el-checkbox",{attrs:{label:"周六",name:"tEffectWeek"}}),t._v(" "),a("el-checkbox",{attrs:{label:"周日",name:"tEffectWeek"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"投放市场:",id:"tfCity"}},[a("div",{staticClass:"tfcity relative"},[a("div",{staticClass:"el-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectCityArr.name,expression:"selectCityArr.name"}],staticClass:"el-input__inner",attrs:{autocomplete:"off",placeholder:"请选择城市",type:"text"},domProps:{value:t.selectCityArr.name},on:{click:t.showtfCity,input:function(e){e.target.composing||t.$set(t.selectCityArr,"name",e.target.value)}}})])])])],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"票价简介:"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.tickForm2.tIntroduction,callback:function(e){t.$set(t.tickForm2,"tIntroduction",e)},expression:"tickForm2.tIntroduction"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt60"},[a("div",{staticClass:"p10 border pb30"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--选择单票--")])]),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:t.tableData3,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0==e.row.tStatus?"有效":"无效"))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票价名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"占座数量",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{min:0},model:{value:e.row.sets,callback:function(a){t.$set(e.row,"sets",a)},expression:"scope.row.sets"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"门市价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tMarketPrice))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"周几有效",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterEffectWeek")(e.row.tEffectWeek)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"限制类型",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterLimitType")(e.row.tLimitType)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"限制条件",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterLimitCondition")(e.row.tLimitCondition)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"编辑时间",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("filterTimeFormat")(e.row.updateTime?e.row.updateTime:e.row.createTime)))]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)])])])],1),t._v(" "),t.showcfCityFlag?a("jdy-alert",{staticClass:"alertCityList showtfcity",attrs:{title:"投放城市选择"},on:{closeAlert:t.closecfCity}},[a("div",{staticClass:"showtfcityaa"},[a("div",{staticClass:"showtfcityaa-scroll"},[a("div",{staticClass:"showtfcityaa-i"},t._l(t.proviceArr,function(e,i){return a("div",{key:e,staticClass:"showtfcityaaa"},[a("div",{staticClass:"showtfcityaaa-head plr10 clearfix"},[a("span",[t._v(t._s(i))]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 allSelect",attrs:{size:"small"}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"hsbtnbg2 fright mt15 mr10 allCancel",attrs:{size:"small"}},[t._v("取消全选")])],1),t._v(" "),a("div",{staticClass:"showtfcityaaa-content plr10 clearfix"},t._l(e,function(e){return a("span",{key:e.id,class:{"showtfcityaaa-span":!0,active:-1!=t.selectCityArr.name.indexOf(e.name)},attrs:{dataId:e.id}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"hide"},[t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.id,staticClass:"taCountry"},[t._v(t._s(e.type))])}),t._v(" "),t._l(e,function(e){return a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.id,staticClass:"taProvince"},[t._v(t._s(e.pName))])})],2)])}))])]),t._v(" "),a("div",{staticClass:"alertfoot1 clearfix"},[a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.closecfCity}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.removeAll}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.selectAllAll}},[t._v("全选")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:t.saveCC}},[t._v("保存")])],1)]):t._e()],1)},staticRenderFns:[]}},1378:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-resources fleft"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"resources-tab"},[a("div",{staticClass:"fright"},[a("el-button",{on:{click:t.goback}},[t._v("返回")]),t._v(" "),t.readOnly?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)]),t._v(" "),a("div",{staticClass:"jdy-table jdy-table-padding"},[a("table",{staticClass:"table-custom",attrs:{cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",[a("th",{staticStyle:{width:"150px"}},[t._v("产品名称")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v("\n                                "+t._s(t.productCostingTitle.productName)+"\n                            ")])]),t._v(" "),t._m(0),t._v(" "),a("tr",[a("th",[t._v("核算人数")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入人数"},model:{value:t.productCostingTitle.peopleNum,callback:function(e){t.$set(t.productCostingTitle,"peopleNum",e)},expression:"productCostingTitle.peopleNum"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.peopleNum))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入说明"},model:{value:t.productCostingTitle.peopleNumExplain,callback:function(e){t.$set(t.productCostingTitle,"peopleNumExplain",e)},expression:"productCostingTitle.peopleNumExplain"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.peopleNumExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("领队/全陪是否免")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[t.readOnly?t._e():a("el-radio",{staticClass:"radio",attrs:{label:1},model:{value:t.productCostingTitle.isExempt,callback:function(e){t.$set(t.productCostingTitle,"isExempt",e)},expression:"productCostingTitle.isExempt"}},[t._v("是")]),t._v(" "),t.readOnly?t._e():a("el-radio",{staticClass:"radio",attrs:{label:0},model:{value:t.productCostingTitle.isExempt,callback:function(e){t.$set(t.productCostingTitle,"isExempt",e)},expression:"productCostingTitle.isExempt"}},[t._v("否")]),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.isExempt?"是":"否"))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{attrs:{placeholder:"输入说明"},model:{value:t.productCostingTitle.isExemptExplain,callback:function(e){t.$set(t.productCostingTitle,"isExemptExplain",e)},expression:"productCostingTitle.isExemptExplain"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(t.productCostingTitle.isExemptExplain))]):t._e()],1)]),t._v(" "),a("tr",[a("th",[t._v("价格适用期")]),t._v(" "),a("td",{attrs:{colspan:"5"}},[a("el-date-picker",{attrs:{disabled:t.readOnly,type:"daterange",placeholder:"选择日期范围"},on:{change:t.dateRangeChange},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}})],1),t._v(" "),a("td")])]),t._v(" "),t._l(t.tableData,function(e,i){return a("tbody",{key:i},[a("tr",{on:{click:function(e){t.getIndex(i)}}},[a("th",[t.readOnly?t._e():a("el-button-group",[a("el-button",{on:{click:t.inputdesc}},[t._v("-")]),t._v(" "),a("el-button",{on:{click:t.inputadd}},[t._v("+")])],1)],1),t._v(" "),a("th",{staticClass:"sec"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("数量")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("单位（人/团）")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("单价")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("小计")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("备注说明")])]),t._v(" "),a("tr",[50!=e.categoryId?a("th",{attrs:{rowspan:e.listSize+3}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e(),t._v(" "),50==e.categoryId?a("th",{attrs:{rowspan:e.listSize+2}},[t._v("\n                                "+t._s(e.categoryName)+"\n                            ")]):t._e()]),t._v(" "),t._l(e.productCostingCategoryDetailList,function(e,s){return a("tr",{key:s},[a("td",[t.readOnly?t._e():a("el-input",{model:{value:e.content,callback:function(a){t.$set(e,"content","string"==typeof a?a.trim():a)},expression:"tdata.content"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.content))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{on:{change:function(e){t.getTotalCell(i)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",t._n(a))},expression:"tdata.amount"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.amount))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-select",{model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"tdata.unit"}},[a("el-option",{key:1,attrs:{label:"人",value:1}}),t._v(" "),a("el-option",{key:2,attrs:{label:"团",value:2}})],1),t._v(" "),t.readOnly?a("span",[t._v(t._s(null!=e.unit?1==e.unit?"人":"团":""))]):t._e()],1),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{on:{change:function(e){t.getTotalCell(i)}},model:{value:e.unitPrice,callback:function(a){t.$set(e,"unitPrice",a)},expression:"tdata.unitPrice"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.unitPrice))]):t._e()],1),t._v(" "),a("td",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.amount*e.unitPrice,1))+"\n                            ")]),t._v(" "),a("td",[t.readOnly?t._e():a("el-input",{model:{value:e.remark,callback:function(a){t.$set(e,"remark","string"==typeof a?a.trim():a)},expression:"tdata.remark"}}),t._v(" "),t.readOnly?a("span",[t._v(t._s(e.remark))]):t._e()],1)])}),t._v(" "),50!=e.categoryId?a("tr",[e.categoryId>=50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i+1)+"\n                            ")]):t._e(),t._v(" "),e.categoryId<50?a("td",{staticClass:"sec"},[t._v("\n                                合计"+t._s(i)+"\n                            ")]):t._e(),t._v(" "),a("td",{staticClass:"sec",attrs:{colspan:"3"}}),t._v(" "),a("td",{staticClass:"sec"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(e.subtotal,1))+"\n                            ")]),t._v(" "),a("td")]):t._e(),t._v(" "),50==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                接待部分合计（1-6项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum1_6,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                活动部分费用合计（7-9项）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum7_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e(),t._v(" "),20==e.categoryId?a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                以上费用小计（1-9项）\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.sum1_9,1))+"\n                            ")]),t._v(" "),a("th")]):t._e()],2)}),t._v(" "),a("tfoot",[a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                成本单价（人/团）\n                            ")]),t._v(" "),a("th",[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.costSingle,1))+"\n                            ")]),t._v(" "),a("th")]),t._v(" "),a("tr",[a("th",{attrs:{colspan:"5"}},[t._v("\n                                团费总计\n                            ")]),t._v(" "),a("th",{staticClass:"red"},[t._v("\n                                "+t._s(t._f("moneyTwoPoints")(t.total.allTotal,1))+"\n                            ")]),t._v(" "),a("th")])])],2)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",{staticClass:"sec"},[t._v("费用类别")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("项目")]),t._v(" "),a("th",{staticClass:"sec",attrs:{colspan:"4"}},[t._v("价格明细（RMB）")]),t._v(" "),a("th",{staticClass:"sec"},[t._v("报价说明")])])}]}},1380:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content fleft newuserList"},[a("div",{staticClass:"fleft comList clearfix"},t._l(t.tableData,function(e){return a("div",{key:e,staticClass:"listPart"},[a("div",{staticClass:"fleft"},[1==e.type?a("div",{staticClass:"img_titel_scheme"}):t._e(),t._v(" "),0==e.type?a("div",{staticClass:"img_titel_demand"}):t._e(),t._v(" "),a("div",{staticClass:"img_line"})]),t._v(" "),a("div",{attrs:{lass:"fleft clearfix point"},on:{click:function(a){t.getDetail(e.type,e.id)}}},[a("div",{staticClass:"listPart_title"},[t._v("\n                        "+t._s(0==e.type?"方案：":"需求单：")+t._s(t.$route.query.name)+"\n                    ")]),t._v(" "),a("div",{staticClass:"listPart_date"},[t._v("\n                          "+t._s(e.createTime)+"\n                    ")])])])})),t._v(" "),a("div",{staticClass:"fleft userList clearfix"},[a("div",{staticClass:"userList_title"},[t._v("\n                  需求单详情\n                  "),a("el-button",{staticClass:"btnInTab fright mr10 mt10",on:{click:t.goback}},[t._v("返回")])],1),t._v(" "),a("div",{staticClass:"userList_body"},[a("div",{staticClass:"yjk-alertInner"},[a("div",[a("div",{staticClass:"contentTitle"},[t._v("个人定制游基本信息")]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("出发城市：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.startCity))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("目的地：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.destinationCitys))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("出发日期：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.startDate))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("出游天数：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.playDays)+"天\n                              ")])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("出游人数：")]),t._v(" "),a("span",[t._v("\n                                  "+t._s(null==t.demandDetail?"":t.demandDetail.playPeoples)+"\n                              ")])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("人均预算：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.perBudget))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("需求提供：")]),t._v(" "),null!=t.demandDetail?a("span",{staticClass:"serviceArr noticePink"},[t._v(t._s(t.demandDetail.optionalServiceArr[0]))]):t._e(),t._v(" "),null!=t.demandDetail&&t.demandDetail.optionalServiceArr.length>1?a("span",{staticClass:"serviceArr noticeYellow"},[t._v(t._s(t.demandDetail.optionalServiceArr[1]))]):t._e(),t._v(" "),null!=t.demandDetail&&t.demandDetail.optionalServiceArr.length>2?a("span",{staticClass:"serviceArr noticeOrange"},[t._v(t._s(t.demandDetail.optionalServiceArr[2]))]):t._e(),t._v(" "),null!=t.demandDetail&&t.demandDetail.optionalServiceArr.length>3?a("span",{staticClass:"serviceArr noticeGreen"},[t._v(t._s(t.demandDetail.optionalServiceArr[3]))]):t._e(),t._v(" "),null!=t.demandDetail&&t.demandDetail.optionalServiceArr.length>4?a("span",{staticClass:"serviceArr noticePurple"},[t._v(t._s(t.demandDetail.optionalServiceArr[4]))]):t._e(),t._v(" "),null!=t.demandDetail&&t.demandDetail.optionalServiceArr.length>5?a("span",{staticClass:"serviceArr noticeBlue"},[t._v(t._s(t.demandDetail.optionalServiceArr[5]))]):t._e(),t._v(" "),null!=t.demandDetail&&t.demandDetail.optionalServiceArr.length>6?a("span",{staticClass:"serviceArr noticeGray"},[t._v(t._s(t.demandDetail.optionalServiceArr[6]))]):t._e(),t._v(" "),null!=t.demandDetail&&t.demandDetail.optionalServiceArr.length>7?a("span",{staticClass:"serviceArr noticeRed"},[t._v(t._s(t.demandDetail.optionalServiceArr[7]))]):t._e()]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle fleft clearfix"},[t._v("其他需求：")]),t._v(" "),a("span",{staticClass:"inlineblock",staticStyle:{width:"85%"}},[t._v("\n                                  "+t._s(null==t.demandDetail?"":t.demandDetail.otherService)+"\n                              ")])])]),t._v(" "),a("div",[a("div",{staticClass:"contentTitle"},[t._v("销售人员信息")]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("姓名：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.saleName))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("手机：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.salePhone))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("微信号：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.saleWx))])])]),t._v(" "),a("div",[a("div",{staticClass:"contentTitle"},[t._v("游客联系人信息")]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("姓名：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.headName))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("性别：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.headSex))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("手机：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.headPhone))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("微信号：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.headWx))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("邮箱：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.headEmail))])]),t._v(" "),a("div",{staticClass:"contentDiv"},[a("span",{staticClass:"yjk-innerTitle"},[t._v("提交时间：")]),t._v(" "),a("span",[t._v(t._s(null==t.demandDetail?"":t.demandDetail.createDate))])])])])])])])},staticRenderFns:[]}},1394:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"banqiForm",staticClass:"demo-form-inline",attrs:{model:t.banqiForm,rules:t.banqiRule,"label-width":"100px"}},[a("div",{staticClass:"jdy-tab"},[a("a",{staticStyle:{border:"0"}},[t._v("桂林四日游\n                    "),a("span")])]),t._v(" "),a("div",{staticClass:"tripbox clearfix  relative mt60"},[a("div",{staticClass:"clearfix p10 border pb30"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--班期信息--")])]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"班期编号:",prop:"number"}},[a("el-input",{attrs:{placeholder:"请输入班期编号"},model:{value:t.banqiForm2.number,callback:function(e){t.$set(t.banqiForm2,"number",e)},expression:"banqiForm2.number"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出发时间:",prop:""}},[a("el-input",{attrs:{placeholder:"如12:35"},model:{value:t.banqiForm2.goTime,callback:function(e){t.$set(t.banqiForm2,"goTime",e)},expression:"banqiForm2.goTime"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆数:",prop:"carNumber"}},[a("el-input",{attrs:{placeholder:"请输入车辆数"},model:{value:t.banqiForm2.carNumber,callback:function(e){t.$set(t.banqiForm2,"carNumber",e)},expression:"banqiForm2.carNumber"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车座位数:",prop:"seatNumber"}},[a("el-input",{attrs:{placeholder:"请输入车座位数"},model:{value:t.banqiForm2.seatNumber,callback:function(e){t.$set(t.banqiForm2,"seatNumber",e)},expression:"banqiForm2.seatNumber"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"虚拟已售数:",prop:""}},[a("el-input",{attrs:{placeholder:"虚拟已售数"},model:{value:t.banqiForm2.fictitious,callback:function(e){t.$set(t.banqiForm2,"fictitious",e)},expression:"banqiForm2.fictitious"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"对号入座:",prop:""}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择"},model:{value:t.banqiForm2.right,callback:function(e){t.$set(t.banqiForm2,"right",e)},expression:"banqiForm2.right"}},[a("el-option",{key:0,attrs:{label:"不对号入座",value:"0"}}),t._v(" "),a("el-option",{key:1,attrs:{label:"对号入座",value:"1"}})],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"打印班次号:",prop:""}},[a("el-input",{attrs:{placeholder:"如12:35"},model:{value:t.banqiForm2.gonumber,callback:function(e){t.$set(t.banqiForm2,"gonumber",e)},expression:"banqiForm2.gonumber"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"停售时间:",prop:"endTime"}},[a("el-input",{attrs:{placeholder:"如12:35"},model:{value:t.banqiForm2.endTime,callback:function(e){t.$set(t.banqiForm2,"endTime",e)},expression:"banqiForm2.endTime"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"成团人数:",prop:""}},[a("el-input-number",{attrs:{min:1},model:{value:t.banqiForm2.peopleNumber,callback:function(e){t.$set(t.banqiForm2,"peopleNumber",e)},expression:"banqiForm2.peopleNumber"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("jdy-calendar",{attrs:{id:"jdytCalendar"}},[t._v("1232")])],1)],1)],1),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt60"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--票价信息--")])]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.banqiForm.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"适用站点",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.applicableSite))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价类目",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tCategory))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.ticketName))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"门市价",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.rackRate))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"周几有效",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.week))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"库存量",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.inventory))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"预置类型",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.presetType))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"限制类型",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.restrictionType))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"限制条件",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.limitingCondition))]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt30 carboxss"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--车座信息--")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"调整座位数",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"当前车号:",prop:""}},[a("el-input",{model:{value:t.tableData3All.car,callback:function(e){t.$set(t.tableData3All,"car",e)},expression:"tableData3All.car"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新座位数:",prop:""}},[a("el-input",{model:{value:t.tableData3All.seatNumber,callback:function(e){t.$set(t.tableData3All,"seatNumber",e)},expression:"tableData3All.seatNumber"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"border caredit1 tc"},[a("span",{staticClass:"icon3 inlineblock icon3-edit mt25"}),t._v(" "),a("p",{staticClass:"f12 mt010"},[t._v("修改")])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预留座位数",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"选择单位:",prop:""}},[a("el-select",{staticClass:"all",model:{value:t.tableData3All.company,callback:function(e){t.$set(t.tableData3All,"company",e)},expression:"tableData3All.company"}},[a("el-option",{key:0,attrs:{label:"选择单位0",value:"0"}}),t._v(" "),a("el-option",{key:1,attrs:{label:"选择单位1",value:"1"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"预留时效:",prop:""}},[a("el-input",{model:{value:t.tableData3All.time,callback:function(e){t.$set(t.tableData3All,"time",e)},expression:"tableData3All.time"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:"mt10 ml10 carboxss-button"},[a("i",{staticClass:"icon3 inlineblock icon3-stay "}),t._v("预留")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button"},[a("i",{staticClass:"icon3 inlineblock icon3-discharge "}),t._v("释放")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"其他管理",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc"},[a("i",{staticClass:"icon3 inlineblock icon3-suo1 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("锁定车位")])])]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc ml10"},[a("i",{staticClass:"icon3 inlineblock icon3-suo2 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("解锁车位")])])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:" ml10 carboxss-button"},[a("i",{staticClass:"el-icon-plus blue transx07"}),t._v("新增")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button"},[a("i",{staticClass:"el-icon-close red  transx06"}),t._v("删除")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"carboxbb border mt30"},[a("div",{staticClass:"carboxbb-top"},[a("el-row",{staticClass:"tc"},[a("el-col",{attrs:{span:16}},[t._v("可用车辆信息")]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("座位信息")])],1)],1),t._v(" "),a("div",{staticClass:"carboxbb-content"},[a("el-row",[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"carboxbb-table"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData3,"show-header":!1,"highlight-current-row":"",border:"",height:"250"},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{property:"bus",label:"bus",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("BUS")]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"info",label:"信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("MRDTOO1 1号车[适用于任一个选择的日期]")]),t._v(" "),a("div",[t._v("总数："+t._s(e.row.info.all)+"\n                                                            "),a("span",{staticClass:"ml10"},[t._v("已售："+t._s(e.row.info.buyed))])])]}}])})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"carboxbb-right"},[t._l(t.tableData3[t.tableData3All.someIndex].seatSatus,function(e,i){return[a("div",{staticClass:"icon3 icon3-seat inlineblock",class:{"icon3-seat-temporary":1==e.status,"icon3-seat-success":2==e.status,"icon3-seat-lock":3==e.status},on:{click:function(e){t.setSeat(i)}}},[t._v(t._s(i+1))])]})],2)])],1)],1)])],1)])]),t._v(" "),a("el-row",{},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("lineForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.goback("schedule")}}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]}},1395:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:1}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:t.goback}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mr10 mt10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:t.onSubmitGo}},[t._v("下一步")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mt10"}),t._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,inline:!0,"label-width":"100px"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{placeholder:"请选择类型"},model:{value:t.ruleForm.pType,callback:function(e){t.$set(t.ruleForm,"pType",e)},expression:"ruleForm.pType"}},t._l(t.typeList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),t._v(" "),a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{clearable:"",placeholder:"请选择单位名称"},model:{value:t.ruleForm.companyId,callback:function(e){t.$set(t.ruleForm,"companyId",e)},expression:"ruleForm.companyId"}},t._l(t.selectList,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})})),t._v(" "),a("el-input",{staticClass:"jdy-search-edit hasbg mr10",attrs:{placeholder:"请输入产品名称查询"},model:{value:t.ruleForm.pName,callback:function(e){t.$set(t.ruleForm,"pName","string"==typeof e?e.trim():e)},expression:"ruleForm.pName"}}),t._v(" "),a("el-input",{staticClass:"jdy-search-edit hasbg mr10",attrs:{placeholder:"请输入出发地查询"},model:{value:t.ruleForm.startStation,callback:function(e){t.$set(t.ruleForm,"startStation","string"==typeof e?e.trim():e)},expression:"ruleForm.startStation"}}),t._v(" "),a("el-button",{staticClass:"btnInTab",attrs:{type:"primary"},on:{click:t.firstSearch}},[t._v("搜索")])],1)],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("el-table",{staticClass:"all",staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.rowclickHandler}},[a("el-table-column",{attrs:{label:"产品编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.pNo))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"aTitle",label:"产品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"text-align":"left",padding:"10px 0 10px 30px"}},[a("a",{attrs:{href:t.h5Url,target:"_blank"}},[a("span",{staticStyle:{color:"#20a0ff"},on:{click:function(a){t.gotoH5(e.row.id)}}},[t._v(t._s(e.row.pName))])]),t._v(" "),t._l(e.row.productKeys,function(e,i){return a("span",{key:e.id},[0==i?a("span",[a("br")]):t._e(),t._v(" "),0==e.kColor?a("span",{staticClass:"jl-noticeTitle bkone"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),1==e.kColor?a("span",{staticClass:"jl-noticeTitle bktwo"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),2==e.kColor?a("span",{staticClass:"jl-noticeTitle bkthree"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),3==e.kColor?a("span",{staticClass:"jl-noticeTitle bkfour"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),4==e.kColor?a("span",{staticClass:"jl-noticeTitle bkfive"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),5==e.kColor?a("span",{staticClass:"jl-noticeTitle bksix"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),6==e.kColor?a("span",{staticClass:"jl-noticeTitle bkseven"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),7==e.kColor?a("span",{staticClass:"jl-noticeTitle bkeight"},[t._v(t._s(e.kName))]):t._e()])})],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"templateTitle",label:"电子合同"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(null!=e.row.templateTitle?e.row.templateTitle:1==e.row.offlineSignStatus?"线下签署":"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pDays",label:"天数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pDays))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pContacts",label:"客服"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.pContacts))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pType",label:"产品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.typeList,function(i,s){return a("span",{key:i},[e.row.pType==s?a("span",[t._v(t._s(i))]):t._e()])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pUpdateTime",label:"编辑时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(t._f("dateFormat")(e.row.pUpdateTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pStatus",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.pStatus?a("span",[t._v("已入库")]):0==e.row.pStatus?a("span",[t._v("已发布")]):a("span",[t._v("待入库")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"pSort",label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.pSort))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"companyName",label:"产品所属"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"jl-noticeTitle"},[t._v(t._s(e.row.companyName))])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)])},staticRenderFns:[]}},14:function(t,e,a){var i=a(1)(a(77),a(90),null,null,null);t.exports=i.exports},1400:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer jl-addTrip fleft jl-trip"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"150px"}},[a("div",{staticClass:"jdy-tab"},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("List")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary"},on:{click:function(e){t.onSubmit("ruleForm")}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix border relative mt30"},[a("div",{staticClass:"tripbox-tab"},[a("a",{staticClass:"relative inlineblock fleft",attrs:{title:"",href:"javascript:;"},on:{click:t.toLineInfo}},[t._v("线路信息\n            "),a("span",{staticClass:"absolute inlineblock"})]),t._v(" "),a("a",{staticClass:"relative inlineblock active fleft",attrs:{title:""}},[t._v("行程信息\n            "),a("span",{staticClass:"absolute inlineblock"})])]),t._v(" "),a("div",{staticClass:"tripbox-left tripbox-left-nobg absolute"},[a("el-steps",{attrs:{direction:"vertical",active:1,space:785}},[t._l(t.ruleForm.pDays,function(e,i){return[a("el-step",{staticStyle:{height:"785px"}},[t._v(t._s(e))])]})],2)],1),t._v(" "),a("div",{staticStyle:{padding:"20px 20px 0 0"}},[a("el-row",[a("el-form-item",{attrs:{label:"行程标题：",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入行程标题"},model:{value:t.ruleForm.tTitle,callback:function(e){t.$set(t.ruleForm,"tTitle",e)},expression:"ruleForm.tTitle"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"时间选择："}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":t.pickerOptions,type:"daterange",placeholder:"选择时间范围"},on:{change:t.datetimerange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)],1)],1),t._v(" "),t._l(t.ruleForm.trips,function(e,i){return[a("div",{staticClass:"tripbox-right mt30",on:{click:function(e){t.getIndex(i)}}},[a("div",{staticClass:"hiddens"},[t._v(t._s(i))]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"出发地/目的地：",prop:"address"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.tFromTo,expression:"tripsItem.tFromTo"}],staticClass:"el-input__inner",attrs:{type:"text",placeholder:"出发地/目的地",id:"focusInput"+i},domProps:{value:e.tFromTo},on:{input:function(a){a.target.composing||t.$set(e,"tFromTo",a.target.value)}}})])],1),t._v(" "),a("el-col",{staticClass:"mt7 pl15",attrs:{span:5}},[a("span",{staticClass:"icon2 icon2-i inlineblock icon2-cruise active",attrs:{title:"邮轮"},on:{click:function(e){t.setVehicle(i,1)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-aircraft active",attrs:{title:"飞机"},on:{click:function(e){t.setVehicle(i,2)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-train active",attrs:{title:"火车"},on:{click:function(e){t.setVehicle(i,3)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-bus active",attrs:{title:"巴士"},on:{click:function(e){t.setVehicle(i,4)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-car active",attrs:{title:"汽车"},on:{click:function(e){t.setVehicle(i,5)}}})])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"用餐情况：",prop:"haveMeals"}},[a("el-checkbox-group",{on:{change:function(e){t.getChangeEating(i)}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{label:"早餐"}}),t._v(" "),a("el-checkbox",{attrs:{label:"午餐"}}),t._v(" "),a("el-checkbox",{attrs:{label:"晚餐"}})]}}]),model:{value:e.haveMeals,callback:function(a){t.$set(e,"haveMeals",a)},expression:"tripsItem.haveMeals"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{placeholder:"备注",maxlength:30},on:{change:t.getEatRemark},model:{value:e.tMealsRemark,callback:function(a){t.$set(e,"tMealsRemark",a)},expression:"tripsItem.tMealsRemark"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"住宿情况：",prop:"accommodation"}},[a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","no-data-text":"请输入进行搜索",placeholder:"请选择","filter-method":t.getChangeLive},on:{change:t.pushHotelIds},model:{value:e.phHotelIds,callback:function(a){t.$set(e,"phHotelIds",a)},expression:"tripsItem.phHotelIds"}},t._l(e.hotel,function(e){return a("el-option",{key:e.id,attrs:{label:e.hName,value:e.id},on:{click:function(a){t.changeHotel(e.id)}}})}))],1)])],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"备注",maxlength:30},on:{change:t.getRoomRemark},model:{value:e.tHotelRemark,callback:function(a){t.$set(e,"tHotelRemark",a)},expression:"tripsItem.tHotelRemark"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btnbg fr",on:{click:function(a){t.UniteBtn(e.phHotelIds,e.hotel,e.tHotelRemark)}}},[t._v("同步住宿信息")])],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"游玩景点:"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","no-data-text":"请输入进行搜索",placeholder:"请输入景点名称，拼音码","filter-method":t.getChangeView},on:{change:t.pushScenicIds},model:{value:e.phScenicIds,callback:function(a){t.$set(e,"phScenicIds",a)},expression:"tripsItem.phScenicIds"}},t._l(e.scenicspot,function(t){return a("el-option",{key:t.id,attrs:{label:t.sName,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"简易行程:"}},[a("el-input",{attrs:{type:"textarea",placeholder:"简易行程"},on:{change:t.getEasyTrip},model:{value:e.tSimpleTrip,callback:function(a){t.$set(e,"tSimpleTrip",a)},expression:"tripsItem.tSimpleTrip"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"详细行程:"}},[a("jdy-editor",{attrs:{content:e.tDetailTrip,attr:"tDetailTrip",index:i},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:" "}},[a("a",{attrs:{href:"javascript:;"}},[a("p",{staticClass:"absolute bendip blue jl-picBox",on:{click:function(e){e.stopPropagation(),t.alertTag(i)}}},[t._v("图片库")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.attachs.length<4,expression:"tripsItem.attachs.length < 4"}],staticClass:"jl-localPic"},[a("label",{attrs:{for:"fileUpload"+i}},[a("div",{staticClass:"el-upload el-upload--picture-card",staticStyle:{color:"#20a0ff"}},[a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"fileUpload"+i},on:{change:function(e){t.changecover(e)}}}),t._v("\n                      本地上传\n                    ")])])]),t._v(" "),t._l(e.attachs,function(e,s){return a("div",{staticClass:"jl-upLoadPic"},[a("img",{staticClass:"ifImg",attrs:{src:e}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showPicHover,expression:"showPicHover"}],staticClass:"jl-upLoadPicHover"},[a("i",{staticClass:"el-icon-delete2",on:{click:function(e){t.delImage(s,i)}}})])])})],2)],1)],1)]})],2)]),t._v(" "),t.alertTagFlag?a("jdy-alert",{staticClass:"alertTag",staticStyle:{width:"850px"},attrs:{title:"添加/编辑标签"},on:{closeAlert:t.alertTag}},[a("el-form",{ref:"addTagStyle",attrs:{model:t.addTagStyle,rules:t.rules,"label-width":"90px"}},[a("el-row",{staticClass:"alertTagTop"},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"资源分类："}},[a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{clearable:"",placeholder:"请选择类型"},on:{change:t.getChangeSort},model:{value:t.addTagStyle.sort,callback:function(e){t.$set(t.addTagStyle,"sort",e)},expression:"addTagStyle.sort"}},t._l(t.sortData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择相册名称","filter-method":t.getChangeaName},on:{change:t.getPicList},model:{value:t.addTagStyle.pAlbumId,callback:function(e){t.$set(t.addTagStyle,"pAlbumId",e)},expression:"addTagStyle.pAlbumId"}},t._l(t.picData,function(t){return a("el-option",{key:t.id,attrs:{label:t.aName,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"请输入图片名称"},on:{change:t.getPicName},model:{value:t.addTagStyle.picName,callback:function(e){t.$set(t.addTagStyle,"picName",e)},expression:"addTagStyle.picName"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"btnbg fr addBtn",staticStyle:{"margin-right":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.getSearchPicList()}}},[t._v("\n              查询\n            ")])],1)],1),t._v(" "),a("el-row",{staticClass:"alertTagMain"},t._l(t.photoListData,function(e,i){return a("div",{staticClass:"photoList",on:{click:function(a){t.getChangePicList(e.id,e.pOssName,i)}}},[a("input",{class:"picIndex"+i,attrs:{type:"checkbox"}}),t._v(" "),a("div",{staticClass:"imglist"},[a("img",{attrs:{src:e.pOssName}})])])})),t._v(" "),a("el-row",{staticClass:"alertTagFooter"},[a("el-button",{staticClass:"btnbg fl addBtn",staticStyle:{"margin-left":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.saveToTrip()}}},[t._v("\n            保存到行程\n          ")]),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)],1):t._e()],1),t._v(" "),t.alertTagFlag?a("jdy-alert",{staticClass:"alertTag",staticStyle:{width:"850px"},attrs:{title:"添加/编辑标签"},on:{closeAlert:t.alertTag}},[a("el-form",{ref:"addTagStyle",attrs:{model:t.addTagStyle,rules:t.rules,"label-width":"90px"}},[a("el-row",{staticClass:"alertTagTop"},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"资源分类："}},[a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{clearable:"",placeholder:"请选择类型"},on:{change:t.getChangeSort},model:{value:t.addTagStyle.sort,callback:function(e){t.$set(t.addTagStyle,"sort",e)},expression:"addTagStyle.sort"}},t._l(t.sortData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择相册名称","filter-method":t.getChangeaName},on:{change:t.getPicList},model:{value:t.addTagStyle.pAlbumId,callback:function(e){t.$set(t.addTagStyle,"pAlbumId",e)},expression:"addTagStyle.pAlbumId"}},t._l(t.picData,function(t){return a("el-option",{key:t.id,attrs:{label:t.aName,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"请输入图片名称"},on:{change:t.getPicName},model:{value:t.addTagStyle.picName,callback:function(e){t.$set(t.addTagStyle,"picName",e)},expression:"addTagStyle.picName"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"btnbg fr addBtn",staticStyle:{"margin-right":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.getSearchPicList()}}},[t._v("\n            查询\n          ")])],1)],1),t._v(" "),a("el-row",{staticClass:"alertTagMain"},t._l(t.photoListData,function(e,i){return a("div",{staticClass:"photoList",on:{click:function(a){t.getChangePicList(e.id,e.pOssName,i)}}},[a("input",{class:"picIndex"+i,attrs:{type:"checkbox"}}),t._v(" "),a("div",{staticClass:"imglist"},[a("img",{attrs:{src:e.pOssName}})])])})),t._v(" "),a("el-row",{staticClass:"alertTagFooter"},[a("el-button",{staticClass:"btnbg fl addBtn",staticStyle:{"margin-left":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.saveToTrip()}}},[t._v("\n          保存到行程\n        ")]),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)],1):t._e()],1)},staticRenderFns:[]}},1405:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft noborder jl-schedule jl-information"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:4}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"行程信息",icon:"upload"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("list")}}},[t._v("返回")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.showstatue,expression:"showstatue!=0"}],staticClass:"fright mr10 mt10",attrs:{type:"primary"},on:{click:t.upJia}},[t._v("入库")]),t._v(" "),a("a",{attrs:{href:t.h5Url,target:"_blank"}},[a("el-button",{staticClass:"fright mt10 mr10 ml10",on:{click:function(e){t.gotoH5()}}},[t._v("预览")])],1),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goLast("Ticketprice")}}},[t._v("上一步")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mainbg"}),t._v(" "),a("div",{staticClass:"ticketprice clearfix border relative"},[a("div",{staticClass:"jdy-search jdy-search-bg2 clearfix"},[a("div",{staticClass:"p20 clearfix c5e fleft"},[a("span",{staticClass:"c1f blod"},[t._v("产品名称："+t._s(t.ProductInfo.pName))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("产品编号："+t._s(t.ProductInfo.pNo))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("类型："+t._s(t.productType[t.ProductInfo.pType]))]),t._v(" "),a("span",{staticClass:"pl10 mr10"},[t._v("计调人员："+t._s(t.ProductInfo.createUser))])])]),t._v(" "),a("div",{staticClass:" p10"},[a("div",{staticClass:"inlineblock mr10"},[a("span",{staticClass:"demonstration"},[t._v("查询日期：")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期范围"},on:{change:t.dateRangeChange},model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}}),t._v(" "),a("span",{staticClass:"demonstration ml10"},[t._v("状态选择：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeSelectStatus},model:{value:t.schedulesStatus,callback:function(e){t.schedulesStatus=e},expression:"schedulesStatus"}},[a("el-option",{key:"",attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"正常",value:"0"}}),t._v(" "),a("el-option",{key:"1",attrs:{label:"暂停",value:"1"}}),t._v(" "),a("el-option",{key:"3",attrs:{label:"已过期",value:"3"}})],1)],1),t._v(" "),a("div",{staticClass:"fright"},[a("el-dropdown",{attrs:{"split-button":"",type:"default",trigger:"click"},on:{click:function(e){t.addBanqi(1)},command:t.addBanqi}},[t._v("\n            添加班期\n            "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[t._v("添加班期")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"2"}},[t._v("批量添加班期")])],1)],1),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btnbg",attrs:{type:"default"},on:{click:t.refreshBtn}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"btnbg mr25",attrs:{type:"default"},on:{click:t.alertJournal}},[t._v("日志")])],1)]),t._v(" "),a("div",{staticClass:"jdy-table p10"},[a("el-table",{staticClass:" all",attrs:{data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.rowclickHandler}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[3===e.row.sStatus?a("el-tag",{attrs:{closeTransition:""}},[t._v("已过期")]):a("el-switch",{attrs:{"on-value":0,"off-value":1,"on-color":"#71dc1c","on-text":"正常","off-text":"暂停"},on:{change:t.changeStatus},nativeOn:{click:function(a){t.getRowId(e.row.id)}},model:{value:e.row.sStatus,callback:function(a){t.$set(e.row,"sStatus",a)},expression:"scope.row.sStatus"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"班期编号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sScheduleNo)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"团号",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sGroupOrderNo)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"班期名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sScheduleName)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"出发日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.formatDate(e.row.sCalendar))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"停售时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.getStopSaleDate(e.row.sCalendar,e.row.sLeaveTime,e.row.sStopType,e.row.sStopSale))+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"座位数/车辆数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatTotal)+"/"+t._s(e.row.sCarNum)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已售",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatSold||0)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"成团人数",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sGroupNum)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"虚占",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sShamNum)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"余座",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatLeft)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预留",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatHold)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"锁定",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.sSeatLock)+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"星期",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.WeekDay[e.row.sWeekDay-1])+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"对号入座",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(null!=e.row.sSitType?0==e.row.sSitType?"不对号入座":"对号入座":"")+"\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"105",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"default",size:"mini"},on:{click:function(a){t.editBanqi(e.row.id)}}},[t._v("\n                编辑\n              ")]),t._v(" "),a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},on:{click:function(a){t.delBanqi(e.row.id)}}},[t._v("\n                删除\n              ")])]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.search.pageSize,layout:"prev, pager, next, jumper",total:t.search.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)])],1),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.pid,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e()],1)},staticRenderFns:[]}},1411:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft jl-information jl-List"},[a("el-row",{staticClass:"jdy-content-inner"},[a("div",{staticClass:"jdy-tab"},[a("a",{class:{active:null==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(null)}}},[t._v("全部\n        "),a("span")]),t._v(" "),a("a",{class:{active:3==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(3)}}},[t._v("已入库\n        "),a("span")]),t._v(" "),a("a",{class:{active:2==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(2)}}},[t._v("待入库\n        "),a("span")]),t._v(" "),a("a",{class:{active:0==t.jdytabActive},attrs:{href:"javascript:;",title:""},on:{click:function(e){t.jdytab(0)}}},[t._v("已发布\n        "),a("span")]),t._v(" "),a("el-button",{staticClass:"fright mt10",attrs:{type:"default"},on:{click:t.goAssemblyLine}},[t._v("添加集结产品")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"fright mt10 mr10",attrs:{type:"default"},on:{click:t.updatePage}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"fright mt10",attrs:{type:"default"},on:{click:t.alertJournal}},[t._v("日志")])],1),t._v(" "),a("div",{staticClass:"jdy-search mt20"},[a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{placeholder:"请选择类型"},model:{value:t.searchParams.pType,callback:function(e){t.$set(t.searchParams,"pType",e)},expression:"searchParams.pType"}},t._l(t.type,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.companyIdFlag,expression:"companyIdFlag"}],attrs:{placeholder:"请选择分公司",clearable:""},on:{change:t.getTableData},model:{value:t.searchParams.companyId,callback:function(e){t.$set(t.searchParams,"companyId",e)},expression:"searchParams.companyId"}},t._l(t.BuyerCompanyIdArr,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})})),t._v(" "),a("div",{staticClass:"inlineblock mr10",staticStyle:{width:"305px"}},[a("el-input",{attrs:{placeholder:"产品名称、拼音码"},model:{value:t.searchParams.pName,callback:function(e){t.$set(t.searchParams,"pName",e)},expression:"searchParams.pName"}},[2!=t.companyType?a("el-select",{staticClass:"hasbg",staticStyle:{width:"120px"},attrs:{slot:"prepend",filterable:"",placeholder:"请选择品牌",clearable:"",remote:"","remote-method":t.searchBrands},slot:"prepend",model:{value:t.searchParams.pBrand,callback:function(e){t.$set(t.searchParams,"pBrand",e)},expression:"searchParams.pBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.bName,value:t.id}})})):t._e()],1)],1),t._v(" "),a("el-button",{staticClass:"el-button btnbg el-button--primary",attrs:{type:"primary"},on:{click:t.getTableData}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"jdy-table"},[a("el-table",{staticClass:"mt20 all",attrs:{data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.rowclickHandler}},[a("el-table-column",{staticClass:"list-more",attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.trip.length>0?a("span",t._l(e.row.trip,function(i){return i.tripStartCalendar?a("span",{key:i.id,staticStyle:{display:"block",height:"35px","line-height":"35px"}},[t._v(t._s(i.tripName)+" 行程时间:"+t._s(i.tripStartCalendar)+"--"+t._s(i.tripEndCalendar)+"\n                "),a("div",{staticClass:"fr",staticStyle:{"padding-left":"30px"}},[i.tripStartCalendar?a("el-button",{attrs:{type:"default",size:"mini"}},[a("router-link",{attrs:{to:{path:"/list/supplement",query:{id:e.row.id,isAdd:!1,pDays:e.row.pDays,tcStartDay:i.tripStartCalendar,tcEndDay:i.tripEndCalendar}}}},[t._v("编辑")])],1):t._e(),t._v(" "),i.tripStartCalendar?a("el-button",{staticStyle:{color:"red"},attrs:{type:"default",size:"mini"},on:{click:function(a){t.deleteTrips(e.row.id,i.tripStartCalendar,i.tripEndCalendar)}}},[t._v("删除")]):t._e()],1)]):t._e()})):a("span",[t._v("暂无补充行程")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品编号",width:"100",prop:"pNo"}}),t._v(" "),a("el-table-column",{attrs:{label:"产品名称","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"text-align":"left",padding:"10px 0 10px 30px"}},[a("a",{attrs:{href:t.h5Url,target:"_blank"}},[a("span",{staticStyle:{color:"#20a0ff"},on:{click:function(a){t.gotoH5(e.row.id)}}},[t._v(t._s(e.row.pName))])]),t._v(" "),t._l(e.row.productKeys,function(e,i){return a("span",{key:e.id},[0==i?a("span",[a("br")]):t._e(),t._v(" "),0==e.kColor?a("span",{staticClass:"jl-noticeTitle bkone"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),1==e.kColor?a("span",{staticClass:"jl-noticeTitle bktwo"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),2==e.kColor?a("span",{staticClass:"jl-noticeTitle bkthree"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),3==e.kColor?a("span",{staticClass:"jl-noticeTitle bkfour"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),4==e.kColor?a("span",{staticClass:"jl-noticeTitle bkfive"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),5==e.kColor?a("span",{staticClass:"jl-noticeTitle bksix"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),6==e.kColor?a("span",{staticClass:"jl-noticeTitle bkseven"},[t._v(t._s(e.kName))]):t._e(),t._v(" "),7==e.kColor?a("span",{staticClass:"jl-noticeTitle bkeight"},[t._v(t._s(e.kName))]):t._e()])})],2)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"区域产品所属分公司",width:"150",prop:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.companyName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"电子合同","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(null!=e.row.templateTitle?e.row.templateTitle:1==e.row.offlineSignStatus?"线下签署":"--"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"天数",width:"80",prop:"pDays"}}),t._v(" "),a("el-table-column",{attrs:{label:"客服","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.pContactName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"产品类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.type,function(i,s){return a("span",{key:i},[e.row.pType==s?a("span",[t._v(t._s(i))]):t._e()])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"编辑时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("changeCreate")(e.row.updateTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.pStatus?a("span",[t._v("已入库")]):0==e.row.pStatus?a("span",[t._v("已发布")]):a("span",[t._v("待入库")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"排序",width:"100",prop:"pSort"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{staticClass:"goto-update",attrs:{size:"mini",placeholder:"编辑",value:""},on:{change:t.gotoEditPage},model:{value:t.editType[e.row.id],callback:function(a){t.$set(t.editType,e.row.id,a)},expression:"editType[scope.row.id]"}},[a("el-option",{key:"3",attrs:{value:"3",label:"票价信息"}}),t._v(" "),a("el-option",{key:"4",attrs:{value:"4",label:"班期信息"}}),t._v(" "),a("el-option",{key:"9",attrs:{value:"9",label:"合同模板"}}),t._v(" "),a("el-option",{key:"8",attrs:{value:"8",label:"添加成本"}})],1),t._v(" "),0!=e.row.pStatus&&3==e.row.pStatus?a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},on:{click:function(a){t.uneffect(e.row.companyId,e.row.id,e.row.updateUser)}}},[t._v("出库")]):t._e(),t._v(" "),0!=e.row.pStatus&&2==e.row.pStatus?a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},on:{click:function(a){t.effect(e.row.companyId,e.row.id,e.row.updateUser)}}},[t._v("入库")]):t._e(),t._v(" "),3!=e.row.pStatus&&0!=e.row.pStatus?a("el-button",{staticClass:"red mleft0",attrs:{type:"default",size:"mini"},on:{click:function(a){t.deleteProduct(e.row.id)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1),t._v(" "),t.alertSetkeyFlag?a("jdy-alert",{staticClass:"alertSetkey",attrs:{title:"关键词设置"},on:{closeAlert:t.alertSetkey}},[a("div",{staticClass:"setkey p18 clearfix"},[a("div",{staticClass:"setkey-top clearfix"},[t._l(t.productsKeywords,function(e){return a("span",{key:e.id},[0==e.kColor?a("span",{staticClass:"bkone jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),1==e.kColor?a("span",{staticClass:"bktwo jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),2==e.kColor?a("span",{staticClass:"bkthree jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),3==e.kColor?a("span",{staticClass:"bkfour jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),4==e.kColor?a("span",{staticClass:"bkfive jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),5==e.kColor?a("span",{staticClass:"bksix jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),6==e.kColor?a("span",{staticClass:"bkseven jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e(),t._v(" "),7==e.kColor?a("span",{staticClass:"bkeight jl-keyWords jl-keyWordsLarge",staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName)+"\n              "),a("span",{on:{click:function(a){t.deleteRelation(e)}}},[a("i",{staticClass:"el-icon-circle-cross"})])]):t._e()])}),t._v(" "),a("p",{staticClass:"c1 f12",staticStyle:{margin:"10px 0 0 15px"}},[t._v("当前产品可选标签数为"+t._s(t.setkeyTagsMax)+"，已选择"+t._s(t.setkeyTagsNumber)+"，剩余数量"+t._s(t.setkeyTagsMax-t.setkeyTagsNumber)+"！")]),t._v(" "),a("div",{staticClass:"mt10"},[t._l(t.setkeyTags,function(e){return a("el-tag",{key:e.name,staticClass:"mr10",attrs:{closable:!0,type:e.type,"close-transition":!1},on:{close:function(a){t.handleSetkeyClose(e)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),t._v(" "),a("el-button",{staticClass:"fright",attrs:{type:"primary",size:"small"},on:{click:t.saveSetkey}},[t._v("保存")])],2)],2),t._v(" "),a("div",{staticClass:"setkey-box mt20 clearfix",staticStyle:{width:"625px"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",{staticClass:"alertTagMain jl-keyWordsMain",staticStyle:{height:"200px","line-height":"36px"}},t._l(t.allProductsKeywords,function(e){return a("span",{key:e.id,on:{click:function(a){t.getCurrentKeyword(e)}}},[0==e.kColor?a("span",{staticClass:"jl-keyWords bkone",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),1==e.kColor?a("span",{staticClass:"jl-keyWords bktwo",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),2==e.kColor?a("span",{staticClass:"jl-keyWords bkthree",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),3==e.kColor?a("span",{staticClass:"jl-keyWords bkfour",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),4==e.kColor?a("span",{staticClass:"jl-keyWords bkfive",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),5==e.kColor?a("span",{staticClass:"jl-keyWords bksix",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),6==e.kColor?a("span",{staticClass:"jl-keyWords bkseven",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e(),t._v(" "),7==e.kColor?a("span",{staticClass:"jl-keyWords bkeight",class:{active:t.currentSelectKey==e.id},staticStyle:{display:"inline-block"}},[t._v(t._s(e.kName))]):t._e()])}))],1),t._v(" "),a("el-form",{ref:"newKeywordForm",attrs:{"label-width":"80px",rules:t.rules,model:t.newKeywordForm}},[a("el-row",{staticClass:"alertTagTop"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称：",prop:"kName"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.newKeywordForm.kName,callback:function(e){t.$set(t.newKeywordForm,"kName",e)},expression:"newKeywordForm.kName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"排序:",prop:"lSort"}},[a("el-input-number",{staticClass:"all",attrs:{min:1},model:{value:t.newKeywordForm.lSort,callback:function(e){t.$set(t.newKeywordForm,"lSort",e)},expression:"newKeywordForm.lSort"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"fr jl-TagViewBtn"},[t._v(t._s(t.newKeywordForm.kName||"预览样式"))])])],1),t._v(" "),a("el-row",{staticClass:"alertTagMain jl-keyWordsMainCss"},[a("ul",[a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkone",on:{click:function(e){t.changeColor(0)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bktwo",on:{click:function(e){t.changeColor(1)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkthree",on:{click:function(e){t.changeColor(2)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkfour",on:{click:function(e){t.changeColor(3)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkfive",on:{click:function(e){t.changeColor(4)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bksix",on:{click:function(e){t.changeColor(5)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkseven",on:{click:function(e){t.changeColor(6)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("li",{staticClass:"bkeight",on:{click:function(e){t.changeColor(7)}}})])])]),t._v(" "),a("el-row",{staticClass:"alertTagFooter"},[a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"btnbg fr addBtn",attrs:{type:"primary"},on:{click:function(e){t.saveAddTag("addTagStyle")}}},[t._v("\n                      添加\n                    ")])],1)],1)],1)],1)])]):t._e(),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.pid,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e(),t._v(" "),t.contractFlag?a("jdy-alert",{staticClass:"showtfcity",attrs:{title:"绑定合同模板"},on:{closeAlert:t.closeContract}},[a("div",{staticClass:"alertBody"},[a("el-radio-group",{model:{value:t.tempId,callback:function(e){t.tempId=e},expression:"tempId"}},t._l(t.tempIdGroup,function(e){return a("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.templateTitle))])}))],1),t._v(" "),a("div",{staticClass:"alertFoot"},[a("el-button",{staticClass:"fright",attrs:{type:"primary"},on:{click:t.closeContract}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"fright mr10",attrs:{type:"primary"},on:{click:t.saveContract}},[t._v("确定")])],1)]):t._e()],1)],1)},staticRenderFns:[]}},1418:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft"},[a("div",{staticClass:"jdy-content-inner"},[a("el-form",{ref:"banqiForm",staticClass:"demo-form-inline",attrs:{model:t.banqiForm,rules:t.banqiRule,"label-width":"100px"}},[a("div",{staticClass:"jdy-tab"},[a("el-button",{staticClass:"fright mt10 mr10",on:{click:function(e){t.goback("schedule")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mt10 mr10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmit("banqiForm")}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"tripbox clearfix  relative mt60"},[2!=t.addType?a("div",{staticClass:"clearfix p10 border pb30"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--班期信息--")])]),t._v(" "),a("el-row",{staticClass:"mt30"},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"班期编号:",prop:"sScheduleNo"}},[a("el-input",{attrs:{placeholder:"请输入班期编号",disabled:!0},model:{value:t.banqiForm.sScheduleNo,callback:function(e){t.$set(t.banqiForm,"sScheduleNo",e)},expression:"banqiForm.sScheduleNo"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开始时间:"}},[a("el-date-picker",{staticClass:"all",staticStyle:{width:"100%"},attrs:{editable:!1,type:"date",placeholder:"开始时间",disabled:!0,"picker-options":t.pickerOptions0},on:{change:t.calendarsChange},model:{value:t.calendars,callback:function(e){t.calendars=e},expression:"calendars"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"星期几:"}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择开始时间",disabled:!0},model:{value:t.week,callback:function(e){t.week=e},expression:"week"}},t._l(t.WeekDay,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"班期名称:"}},[a("el-input",{attrs:{placeholder:"请输入班期名称"},model:{value:t.banqiForm.sScheduleName,callback:function(e){t.$set(t.banqiForm,"sScheduleName",e)},expression:"banqiForm.sScheduleName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出发时分:",prop:""}},[[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":{format:"HH:mm"},format:"HH:mm",placeholder:"出发时分",clearable:"",editable:!1},model:{value:t.sLeaveTime,callback:function(e){t.sLeaveTime=e},expression:"sLeaveTime"}})]],2)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"停售时间:",prop:"sStopSale"}},[a("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:t.banqiForm.sStopSale,callback:function(e){t.$set(t.banqiForm,"sStopSale",t._n(e))},expression:"banqiForm.sStopSale"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.banqiForm.sStopType,callback:function(e){t.$set(t.banqiForm,"sStopType",e)},expression:"banqiForm.sStopType"}},[a("el-option",{attrs:{label:"分钟",value:0}}),t._v(" "),a("el-option",{attrs:{label:"小时",value:1}}),t._v(" "),a("el-option",{attrs:{label:"天",value:2}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"虚拟已售数:"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"虚拟已售数",min:0,max:100,controls:!1},model:{value:t.banqiForm.sShamNum,callback:function(e){t.$set(t.banqiForm,"sShamNum",t._n(e))},expression:"banqiForm.sShamNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对号入座:",prop:""}},[a("el-select",{staticClass:"all",attrs:{placeholder:"请选择"},on:{change:t.changeType},model:{value:t.banqiForm.sSitType,callback:function(e){t.$set(t.banqiForm,"sSitType",e)},expression:"banqiForm.sSitType"}},t._l(t.setType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"成团人数:"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:100,controls:!1},model:{value:t.banqiForm.sGroupNum,callback:function(e){t.$set(t.banqiForm,"sGroupNum",e)},expression:"banqiForm.sGroupNum"}})],1)],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt60"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--票价信息--")])]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.ticketList,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"适用站点",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.departureNum)+"个站点")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价类目",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tCategory))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"票价名称",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.tName))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"门市价",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{controls:!1,min:0,max:1e6,disabled:!0},model:{value:e.row.tMarketPrice,callback:function(a){t.$set(e.row,"tMarketPrice",a)},expression:"scope.row.tMarketPrice"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"库存量（-1代表无限制）",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{controls:!1,min:-1,max:1e6,disabled:!0},model:{value:e.row.tStock,callback:function(a){t.$set(e.row,"tStock",a)},expression:"scope.row.tStock"}})]}}])})],1)],1)]),t._v(" "),a("div",{staticClass:"clarfix alertAddProduct2-table pb30 mt30 carboxss"},[a("div",{staticClass:"p10 border pb30 schedule-one"},[a("div",{staticClass:"ticketmanage-title tc"},[a("span",[t._v("--车座信息--")])]),t._v(" "),a("el-table",{staticClass:"myclass",staticStyle:{width:"100%"},attrs:{data:t.tableData2,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"调整车辆数",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:5}},[t._v("\n                       \n                    ")]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:" ml10 carboxss-button mt10",attrs:{disabled:t.canNotModifyCarNum},on:{click:t.addCar}},[a("i",{staticClass:"el-icon-plus blue transx07"}),t._v("新增\n                      ")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button",attrs:{disabled:t.canNotModifyCarNum},on:{click:t.removeCar}},[a("i",{staticClass:"el-icon-close red  transx06"}),t._v("删除\n                      ")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"调整座位数",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"当前车号:",prop:""}},[a("el-input",{attrs:{value:t.currentCar>-1?t.currentCar+1:"",readonly:!0,placeholder:"请选择车辆"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新座位数:",prop:""}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:-1==t.currentCar,placeholder:"请选择车辆"},on:{change:t.seatChange},model:{value:-1==t.currentCar?null:t.currentCarSeatNum,callback:function(e){-1==t.currentCar||(t.currentCarSeatNum=t._n(e))},expression:"currentCar==-1?null:currentCarSeatNum"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"border caredit1 tc",on:{click:t.modifyCarSeatNum}},[a("span",{staticClass:"icon3 inlineblock icon3-edit mt25"}),t._v(" "),a("p",{staticClass:"f12 mt010"},[t._v("修改")])])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"预留座位数",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticClass:"pb10"},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"选择单位:"}},[a("el-select",{staticClass:"all",attrs:{clearable:"",filterable:"",remote:"",placeholder:"请选择单位","remote-method":t.searchCompany,loading:t.loading},model:{value:t.currentCompany,callback:function(e){t.currentCompany=e},expression:"currentCompany"}},t._l(t.companyList,function(t){return a("el-option",{key:t.id,attrs:{label:t.cName,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"预留时效(h):",prop:""}},[a("el-input",{attrs:{type:"number",placeholder:"请输入预留时效"},model:{value:t.temptoraryTime,callback:function(e){t.temptoraryTime=e},expression:"temptoraryTime"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:"mt10 ml10 carboxss-button",on:{click:t.addTemporary}},[a("i",{staticClass:"icon3 inlineblock icon3-stay "}),t._v("预留\n                      ")]),t._v(" "),a("el-button",{staticClass:"mt11 carboxss-button",on:{click:t.releaseTemporary}},[a("i",{staticClass:"icon3 inlineblock icon3-discharge"}),t._v("释放\n                      ")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"其他管理",width:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc",on:{click:t.lockSeat}},[a("i",{staticClass:"icon3 inlineblock icon3-suo1 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("锁定车位")])])]),t._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"carboxss-b tc ml10",on:{click:t.unlockSeat}},[a("i",{staticClass:"icon3 inlineblock icon3-suo2 mt14 mb3"}),t._v(" "),a("p",{staticClass:"mt010"},[t._v("解锁车位")])])])]}}])})],1),t._v(" "),a("div",{staticClass:"carboxbb border mt30"},[a("div",{staticClass:"carboxbb-top"},[a("el-row",{staticClass:"tc"},[a("el-col",{attrs:{span:16}},[t._v("可用车辆信息")]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v("座位信息")])],1)],1),t._v(" "),a("div",{staticClass:"carboxbb-content"},[a("el-row",{staticStyle:{height:"500px"}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"carboxbb-table"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.carList,"show-header":!1,"highlight-current-row":"",border:"",height:"500"},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{property:"bus",label:"bus",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("BUS"),a("input",{staticClass:"sortNum",attrs:{hidden:""},domProps:{value:e.$index+1}})]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"info",label:"信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(t.banqiForm.sScheduleNo)+" "+t._s(e.$index+1)+"号车["+t._s(t.formatDate(t.calendars,"yyyy-MM-dd"))+"]")]),t._v(" "),a("div",[t._v("总数："+t._s(t.carList[e.$index].bSeatsNum)+"\n                              "),a("span",{staticClass:"ml10"},[t._v("已售："+t._s(t.carList[e.$index].seatsSoldNum?t.carList[e.$index].seatsSoldNum:0))])])]}}])})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[t.currentCar>-1?a("div",{staticClass:"carboxbb-right"},[t._l(t.carList[t.currentCar].bSeatsNum,function(e){return[a("el-tooltip",{attrs:{content:t.getTipContent(e),placement:"top",effect:"light",disabled:!(t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString()))}},[a("div",{staticClass:"icon3 icon3-seat inlineblock",class:{"icon3-seat-temporary":t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString()),"icon3-seat-lock":t.carList[t.currentCar]&&-1!=t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString()),"icon3-seat-success":-1!=t.selectedList.indexOf(e)},attrs:{al:""},on:{click:function(a){t.setSeat(e)}}},[t._v(t._s(e)+"\n                          ")])])]}),t._v(" "),t.carList[t.currentCar].bSeatsNum<=0?a("div",{staticStyle:{"margin-left":"100px",color:"red"}},[t._v("请设置座位数")]):t._e()],2):t._e()])],1)],1)])],1)])])])],1)])},staticRenderFns:[]}},1423:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-input-number",class:[t.size?"el-input-number--"+t.size:"",{"is-disabled":t.disabled},{"is-without-controls":!t.controls}]},[t.controls?a("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":t.minDisabled}},[a("i",{staticClass:"el-icon-minus"})]):t._e(),t._v(" "),t.controls?a("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":t.maxDisabled}},[a("i",{staticClass:"el-icon-plus"})]):t._e(),t._v(" "),a("el-input",{ref:"input",attrs:{value:t.currentValue,disabled:t.disabled,size:t.size,max:t.max,min:t.min},on:{blur:t.handleBlur,input:t.debounceHandleInput},nativeOn:{keydown:[function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,"ArrowUp")?(e.preventDefault(),t.increase(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,"ArrowDown")?(e.preventDefault(),t.decrease(e)):null}]}},[t.$slots.prepend?a("template",{slot:"prepend"},[t._t("prepend")],2):t._e(),t._v(" "),t.$slots.append?a("template",{slot:"append"},[t._t("append")],2):t._e()],2)],1)},staticRenderFns:[]}},1425:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-transfer fleft noborder jl-information"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:3}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"行程信息",icon:"upload"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("List")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mr10 mt10",attrs:{type:"primary"},on:{click:function(e){t.onSubmitGo("Schedule")}}},[t._v("下一步")]),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("Trip")}}},[t._v("上一步")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mainbg"}),t._v(" "),a("div",{staticClass:"ticketprice clearfix border relative"},[a("div",{staticClass:"jdy-search jdy-search-bg2 clearfix "},[a("div",{staticClass:"p10 clearfix c5e"},[a("p",{staticClass:"mt10 fleft"},[a("span",{staticClass:"c1f blod"},[t._v("产品名称："+t._s(t.productDetail.pName))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("产品编号："+t._s(t.productDetail.pNo))]),t._v(" "),a("span",{staticClass:"pl10 "},[t._v("类型："+t._s(t._f("filterProType")(t.productDetail.pType)))]),t._v(" "),a("span",{staticClass:"pl10 mr10"},[t._v("计调人员："+t._s(t.productDetail.pContactName))])]),t._v(" "),a("div",{staticClass:"fright"},[a("div",{staticClass:"inlineblock mr10 w300 "},[a("el-input",{attrs:{placeholder:"票价名称"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchTableData(e):null}},model:{value:t.searchParams.tName,callback:function(e){t.$set(t.searchParams,"tName",e)},expression:"searchParams.tName"}})],1),t._v(" "),a("el-button",{staticClass:"mr10 mt10",attrs:{type:"primary"},on:{click:t.searchTableData}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"btnbg",attrs:{type:"default"},on:{click:t.alertJournal}},[t._v("日志")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btnbg",attrs:{type:"default"},on:{click:t.updatePage}},[t._v("刷新")]),t._v(" "),a("el-button",{staticClass:"btnbg mr10",attrs:{type:"primary"},on:{click:function(e){t.addProduct(1)}}},[t._v("添加票价")])],1)])]),t._v(" "),a("div",{staticClass:"jdy-table p10 jl-onlinebill jl-ticket"},[a("el-table",{staticClass:"mt20 all fatherList",staticStyle:{"text-again":"center"},attrs:{data:t.tableData,"default-expand-all":""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticClass:"childBill inner-table",staticStyle:{border:"none"},attrs:{data:e.row.tickList,border:"","highlight-current-row":""},on:{"current-change":t.handleRowChange}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"109"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"on-color":"#71dc1c","on-value":0,"off-value":1,"on-text":"","off-text":""},on:{change:t.setStatus},nativeOn:{click:function(a){t.getRowId(e.row.id)}},model:{value:e.row.tStatus,callback:function(a){t.$set(e.row,"tStatus",a)},expression:"scope.row.tStatus"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票价名称","min-width":"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.tName)+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(1==e.row.tTicketType?"套票":0==e.row.tType?"成人票":"儿童票")+"\n                  ")]}}])}),t._v(" "),0==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.tMarketPrice)+"\n                  ")]}}])}):t._e(),t._v(" "),1==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价/内部集结价","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.tMarketPrice)+t._s("/"+e.row.tGatherPrice)+"\n                  ")]}}])}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"交通类目","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(0==e.row.tTicketType?e.row.tTraffic:"---")+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"始发站","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.departureList)+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"库存量","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(-1==e.row.tStock?"无限制":e.row.tStock)+"\n                  ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"default",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),t.editFare(t.$route.query.id,e.row.id,e.row.tTicketType)}}},[t._v("\n                      编辑票价\n                    ")]),t._v(" "),a("el-button",{staticClass:"red",attrs:{type:"default",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),t.deleteRow(e.$index,t.tableData,e.row.id)}}},[t._v("\n                      删除\n                    ")])]}}])})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"序号",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"inline-block",width:"100%","text-align":"left"}},[e.row.amount>0?a("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(e.row.groupBy)+"（"+t._s(e.row.amount)+"）")]):t._e()])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"票价名称","min-width":"250"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型","min-width":"80"}}),t._v(" "),1==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价/内部集结价","min-width":"120"}}):t._e(),t._v(" "),0==t.productDetail.ascription?a("el-table-column",{attrs:{label:"门市价","min-width":"120"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{label:"交通类目","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"始发站","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"库存量","min-width":"80"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"140"}})],1)],1)]),t._v(" "),t.alertJournalFlag?a("jdy-alert",{staticClass:"alertJournal",attrs:{title:"系统日志查看"},on:{closeAlert:t.alertJournal}},[a("jdy-log",{attrs:{alertJournalFlag:t.alertJournalFlag,journalCurrentData:t.journalCurrentData,journalTotal:t.journalTotal,pid:t.focusPriceId,module:t.module},on:{listenToChildEvent:t.alertJournal}})],1):t._e()],1)])},staticRenderFns:[]}},1432:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-content jdy-resources fleft"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("div",{staticClass:"resources-tab"},[a("div",{staticClass:"fright"},["assemblylist"==t.locationFlag?a("router-link",{staticClass:"routerbtn",attrs:{to:{name:"assemblyAddCostPage",query:{type:0,pid:t.pid,isNull:t.isNull,c_id:t.c_id}}}},[a("span",[t._v("添加成本")])]):t._e(),t._v(" "),"assemblylist"!=t.locationFlag?a("router-link",{staticClass:"routerbtn",attrs:{to:{name:"addCostPage",query:{type:0,pid:t.pid,isNull:t.isNull,c_id:t.c_id}}}},[a("span",[t._v("添加成本")])]):t._e()],1)]),t._v(" "),a("div",{staticClass:"jdy-table jdy-table-padding"},[a("el-table",{staticClass:"all",attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{label:"添加时间","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(t._f("dateFormatTwo")(e.row.createTime))+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作人","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.userName)+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"red mleft0",attrs:{type:"default",size:"mini"},on:{click:function(a){t.getDetail(e.row.id)}}},[t._v("查看明细")])]}}])})],1),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright mt20",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)])])},staticRenderFns:[]}},1433:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.flag?a("div",{staticClass:"jdy-content jdy-transfer fleft noborder jl-trip"},[a("div",{staticClass:"jdy-content-inner-trip"},[a("el-row",{staticClass:"jdy-content-inner-trip border p15 pl25"},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"jdy-content-trip"},[a("el-steps",{attrs:{center:!0,"align-center":!0,active:2}},[a("el-step",{attrs:{title:"线路信息",icon:"edit"}}),t._v(" "),a("el-step",{attrs:{title:"行程信息",icon:"upload"}}),t._v(" "),a("el-step",{attrs:{title:"票价管理",icon:"picture"}}),t._v(" "),a("el-step",{attrs:{title:"班期管理",icon:"picture"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("List")}}},[t._v("返回")]),t._v(" "),a("el-button",{staticClass:"fright mr10 mt10",attrs:{type:"primary",disabled:t.btnFlag},on:{click:function(e){t.onSubmitGo()}}},[t._v("下一步")]),t._v(" "),a("el-button",{staticClass:"fright mt10",on:{click:function(e){t.goback("Line")}}},[t._v("上一步")]),t._v(" "),a("el-button",{staticClass:"fright mt10",attrs:{disabled:t.btnFlag},on:{click:function(e){t.onSubmit("ruleForm")}}},[t._v("保存")])],1)],1),t._v(" "),a("div",{staticClass:"h20 mainbg"}),t._v(" "),a("div",{staticClass:"tripbox clearfix border relative"},[a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"150px"}},[a("div",{staticClass:"tripbox-top"},[a("el-col",{staticClass:"mt10",staticStyle:{"margin-left":"-30px"},attrs:{span:12}},[a("el-form-item",{attrs:{label:"行程天数:"}},[a("el-input-number",{staticClass:"all",attrs:{min:1},on:{change:t.setDays},model:{value:t.ruleForm.pDays,callback:function(e){t.$set(t.ruleForm,"pDays",e)},expression:"ruleForm.pDays"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"tripbox-left absolute"},[a("el-steps",{attrs:{direction:"vertical",active:1,space:785}},[t._l(t.ruleForm.pDays,function(e,i){return[a("el-step",{staticStyle:{height:"785px"}},[t._v(t._s(e))])]})],2)],1),t._v(" "),t._l(t.ruleForm.trips,function(e,i){return[a("div",{staticClass:"tripbox-right mt30",on:{click:function(e){t.getIndex(i)}}},[a("div",{staticClass:"hiddens"},[t._v(t._s(i))]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{staticClass:"onfocusInput",attrs:{label:"出发地/目的地：",prop:"address"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.tFromTo,expression:"tripsItem.tFromTo"}],staticClass:"el-input__inner",attrs:{type:"text",placeholder:"出发地/目的地",id:"focusInput"+i},domProps:{value:e.tFromTo},on:{input:function(a){a.target.composing||t.$set(e,"tFromTo",a.target.value)}}})])],1),t._v(" "),a("el-col",{staticClass:"mt7 pl15",attrs:{span:5}},[a("span",{staticClass:"icon2 icon2-i inlineblock icon2-cruise active",attrs:{title:"邮轮"},on:{click:function(e){t.setVehicle(i,1)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-aircraft active",attrs:{title:"飞机"},on:{click:function(e){t.setVehicle(i,2)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-train active",attrs:{title:"火车"},on:{click:function(e){t.setVehicle(i,3)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-bus active",attrs:{title:"巴士"},on:{click:function(e){t.setVehicle(i,4)}}}),t._v(" "),a("span",{staticClass:"icon2 icon2-i inlineblock icon2-car active",attrs:{title:"汽车"},on:{click:function(e){t.setVehicle(i,5)}}})])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"用餐情况：",prop:"haveMeals"}},[a("el-checkbox-group",{on:{change:function(e){t.getChangeEating(i)}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{label:"早餐"}}),t._v(" "),a("el-checkbox",{attrs:{label:"午餐"}}),t._v(" "),a("el-checkbox",{attrs:{label:"晚餐"}})]}}]),model:{value:e.haveMeals,callback:function(a){t.$set(e,"haveMeals",a)},expression:"tripsItem.haveMeals"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-input",{attrs:{placeholder:"备注",maxlength:30},on:{change:t.getEatRemark},model:{value:e.tMealsRemark,callback:function(a){t.$set(e,"tMealsRemark",a)},expression:"tripsItem.tMealsRemark"}})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"住宿情况：",prop:"accommodation"}},[a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","no-data-text":"请输入进行搜索",placeholder:"请输入酒店名称，拼音码","filter-method":t.getChangeLive},on:{change:t.pushHotelIds},model:{value:e.phHotelIds,callback:function(a){t.$set(e,"phHotelIds",a)},expression:"tripsItem.phHotelIds"}},t._l(e.hotel,function(e){return a("el-option",{key:e.id,attrs:{label:e.hName,value:e.id},on:{click:function(a){t.changeHotel(e.id)}}})}))],1)])],1),t._v(" "),a("el-col",{attrs:{span:6,prop:"tHotelRemark"}},[a("el-input",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"备注",maxlength:30},on:{change:t.getRoomRemark},model:{value:e.tHotelRemark,callback:function(a){t.$set(e,"tHotelRemark",a)},expression:"tripsItem.tHotelRemark"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"btnbg fr",staticStyle:{"margin-left":"10px"},on:{click:function(a){t.UniteBtn(e.phHotelIds,e.hotel,e.tHotelRemark)}}},[t._v("同步住宿信息")])],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"游玩景点："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","no-data-text":"请输入进行搜索",placeholder:"请输入景点名称，拼音码","filter-method":t.getChangeView},on:{change:t.pushScenicIds},model:{value:e.phScenicIds,callback:function(a){t.$set(e,"phScenicIds",a)},expression:"tripsItem.phScenicIds"}},t._l(e.scenicspot,function(t){return a("el-option",{key:t.id,attrs:{label:t.sName,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"简易行程："}},[a("el-input",{attrs:{maxlength:"500",type:"textarea",placeholder:"简易行程"},on:{change:t.getEasyTrip},model:{value:e.tSimpleTrip,callback:function(a){t.$set(e,"tSimpleTrip",a)},expression:"tripsItem.tSimpleTrip"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"详细行程："}},[a("jdy-editor",{attrs:{content:e.tDetailTrip,attr:"tDetailTrip",index:i},on:{input:t.editorUpdate}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:" "}},[a("a",{attrs:{href:"javascript:;"}},[a("p",{staticClass:"absolute bendip blue jl-picBox",on:{click:function(e){e.stopPropagation(),t.alertTag(i)}}},[t._v("图片库")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.attachs.length<4,expression:"tripsItem.attachs.length < 4"}],staticClass:"jl-localPic"},[a("label",{attrs:{for:"fileUpload"+i}},[a("div",{staticClass:"el-upload el-upload--picture-card",staticStyle:{color:"#20a0ff"}},[a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"fileUpload"+i},on:{change:function(e){t.changecover(e)}}}),t._v("\n                      本地上传\n                    ")])])]),t._v(" "),t._l(e.attachs,function(e,s){return a("div",{staticClass:"jl-upLoadPic"},[a("img",{staticClass:"ifImg",attrs:{src:e}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showPicHover,expression:"showPicHover"}],staticClass:"jl-upLoadPicHover"},[a("i",{staticClass:"el-icon-delete2",on:{click:function(e){t.delImage(s,i)}}})])])})],2)],1)],1)]})],2)],1),t._v(" "),t.alertTagFlag?a("jdy-alert",{staticClass:"alertTag",staticStyle:{width:"850px"},attrs:{title:"添加图片"},on:{closeAlert:t.alertTag}},[a("el-form",{ref:"addTagStyle",attrs:{model:t.addTagStyle,rules:t.rules,"label-width":"90px"}},[a("el-row",{staticClass:"alertTagTop"},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"资源分类："}},[a("el-select",{staticClass:"jdy-search-edit hasbg mr10",attrs:{clearable:"",placeholder:"请选择类型"},on:{change:t.getChangeSort},model:{value:t.addTagStyle.sort,callback:function(e){t.$set(t.addTagStyle,"sort",e)},expression:"addTagStyle.sort"}},t._l(t.sortData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"名称："}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择相册名称","filter-method":t.getChangeaName},on:{change:t.getPicList},model:{value:t.addTagStyle.pAlbumId,callback:function(e){t.$set(t.addTagStyle,"pAlbumId",e)},expression:"addTagStyle.pAlbumId"}},t._l(t.picData,function(t){return a("el-option",{key:t.id,attrs:{label:t.aName,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{staticStyle:{"margin-left":"20px"},attrs:{placeholder:"请输入图片名称"},on:{change:t.getPicName},model:{value:t.addTagStyle.picName,callback:function(e){t.$set(t.addTagStyle,"picName",e)},expression:"addTagStyle.picName"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"btnbg fr addBtn",staticStyle:{"margin-right":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.getSearchPicList()}}},[t._v("\n              查询\n            ")])],1)],1),t._v(" "),a("el-row",{staticClass:"alertTagMain"},t._l(t.photoListData,function(e,i){return a("div",{staticClass:"photoList",on:{click:function(a){t.getChangePicList(e.id,e.pOssName,i)}}},[a("input",{class:"picIndex"+i,attrs:{type:"checkbox"}}),t._v(" "),a("div",{staticClass:"imglist"},[a("img",{attrs:{src:e.pOssName}})])])})),t._v(" "),a("el-row",{staticClass:"alertTagFooter"},[a("el-button",{staticClass:"btnbg fl addBtn",staticStyle:{"margin-left":"10px",width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.saveToTrip()}}},[t._v("\n            保存到行程\n          ")]),t._v(" "),a("div",{staticClass:"clearfix"},[a("el-pagination",{staticClass:"fright",attrs:{"current-page":t.currentPage,"page-size":t.pageSizeAll,layout:"prev, pager, next, jumper",total:t.tableDataTotal},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)],1)],1):t._e()],1)]):t._e()},staticRenderFns:[]}},148:function(t,e,a){var i=a(1)(a(489),a(1371),null,null,null);t.exports=i.exports},149:function(t,e,a){var i=a(1)(a(491),a(1277),null,null,null);t.exports=i.exports},15:function(t,e,a){"use strict";(function(t){var e=a(13),i=a.n(e),s=a(42),n=a.n(s),r=a(52),l=a.n(r);!function(e){var a={};a.getWindowStyle=function(){var e=t(window).width(),a=t(window).height();return e<=1200&&(e=1200),a<=600&&(a=600),{width:e,height:a}},a.setStyle=function(){var e=this.getWindowStyle(),a=e.width,i=e.height,s=t("#jdyNav"),n=t("#jdyMain"),r=t(".jdy-main-scroll"),l=t(".jdy-header"),o=s.outerWidth(),c=o-4;s.height(i),n.height(i),r.height(i),n.width(a-o),l.width(a-o),l.css("left",o),t(".jdy-nav-title a").width(c)},a.setNavActive=function(){for(var e=["transfer","resources","system","finance","sale","report","buyerCenter","console","human"],a=location.href,i=0,s=e.length,n=".transfer";i<s;i++){var r=e[i];if(a.indexOf(r)>0){n="."+e[i];break}}t(".navli .current").removeClass("current"),t(n).addClass("current")},a.setAlertStyle=function(e){var a=this.getWindowStyle(),i=a.width,s=a.height,e="."+e||".jdyalert",n=t(e),r=n.outerWidth(),l=n.outerHeight(),o=(s-l)/2,c=(i-r)/2;n.css({top:o,left:c}),n.length&&t("body").append('<div class="alertbgg"></div>')},a.byOneClick=function(e){t(document).one("click",function(){e&&e()})},a.scrollToTop=function(e){var e=e||0;t(".jdy-main-scroll").scrollTop(e)},a.picHover=function(){t(".picwrap li").hover(function(){t(this).find(".picwrap-fc").show()},function(){t(this).find(".picwrap-fc").hide()})},a.selectCity2=function(){function e(){var e=t(t(".showtfcityaaa-content span.station").length>0?".showtfcityaaa-content .station.active":".showtfcityaaa-content span.active"),a=[],i=[];return e.each(function(){var e=t(this).attr("dataId");a.push(l()(e));var s=t(this).text();i.push(s)}),{id:a,name:i}}var a={};return t(".allSelect").bind("click",function(){t(this).parents(".showtfcityaaa").find(".showtfcityaaa-content span").addClass("active"),a=e()}),t(".allCancel").bind("click",function(){t(this).parents(".showtfcityaaa").find(".showtfcityaaa-content span").removeClass("active"),a=e()}),t(".showtfcityaaa-content span").bind("click",function(){t(this).toggleClass("active"),t(this).find(".station").length>0&&t(this).find(".station").toggleClass("active"),a=e()}),a=e()},a.printHtml=function(t){var e=document.createElement("div"),a=t.innerHTML;e.innerHTML=a;var i=document.getElementById("app");return i.style.display="none",document.body.appendChild(e),window.print(),document.body.removeChild(e),i.style.display="block",!1},a.deepCopy=function(t){var e,a=t.constructor===Array?[]:{};if("object"===(void 0===t?"undefined":n()(t))){if(window.JSON)e=i()(t),a=JSON.parse(e);else for(var s in t)a[s]="object"===n()(t[s])?arguments.callee(t[s]):t[s];return a}},a.moneyTwoPoints=function(e){var a="0.00";if(null==e||void 0===e)a="0.00";else{var i=t.trim(e.toString());if(""==i)a="0.00";else if(-1==i.indexOf("."))a=i+".00";else{var s=i.split("."),n=s[1];1==n.length?a=i+"0":2==n.length?a=i:(s[1]=n.substring(0,2),a=s.join("."))}}return a},e.jdyFn=a}(window),Array.prototype.max=function(){for(var t=this[0],e=this.length,a=1;a<e;a++)this[a]>t&&(t=this[a]);return t},Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t}}).call(e,a(2))},16:function(t,e){},17:function(t,e){},18:function(t,e){},199:function(t,e,a){function i(t){a(120)}var s=a(1)(a(105),a(123),i,null,null);t.exports=s.exports},21:function(t,e,a){"use strict";(function(t){var e=a(6);e.default.filter("moneyTwoPoints",function(e,a){var i="0.00";if(null==e||void 0===e)return i="";var s=t.trim(e.toString());if(""==s)return i="";if(-1==s.indexOf("."))i=s+".00";else{var n=s.split("."),r=n[1];1==r.length?i=s+"0":2==r.length?i=s:(n[1]=r.substring(0,2),i=n.join("."))}return 1==a?i:"￥"+i}),e.default.filter("dateFormat",function(t,e,a){function i(t){return parseInt(t)<10&&(t="0"+t),t}if(""==t||null==t||void 0===t||isNaN(t))return"--"==a?"-- --":"";var s=new Date(t),n=s.getFullYear(),r=s.getMonth()+1,l=s.getDate(),o=s.getHours(),c=s.getMinutes(),u=s.getSeconds(),d=n+"-"+i(r)+"-"+i(l)+" "+i(o)+":"+i(c)+":"+i(u),p=o+":"+i(c);return"time"==e?d:"hm"==e?p:d.substring(0,10)}),e.default.filter("dateFormatTwo",function(t,e,a){function i(t){return parseInt(t)<10&&(t="0"+t),t}if(""==t||null==t||void 0===t||isNaN(t))return"--"==a?"-- --":"";var s=new Date(t),n=s.getFullYear(),r=s.getMonth()+1,l=s.getDate(),o=s.getHours(),c=s.getMinutes(),u=s.getSeconds(),d=n+"-"+i(r)+"-"+i(l)+" "+i(o)+":"+i(c)+":"+i(u),p=o+":"+i(c);return"time"==e?d:"hm"==e?p:d}),e.default.filter("addDate",function(t,e){if(""==t||null==t||void 0===t||isNaN(t))return"";var a=new Date(t);return a=a.valueOf(),a+=24*(e-1)*60*60*1e3,a=new Date(a)}),e.default.filter("lineType",function(t){var e={0:"全部类型",10:"周边短线",11:"国内长线",20:"出境长线",21:"出境短线",30:"邮轮",50:"自由行",51:"出境海岛",52:"定制旅游",54:"团队会奖",55:"签证服务",56:"机票预订",57:"酒店预订",58:"单项委托",59:"其他服务",60:"户外拓展",61:"游学/研学",62:"自驾游",63:"全球旅拍",64:"旅游金融",65:"旅游地产",66:"亲子"};for(var a in e)if(t==a)return e[a]})}).call(e,a(2))},219:function(t,e){var a=[{state:!0,departureDate:"2017,7.2",stopTime:"2017,7.3",seatNumber:"",sold:"",regiments:"",effective:"",block:"",reserve:"",locking:"",limitingCondition:"",week:"",accordingly:"",operation:{edit:1,editSeat:1,del:1}}],i={number:"",startTime:"",week:"",car:"",carNumber:"",seatNumber:"",goTime:"",endTime:"",fictitious:"",right:"",peopleNumber:"",sStopType:"1",tableData:[{applicableSite:"",ticketName:"",rackRate:"",colleaguePrice:"",week:"",inventory:"",presetType:"",restrictionType:"",limitingCondition:""}]},s={number:"",startTime:"",car:"",carNumber:"",fictitious:"",seatNumber:"",daying:"",right:"",peopleNumber:"",endTime:"",tableData:[{state:"",applicableSite:"",ticketName:"",rackRate:"",colleaguePrice:"",week:"",inventory:"",presetType:"",restrictionType:"",limitingCondition:""}]},n={number:[{required:!0,message:"请输入班期编号",trigger:"blur"}],carNumber:[{required:!0,message:"请输入车俩数",trigger:"blur"}],seatNumber:[{required:!0,message:"请输入座位数",trigger:"blur"}],endTime:[{required:!0,message:"请输入停售时间",trigger:"change"}]},r={number:[{required:!0,message:"请输入班期编号",trigger:"blur"}],carNumber:[{required:!0,message:"请输入车俩数",trigger:"blur"}],seatNumber:[{required:!0,message:"请输入座位数",trigger:"blur"}],endTime:[{required:!0,message:"请输入停售时间",trigger:"change"}]};t.exports={tableData:a,banqiForm:i,banqiForm2:s,banqiRule:n,banqiRule2:r}},24:function(t,e){},25:function(t,e){},28:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(7),s=a.n(i);e.default={data:function(){var t=this;return{isCollapse:!0,indexUrl:s.a.index_url,param:this.$route.query,titleList:[],titleConditionType:{null:function(e){return console.log(e),console.log(t.param),console.log(!t.param.hasOwnProperty(e)),!t.param.hasOwnProperty(e)},notNull:function(e){return t.param.hasOwnProperty(e)},equal:function(e,a){if(t.param.hasOwnProperty(e))return t.param[e]==a;throw new Error("current page's url has no param with name "+e)}}}},methods:{getUrl:function(t){var e=t.meta.query,a={};if(e)for(var i=this.$route.query,s=0;s<e.length;s++){var n=e[s];if(!i[n])throw new Error("child url named "+this.$route.path+" do not  has param ：["+n+"]");a[n]=i[n]}this.$router.push({name:t.name,query:a})},getTitle:function(t){if(t.title)return t.title;if(t.titles){console.log(t.titles," meta.titles");for(var e=0;e<t.titles.length;e++){var a=t.titles[e];if(this.isConditionsTrue(a.conditions))return console.log(a.conditions," meta.titles"),a.title}return"——"}},isConditionsTrue:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(!this.titleConditionType[a.type](a.param,a.value))return!1}return!0},handleCommand:function(t){"exit"==t?(sessionStorage.clear(),this.$http.get(s.a.api_prefix+"user/logout").then(function(t){console.log(111,t),location.href="/login.html#/"},function(t){})):"personal"==t&&(window.location.href="/personal.html#/")},modifyRoute:function(){var t=this;this.param=this.$route.query,this.titleList=[];var e=location.href;this.$router.options.routes.forEach(function(a){-1!=e.indexOf(a.path)&&t.titleList.push(a)})}},mounted:function(){this.modifyRoute()},watch:{$route:"modifyRoute"}}},29:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){a(10);e.default={name:"nav",props:{navArr:Array},data:function(){return{activeDataF:"",activeArry:[],activeData:"",activeDataTwo:"",isCollapse:!1,showBig:!0,showSmall:!1,showBigLogo:!0,showSmallLogo:!1,fullscreenLoading:!1,companyType:JSON.parse(sessionStorage.loginData).cType,msg:"nav",flag:!1,htmlData:[{mName:"",mEnName:"",mUrl:"",children:[{mName:"",mUrl:""}]}]}},methods:{select:function(e,a){console.log(a),this.activeDataTwo="",a[0]!=location.pathname+"#/"?location.href=location.origin+a[0]+a[1]:this.$router.push({name:a[1]}),console.log(t(this)),console.log(location.href,"aaaaa")},handleClose:function(t,e){console.log(t,e)},handleOpen:function(t,e){console.log(t,e)},changeBtn:function(){var e=t(window).width(),a=t(window).height();e<=1200&&(e=1200),a<=600&&(a=600),console.log(e,a,"8888888888888"),a-163<500&&(console.log(a,"77777777777777"),t(".el-menu").css({"max-height":"400px","overflow-y":"scroll","overflow-x":"hidden"})),0==this.isCollapse?(console.log(0xf6b75ab2bc47200),t("#jdyNav").stop().animate({width:"64px"},300,function(){this.showBigLogo=!1,this.showSmallLogo=!0}),t(".jdy-main").stop().animate({width:e-64+"px"},300),t(".jdy-header").stop().animate({width:e-64+"px",left:"64px"},300),t(".el-submenu__icon-arrow").hide(),this.showBig=!1,this.showSmall=!0,this.isCollapse=!this.isCollapse):(console.log(0x1ed6eb565788e400),t("#jdyNav").stop().animate({width:"200px"},300,function(){this.showBigLogo=!0,this.showSmallLogo=!1}),t(".jdy-main").stop().animate({width:e-200+"px"},300),t(".jdy-header").stop().animate({width:e-200+"px",left:"200px"},300),t(".el-submenu__icon-arrow").hide(),this.showBig=!0,this.showSmall=!1,this.isCollapse=!this.isCollapse)},getHtml:function(){var t=this;this.$http.post(api_prefix+"/user/authorization").then(function(e){var a=e.data.body;t.htmlData=a.menus,window.menuData=a.buttonClassNames,console.log(window.menuData,"window.menuData"),console.log("------------------------------------------1111111111---------------------------------")},function(t){console.log("出错了")})}},mounted:function(){this.activeData=location.pathname+"#/",this.activeDataTwo=location.hash.substr(2),this.activeDataF=this.activeDataTwo,this.activeArry=[this.activeData,this.activeDataTwo],console.log(location,"location"),console.log(this.activeDataF,"this.activeDataF"),console.log(this.activeArry,"this.activeArry"),console.log(this.activeData,"this.activeData1"),console.log(this.activeDataTwo,"this.activeDataTwo1"),jdyFn.setNavActive(),this.fullscreenLoading=!0,this.getHtml(),jdyFn.setStyle()}}}.call(e,a(2))},30:function(t,e){},31:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAKUlEQVQokWNgGCjAyMDAwDB1zdb/MDYawCmeHeLNyESJzaOaRzUPYgAAGWQGFjo1r+kAAAAASUVORK5CYII="},32:function(t,e,a){t.exports=a.p+"static/img/logo-sp.491a13a.png"},33:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABBCAIAAAACIlA6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODY5RUZGMTU2RTgwMTFFNzg5Qjk5RTYxQ0YwRTc5MEQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODY5RUZGMTY2RTgwMTFFNzg5Qjk5RTYxQ0YwRTc5MEQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NjlFRkYxMzZFODAxMUU3ODlCOTlFNjFDRjBFNzkwRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NjlFRkYxNDZFODAxMUU3ODlCOTlFNjFDRjBFNzkwRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pm/2uZkAABc4SURBVHjaXFpLsyTXUc7zqH7d17wkWZZGUki2RxZ2YEdABAYRwYqADUs2bLxhw4qNfwZ7dizZ4Ai8AC9QODDY2CDrZTtsSZaMRu/RvXOf3V3VVeec5MvMU91XXI1m+lZXncqTjy+/zDzuFx/+lOTHETHjH+eI8Utx8it+kQulcHA88QW/FWYn1+TDxLMnLnofflgXapz8YTwuy23Xlf/wOXp92Nk39RHWNbGgfOkcc7HlWF+dCukV572+HYuIcLjbe3uY9CpuJlmHSe/3jiYBV4rDjSqPCsdB9ue83mT/TryLZO90uhMVnciTa4Lzjp29j21XWM7RKKDu1Nn99iCWiAH7pFRcLro3/So6zvIpF1d3iS9kxyzKlh9IADk854IVSW7G4wHLUVabiBRORWg8NSauvF7+ESMwx+CgYG/yqLzeXuRUmfK/6r2wWUzNTvVblR1SNtGlTENhE7pQ3RvuxcZVaHKqC3lWHnAZkorPqEE85HPFm9m5OkIDHZuU1dW46H4mwUNb+A2Gxm2+6n98Jxc3btO0C5vLo2yrFH1DMS9r1BvgLdGrmaotS8Z+fd2q3ghPouyp+i3nLNvwHGCI8SndLVzFtG6WVkUyT5vgXRa3YjVK9Sx5pVe/9uKp3uTHJ5adiTJF6qLrOzEjUdUhoiV4jrpHrGpxIoHlqoXkFdB8xApFrCGLqh2imsGpEmwxbN1UqDYVoYIX3UPFRQ1aFVw9VcIRsqoT0ujUqm3vzHpZFZbUOn4MZQtcEcmVVL1K3lhUsBE4IKesk+ojpahiSqivrlEGCRpfP9vWC5coCvSqXzUlWbQQ/DuoboEKdG0R1VGFExafrEBmmh99tdpffNrtopWqixddCMvLnlVmNjSBY+T6rFyRV0VFhPEusrgJ8ilvX1OyAEUTDS1UgTzqr6rEYk6lh5vKDhG7olfIkjNXqdVYUSFZhQW0waHtxYYLAs/Z7aJG8CDspFOXqZ6qkCfhxj5A8fic9UaNpiIST0IYg15MOoaaG4HM3lk909UYEPVjLR9oyMXWgbcK5JkQXncl7l/D3wUHEcvWNLJFXy3qxtAI6q0Wxfb6Ru4xqLCNq46DaUOMbduUr4rgLNy7xr1ZvFTgUZWzgSLughMm2X8mV9Gj2PZd/aAmFLfJ+nxFKfyLbVyzpLzG12QHkxfzby/LVMAV8zE1k6gOUh2spkAPKPQiswpenVkFxVI5Z5FPpLUcIFYOHkKJXwAbcoX6GgcGgJLfJO9swUojWzPlLveamusGyGDY1yQ6ygHJLEUqouPFPpccQ/DwFmdYX8Y8VmmEfTmkAQnNFUtfxd6CxbAZ9ekRLkS/VXr5LWj+q+uxYIEazLiHCk2GA/K8iWuQNcK3LCUaKcm0KZdKgcQQS1MtV0euASJoMaYEQtRCspws71YBVQOAJjFsUT8UXPI1rtRbxItMQtGTZg7deBkhSkHYKA7+AM4qPdLMhtWDqLNU0FPTi8DB0TUI2mLZzoJ1UTEXe82lpjZNNmBNcI/k7Vcx/ahFydVFSJVynRrCxLsEKCtScCPS1FxsPqB3lQyCFLwmf8cWl15yiuJ4dQg3ipsUHwPc1RKgG7EwQKtDtvjVH3iOvFqYm/INFUt8QHiFGrqoY4qOnTq0F18qvt5cTFcGnnZP3YSxFl1h1IVYSfBRnChvnxJZy5W6177KuXR1P8WYSYVVvaimzhInskTdRd6CkWJoUVyvkC8ycVbD+SA+il+ChqXEfzFVer9jaLKNYABWodeyBRdjwGoZeHBLs+fd9CsUjihfUPcWbd4iv9DNFTUkDFXU/5KmSMCOosc1UipSeFUy3Mb5Sq8gezA25GhKXUexz/GoGbISO9O3acJtyaX8FFeVb16qeWAk+CrzFc1eoMW3qpOE27T3h0h/kNuFfTamyjWk7EVmPuQaxVWWVAe4t88ARG8X5W4h+ypWPnRrCPCf7Zd+0L2AAJlQh4zrci9M0LOvpKhoGs5K93MtgljFrcVK0ZywIT+n+Tfo8z9u/g3nJlQ2Ip4CmppfELo+i4h3Y7pTZGC7rlsSD64EXwNxQe0nw42fds9+zDcyu1c2z704f5NoQOr0YLni5xODwroOaYyIrvzoqZmMqIgBBid+vLcVtzJkXAx7lE5ZC53xuq3JFr1RPXUbN9vCTei+OFKp8HDg1x/lR/+1+/pQ8Lnryb+dHv9S+mzhVq+ne5HSV+M7N8Oqp7nFkMZSAnyoW2rkicFCZWaGD3AP+DT0ff2nrOW6U/aC9Gp3S7wl5po7FadVMDcCZgUjyZTZnrjpVw/K0UvDPfx+4DfC44hnbvNGeg42P3P7XYmFmhenr4WyTm5q/FvioMLz6Mfygate5IVX1L1Cixe3YSD/4Eq+onAIXyVXanHCwju0xpZbojqulhJkGDuWQwjEgJqF9mjzfrr5/eFrGzeDTwsp1+2Dibc0HRzvUTv37qN0+zebe1+evCGA4Rp1YiSAQEboVd+Cx87qd2PLU2pflR1Mv07hBpdz1/6c2tcEPcDyDclg8ZwdgsTtUo8QJlL0g8oXLk0odxxWWqHiqwPfvjHc/d7ma/Cwu7FDcihGvpCaCy18qjkAdaRv3013F759Irw1yAudxKivRFz7EBKgKGYqItRye0rrn9HmbQSg4zXlS/J7eJd6lK4tDwkr1fJUtg5wiwvupi63ArrlAzr8hA/u+sun/ZmmqOFX/VP/kr6GxffcZtCK0iBXinUambgxIaEA/ZvD80CMJ/2vB5o34p2zAiio8cN52ET8OhaF1Yn9grlzZYn0R2Ffvxm2vFpdY2OkRci9k95GfCvfhKB/5N5/nb/4z+n5FU2+6Jcvhvu3adXx9AfpHoTb930S/9KNj0Gca94Zc6AoHKl7+G368s3mZM8fn+YnF76fhSsVoslu4mFlpIimMdrqtpRSlNqQGWfXSxCYLeB6QjaBUD3lyW82z5xi49/52SsPee9pd7YkaCXMaOg4dtRA87dCnrkhkoRjUfsd+FqxmFMeBVB+owVyHfB5I6KinCxct++Wx+XOzA/PTD+b0NWCLqb+jIGJ3JI0YGZKLg2yuPIxJeeqhWxshodNyUkIlueuv/WD1bNvDgcrJLaBwh23fkD7M057rhfhfJ5RApVtsDWpCyxEhdTUrpkuja30TBMakde5oTCeh6CrMrmkxxrfr3J4b3hq0TRzvthPD9fu4AZ9fJBPQ5i4eCiVPsH0vRKmHt7oaBAncfuFp30OhfqmySi13lnt/7h96tyFOXV4c2yUYCzkASWkY3ms/a9riUrZWpI2jbqIZmxIiSqSxkYH7LkpNPVQeZb+k0Jpn/I+cN1PHtBTuPWq3JhTPhjaI2qloJGGnPToqPRAYsiNwBl4inWANc3UQ+c/OY2vtSDhA3BslbQDIRRBYdWY2NgBkh/kumJcU5WZ5ApNnOU8uTToSxopy4oVOxvmTXEzaTtoeaZZ+GLgG02CANrDwj2uG+br7G81l7PYovKUqkgo8IxonsTX08xn4GUk9+ur5pWW92OP8n61EVSaoE5TaT0bdGufRBBHU0xWV/a1byGkpReb1AoU9+fCLYQOO56Eq+tcJkqbt22FvvBFdofOMpkURNDGVW4GvnWbL+dhnUUYCQ5YaQ+kJIdPhngx+I8G/2Dw+5EnzOte1kGOaXOJhgCs2Q9wMhGfKtoNkwBM7Kbeykq5DTkcbtRodtJ8BH/gQdoDDmBqHVRYY828rxTRPA1O2md3wXTYSD/O0uXUl4H8p/2Nx5rprcmVk8qfLobw8jIc9/5hdoNG6CLQlPm4zceprEvutd6WfnEvZIcOQwE+XOFudpVGwUczT922bSCytoUnoaZ8L01YKNtP/OfaW6J+kgfT2Ifx0jh0Zz3vBVpEpdWo0pEpQvhtN30w8J1mdTa411fNg4GmgfaiWyiJXg38XpdOUlG3Yalt8AcweBD4sYbnwi35ZnGf9K6TagYsD54VM6WwbTnDZUnaZNJ3Mbmd6zJ4iJsGsZX1FBGfV9JY8Y2WNyM5E3Z5manLZR7dPLhFCO+27VstqEFA0rGe6u2JhMo65zbx1cAnfWq5NAB3cU9pkcCXxT1ux3IYQI0RVUgA/NS03N+4jVBtaXx0hfb8mLwEQMT6h87qWeuO0bJIjyZoUakdUXGti8JH5Brv8lhhW1sBK2ykb+XeXq7f7daz4GfSluWLVC5LgXe1KXepDKW2PSa72l4kRnke4QlYt6/BZnIrMhdnvXKw0BlnP5JAaB3Wn8nW2Xw/qO4vE92YVODB2kE7PedZ5N6TLotVi+qOROcpfdB2x30/lzYIfZzTac5XGXxGMCxoFzE6vtZVJU2KAFDqNjlilZk2arUykBYtfDq7OlfAdYS2KFs6igKOXl7Dy8w3A/mK0brtAg3RQeNzLW9JO2F0kXFzgiIAVTMPpMifdt3xIHo8iOEy5+NNXionhANEre+NYGnXyjrI1pgk5EdEyT4I02qT3hvK45MirVn1yavkEX/SsbInCvwYqago9XLGk6F+AOy+Dl2whwwmxoRwWSeaSd+fJx7Fv3u4GY67HubGBo6mYT/6k2E4TeCG0o9cp3ShAwJpFrOvkwfrpFuCk1YYSbs+86ZnePnK+xMouuuGjwEgAz8xLZeJHyYI7SAWdBNimET8JaS2k3j1momkGxacu8pa4ucB/qfNMmQfOmMBqUWEmw2rVDpraYuJ6KzN75TNFZJwsAmLPAT1S4dSEivzqFK8opFhhRRZ68QnQzlJ7jS7U/YX8OfuMl60aTGL76zpf9fukVmUAt0X68ukPg9DboILoFhQO/iTFrqbxEPK+PuCeM9LtQZja69S42/DAKwmIjVynwGuBelAeqTEqyyzEY7CjRG0WDlKXSmJttOuEN4bimTIVaEPN/wgueOBLxioIGnOxbi/Wd7qz+N/nAwJ3iKkk55YxHuH8dZEfHUqbWatw+Hi0hxOHw5IxSCCLmXrNQpwrBywUjAj1zJKSs5PWqQuWATlB/bDbuysNtrwgyZD8Uj+fSogfqhgPyuSekS7jGJG4vhhkWAYhDkKMEylJRVmqbvZnYlaL2v8iQreXQ73l8OeqBuMws0iIY80+sIJlzvRPTGnIxaiATKdFBA3IhMskK0RDq23UG2RpAMQnE38JJgKxTUBCEm4oTsjPoYWi3uYqdVGWKNFozYZxLmjzoSmdSiIijDG3B+tTxBXQwpR1VqnevtBgHajXSH5a6i9awuRvehvrf2z+/T0HHUsn/XgD1knINK39pFXgNjibno+snYbSQXttf/Qe74sfF48NHrJ7qqIrNZzWNTuYdG8xLWzBsV4JZDISIqfN9pTRB4qaKTWaDzTBpKCDPDg2rew4bA10STJgWJ/kOh+z0eTdMOXp6fh7jzi4vs9Hw++9W4TxaB7mb6AUlX9BGsOA+ioWyJxBtpI01A4Av7sbWcoNiFyjq5Pg5yvkyBJcXR0eerbtpf4JKs2au/XZNRGTgVHSzgwDhAwKymdCymkboj+0D37yPRm9P/26frnVwPwBN82g2smvPb0dvJZR8C2plYe5BOyvcrgZTKiotXJ0Ng/GGeNpc4UdUbs9y9PY7tOiAKbJWPb58ozrNXurWilbA0G4TTeIV88fRC+uIi3ZhHoMRc2E/Dh/rL97oMVuPIzexHRthxKn2nT0t5Ualr2u9J12zWXmm9QBXnrhWoXadedrjdqZ10cpKDubi/m64scwliNClDGP7s7ud8J+5x5IJQNOME3JMPdnPqnDiZP7vlHZ+EgKnetnW0+25RZbP7q6UNcL0JaeJ3lz+tn3Y+OWyhyMQWFEs6kVEtm6UUbnrWNxbV6Y96ONK1atMaLoAKCb7ZZ7XfnHNU6YxEtan3zo5dfW0WQ5m8euR+eulcv5U1HIT835ZsNAdJ/sRJtgGTHcSSqHS7JL15KXVD+2rpHsKNy+a+TzS/P++PN8DBnbWgLQ9LX2fEHWM8bksTquW7LA922rweE6NeHyxOl7bHo6Mk2Jo2nH//2f24JMLmffLR8/HAWZrP3lunJSQFZLaqO15bh9TZoH0y62bXnp9WUYjMwB18JLZVaOMj07ZbPj4f+vRV/2qUl8WXmM2RHCYayzEIJkTuuUlkh+9SRLp4VubKi2NEkHvarvfUpWW9mOxQE1CYHLhGPphFm/btXPvuHXx5/85HFd37/sT95fHHS0We9NiOc++ZC5qWvt8hTIOYlWtzKWQG20xDLIo0m+cqDG9EjLr2wyDeif25BwgXV2MpHpIUIzrMEVxbIk1qhSyiiJBjazOegFgTCzT/69OJ8eeqkNyPAKVM4OboBidkGTu4fX/vR379x/MP3L28vwrLHi93ffOPRv3z+NtjJoAchxJRUPujDq23AK/eDElebnOgUyIKt0YnH7VC+tT+gsG2Lq1UaV+NI1HspEyd6CKKRspfDdvSiRrszi9999+Sv//s+XOL2rPE687BMUW9SoAj/fu9PkQXvHk3nTTjEfd699MEKoPG7jy4GnaUkxZ0vTEAz+MPeazvaqmc/nrhgaLrVOczv7eUjYR1W2+sAxz6obKlIyKqa3WVyF2AvmS4SMrb+WvjhQIML89DkgU5X6byDEbhDTZCFwLRgkbmgUHJ/+9IPf3q8QVl/1Egf46LPXzls/vyJ2TNHU+t9lywcGhtd+PJO519eycQXBRxEx+tfmPEXmvLz1gNtvjIrdydS6QiLcCXUcdDnDgbVs0raAddKmq6NxwSdkHcPoj9uh3cuN2dd2qS8TnkJ2jSkyyGDOfaoU15+79U3Tvt/ut/eXwnr+INHZn9xd37Y+NNNqdA6HgoKQkgYZf2vOr8s0na40/C3FnnhJbZ0WCqERDsH0vEAW4yCM0WjXpLUtge9w2XazRPrQQctfOA/BxM5kZOLDad02q7fga7FB2356tHk21/y3/9wfe+o+ePHZtDZZ22WqB0PUFlXVo4wED0Z6caCf9bSeXa/M0UCkJ5GUM/tR9ySGlE8wRmZbqTnVGeVlu3Izs/UwyG1GUR1FCWmyKh/U++u9VNkiiPpxgnP/N6vXsY6KI8b7TCBdJeRC2wnm+6aclg6kYJZKG9RcQ2S+5zQbAu4/9dKo6oeARDpBYu5dJSiHlJ7V+NpKdKTQ3pCi50dfxDiM+jJIMSVVvvyKRatc4A43Tjfq0dzxqHG9em1MZKVKu+Wlw4YaX2erZuja1t/ajS3fZbxSSo08mry9QDKeHTExpSCKhNh7vXVVtvXTqp1rGxqFZPAipaozm2nkrsZMI9NaDtQMioxJ7vNjYWdt3khBPZlPA1ipzHqYJ9rk1yBMtO4lBlPXQIL3Fks+oQ6bROstN2e+uDRLPoTcz2YM55CqkOD7dR169Y7SiPct/bJdkTH9pnH/r1OrstuAKTzceKyLbatx+mrhepM/mG3duM+uA7pr0tcj8JFC4hcxr4ije+y5fmag29du45n7Qlvp9nceDhBB9l6hoD8eLynbot1KG2Ws7wqhwbsKFo9KFA9xSae2i50o07siuww5jLOTUZOTbz1ParD/7wjNFu/J/UEO9Ai88ZS23ayjjYjM9W2iFPYCtWddiethC+X6nlyZEZP2djpJuDaI/t7KeezVlrTRrcUN/UsWZK7A+0GJ3X4WY+Ejsc9xlMiVRX2q/Xp3PbUwVg6bM88VQurCpOrZzmrpbzpuyit9/UopPJoPYXmzjtkQ5TGPpex/TPaI2brE9WjBrujcbS9wBZnpSqOx1NdO3SrDjeex7Sp9Mg5qnUdjwFRIwWwhcpOZ09qwzBmzWArb4ZM4yEmqiayA6wUFVmYeXdIrMZA7S+Ox8J0Ekju2vG/LRA5o8qj8GzzOu+uDTrqeZlrByt0ljXuq1A9+8R2tKeWiVuYr5JU1cCnE5cdmrhtiWmGduMpOueuTaK35XPFDzuGytd2O8aHDfR5e4x6S9fGwObxRKEeA+O6Ko2dfmtL0G5Wqi/8PwEGADUQ1ICVnO78AAAAAElFTkSuQmCC"},34:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAOElEQVQokWNgGCjAyMDAwDB1zdb/pGrMDvFmZEE2hFTARI6mgdcM8zPJAcbAwDAaYCQCssKJOgAA4FsGINawyv8AAAAASUVORK5CYII="},35:function(t,e,a){var i=a(1)(a(28),a(37),null,null,null);t.exports=i.exports},36:function(t,e,a){function i(t){a(30)}var s=a(1)(a(29),a(38),i,"data-v-e8da82da",null);t.exports=s.exports},37:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdy-header clearfix relative"},[a("el-dropdown",{staticClass:"inlineblock absolute",staticStyle:{right:"20px",top:"23px"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n         "),a("span",{staticClass:"header-tx-icon inlineblock absolute",staticStyle:{right:"44px",top:"-7px"}})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"ml10 mr10",staticStyle:{"font-size":"14px",height:"30px"},attrs:{command:"personal"}},[t._v("个人中心")]),t._v(" "),a("el-dropdown-item",{staticClass:"ml10 mr10",staticStyle:{"font-size":"14px",height:"30px"},attrs:{command:"exit"}},[t._v("退出")])],1)],1),t._v(" "),a("div",{staticClass:"jdy-bread"},[a("a",{attrs:{href:t.indexUrl,title:""}},[t._v("首页")]),t._v(" "),t._l(t.titleList,function(e,i){return a("span",[a("span",{staticClass:"fgx"},[t._v("/")]),t._v(" "),i+1==t.titleList.length?a("span",{staticClass:"blue"},[t._v(t._s(t.getTitle(e.meta)))]):a("a",{attrs:{title:"",href:"javascript:;"},on:{click:function(a){t.getUrl(e)}}},[t._v(" "+t._s(t.getTitle(e.meta)))])])})],2)],1)},staticRenderFns:[]}},38:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"jdy-nav fleft",attrs:{id:"jdyNav"}},[i("div",{staticClass:"logo"},[t.showBig?i("img",{staticStyle:{width:"100%"},attrs:{src:a(32)}}):t.showSmall?i("img",{staticStyle:{width:"100%"},attrs:{src:a(33)}}):t._e()]),t._v(" "),i("div",{staticClass:"changeBtn"},[i("a",{attrs:{href:"javascript:;"}},[t.showSmall?i("img",{attrs:{src:a(34)},on:{click:t.changeBtn}}):t._e()]),t._v(" "),i("a",{attrs:{href:"javascript:;"}},[t.showBig?i("img",{attrs:{src:a(31)},on:{click:t.changeBtn}}):t._e()])]),t._v(" "),i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.activeDataF,"default-openeds":t.activeArry,router:!0,collapse:t.isCollapse,"unique-opened":"",theme:"dark"},on:{select:t.select,open:t.handleOpen,close:t.handleClose}},t._l(t.htmlData,function(e,a){return i("el-submenu",{key:a,attrs:{index:e.mUrl}},[i("template",{slot:"title"},[i("i",{class:e.mEnName}),t._v(" "),i("div",{class:e.mEnName},[i("span",{staticClass:"navicon inlineblock",staticStyle:{"padding-left":"35px","font-size":"12px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.mName))]),t._v(" "),1==t.showSmall?i("div",{staticClass:"navicon inlineblock smallNav",staticStyle:{"padding-left":"35px"},attrs:{slot:"title"},slot:"title"}):t._e()])]),t._v(" "),t._l(e.children,function(e,a){return i("el-menu-item-group",{key:a},[i("el-menu-item",{class:{"is-active":e.mUrl.substr(1)==t.activeDataTwo},staticStyle:{"font-size":"12px"},attrs:{index:e.mUrl.substr(1)}},[t._v(t._s(e.mName))])],1)})],2)}))],1)},staticRenderFns:[]}},4:function(t,e,a){var i=a(1)(a(48),a(50),null,null,null);t.exports=i.exports},453:function(t,e,a){"use strict";var i=a(6),s=a(9),n=a(1255),r=a.n(n),l=a(1256),o=a.n(l),c=a(1254),u=a.n(c),d=a(1271),p=a.n(d),m=a(1265),h=a.n(m),f=a(1266),v=a.n(f),g=a(1270),b=a.n(g),y=a(1267),_=a.n(y),C=a(1268),k=a.n(C),T=a(1269),S=a.n(T),x=a(1259),w=a.n(x),F=a(1258),D=a.n(F),I=a(1260),$=a.n(I),L=a(1257),P=a.n(L),N=a(1237),j=a.n(N),A=a(1238),q=a.n(A),E=a(1251),M=a.n(E),O=a(1252),B=a.n(O),R=a(1253),z=a.n(R),H=a(1262),U=a.n(H),J=a(1264),W=a.n(J),G=a(1263),V=a.n(G),K=a(1261),Y=a.n(K),Z=a(1248),X=a.n(Z),Q=a(1247),tt=a.n(Q),et=a(1249),at=a.n(et),it=a(1250),st=a.n(it),nt=a(1246),rt=a.n(nt),lt=a(1235),ot=a.n(lt),ct=a(1236),ut=a.n(ct),dt=a(1245),pt=a.n(dt),mt=a(1244),ht=a.n(mt),ft=a(1239),vt=a.n(ft),gt=a(1243),bt=a.n(gt),yt=a(1242),_t=a.n(yt),Ct=a(1241),kt=a.n(Ct),Tt=a(1240),St=a.n(Tt);i.default.use(s.a),e.a=new s.a({routes:[{path:"/",name:"index",component:r.a,meta:{title:"计调中心"}},{path:"/list",name:"List",component:r.a,meta:{title:"产品管理"}},{path:"/advertising",name:"advertising",component:j.a,meta:{title:"广告管理"}},{path:"/advertisingInfo",name:"advertisingInfo",component:q.a,meta:{title:"编辑广告"}},{path:"/list/recycle",name:"Recycle",component:o.a,meta:{title:"产品管理回收站"}},{path:"/list/line",name:"Line",component:u.a,meta:{title:"线路信息",query:["id"]}},{path:"/list/trip",name:"Trip",component:p.a,meta:{title:"行程信息",query:["id"]}},{path:"/list/supplement",name:"Supplement",component:h.a,meta:{title:"补充行程",query:["id"]}},{path:"/list/supplementLine",name:"SupplementLine",component:v.a,meta:{title:"补充行程",query:["id"]}},{path:"/list/ticketprice",name:"Ticketprice",component:b.a,meta:{title:"票价信息",query:["id"]}},{path:"/list/ticketprice/addfare",name:"Addfare",component:_.a,meta:{title:"编辑票价"}},{path:"/list/ticketprice/tickedmange",name:"Ticketmanagement",component:S.a,meta:{titles:[{conditions:[{param:"priceId",type:"notNull"}],title:"编辑票价"},{conditions:[{param:"priceId",type:"null"}],title:"新增套票"}]}},{path:"/list/ticketprice/batchfare",name:"Batchfare",component:k.a,meta:{title:"批量添加票价"}},{path:"/list/schedule",name:"Schedule",component:w.a,meta:{title:"班期信息",query:["id"]}},{path:"/list/schedule/one",name:"ScheduleOne",component:D.a,meta:{titles:[{conditions:[{param:"type",type:"equal",value:1}],title:"新增班期"},{conditions:[{param:"type",type:"equal",value:2}],title:"批量新增班期"}]}},{path:"/list/schedule/editSchedule",name:"editSchedule",component:$.a,meta:{title:"编辑班期"}},{path:"/list/addCostList",name:"addCostList",component:ot.a,meta:{title:"成本列表"}},{path:"/list/addCostList/addCostPage",name:"addCostPage",component:ut.a,meta:{title:"添加成本"}},{path:"/list/schedule/all",name:"ScheduleAll",component:P.a,meta:{title:"无效"}},{path:"/groupPlanManage",name:"groupPlanManage",component:M.a,meta:{title:"出团计划管理"}},{path:"/groupPlanManage/groupSheet",name:"groupSheet",component:B.a,meta:{title:"出团计划表"}},{path:"/groupPlanManage/groupSheet/saleDetail",name:"saleDetail",component:z.a,meta:{title:"销售明细"}},{path:"/selfTravelList",name:"selfTravelList",component:U.a,meta:{title:"定制游"}},{path:"/selftrip",name:"selftrip",component:W.a,meta:{title:"定制游行程信息"}},{path:"/selfline",name:"selfline",component:V.a,meta:{title:"编辑方案"}},{path:"/selfTravelList/selfHistory",name:"selfHistory",component:Y.a,meta:{title:"需求单及方案追溯"}},{path:"/groupManage",name:"groupManage",component:X.a,meta:{title:"团期管理"}},{path:"/groupManage/touristInfo",name:"touristInfo",component:st.a,meta:{title:"游客信息"}},{path:"/groupManage/groupCancel",name:"groupCancel",component:tt.a,meta:{title:"取消游客"}},{path:"/groupManage/groupNotice",name:"groupNotice",component:at.a,meta:{title:"出团通知书"}},{path:"/groupManage/costKeeping",name:"costKeeping",component:rt.a,meta:{title:"成本核算"}},{path:"/assemblylist",name:"assemblylist",component:pt.a,meta:{title:"集结产品管理"}},{path:"/assemblylist/addCostList",name:"addCostList",component:ot.a,meta:{title:"成本列表"}},{path:"/assemblylist/addCostList/assemblyAddCostPage",name:"assemblyAddCostPage",component:ht.a,meta:{title:"添加成本"}},{path:"/assemblylist/assemblyLine",name:"assemblyLine",component:vt.a,meta:{title:"区域产品列表",query:["id"]}},{path:"/assemblylist/assemblyTicketprice",name:"assemblyTicketprice",component:bt.a,meta:{title:"集结产品票价信息",query:["id"]}},{path:"/assemblylist/assemblyTicketprice/assemblyAddfare",name:"assemblyAddfare",component:_t.a,meta:{title:"集结产品编辑票价"}},{path:"/assemblylist/assemblySchedule",name:"assemblySchedule",component:kt.a,meta:{title:"集结产品班期信息"}},{path:"/assemblylist/assemblySchedule/assemblyEditSchedule",name:"assemblyEditSchedule",component:St.a,meta:{title:"编辑班期"}}],scrollBehavior:function(t,e,a){return a||{x:0,y:0}},linkActiveClass:"active"})},465:function(t,e,a){var i=a(1)(a(612),a(1309),null,null,null);t.exports=i.exports},48:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){e.default={props:{title:String},methods:{closeAlert:function(){t(".alertbgg").remove(),this.$emit("closeAlert")}}}}.call(e,a(2))},489:function(t,e,a){"use strict";function i(){}function s(t,e){var a=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var i=e.split("."),s=0,n=i.length;s<n-1;++s){var r=i[s];if(!(r in a))throw new Error("please transfer a valid prop path to form item!");a=a[r]}return{o:a,k:i[s],v:a[i[s]]}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(210),r=a(194);e.default={name:"ElFormItem",componentName:"ElFormItem",mixins:[r.a],props:{label:String,labelWidth:String,prop:String,required:Boolean,rules:[Object,Array],error:String,validateStatus:String,showMessage:{type:Boolean,default:!0}},watch:{error:function(t){this.validateMessage=t,this.validateState=t?"error":""},validateStatus:function(t){this.validateState=t}},computed:{labelStyle:function(){var t={};if("top"===this.form.labelPosition)return t;var e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e),t},contentStyle:function(){var t={},e=this.label;if("top"===this.form.labelPosition||this.form.inline)return t;if(!e&&!this.labelWidth&&this.isNested)return t;var a=this.labelWidth||this.form.labelWidth;return a&&(t.marginLeft=a),t},form:function(){for(var t=this.$parent,e=t.$options.componentName;"ElForm"!==e;)"ElFormItem"===e&&(this.isNested=!0),t=t.$parent,e=t.$options.componentName;return t},fieldValue:{cache:!1,get:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),s(t,e).v}}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every(function(t){return!t.required||(e=!0,!1)}),e}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1}},methods:{validate:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;this.validateDisabled=!1;var s=this.getFilteredRule(t);if(!(s&&0!==s.length||this._props.hasOwnProperty("required")))return a(),!0;this.validateState="validating";var r={};r[this.prop]=s;var l=new n.default(r),o={};o[this.prop]=this.fieldValue,l.validate(o,{firstFields:!0},function(t,i){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",a(e.validateMessage)})},resetField:function(){this.validateState="",this.validateMessage="";var t=this.form.model,e=this.fieldValue,a=this.prop;-1!==a.indexOf(":")&&(a=a.replace(/:/,"."));var i=s(t,a);Array.isArray(e)?(this.validateDisabled=!0,i.o[i.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,i.o[i.k]=this.initialValue)},getRules:function(){var t=this.form.rules,e=this.rules,a=this._props.hasOwnProperty("required")?{required:!!this.required}:[];return t=t?t[this.prop]:[],[].concat(e||t||[]).concat(a)},getFilteredRule:function(t){return this.getRules().filter(function(e){return!e.trigger||-1!==e.trigger.indexOf(t)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){if(this.validateDisabled)return void(this.validateDisabled=!1);this.validate("change")}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var t=this.fieldValue;Array.isArray(t)&&(t=[].concat(t)),Object.defineProperty(this,"initialValue",{value:t});(this.getRules().length||this._props.hasOwnProperty("required"))&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}}},490:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(991),s=a(994),n=a(121),r=a.n(n);e.default={name:"ElInputNumber",directives:{repeatClick:{bind:function(t,e,i){var n=null,r=void 0,l=function(){return i.context[e.expression].apply()},o=function(){new Date-r<100&&l(),clearInterval(n),n=null};a.i(s.a)(t,"mousedown",function(){r=new Date,a.i(s.b)(document,"mouseup",o),clearInterval(n),n=setInterval(l,100)})}}},components:{ElInput:i.a},props:{step:{type:Number,default:1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{default:0},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},debounce:{type:Number,default:300}},data:function(){return{currentValue:0}},watch:{value:{immediate:!0,handler:function(t){var e=Number(t);isNaN(e)||(e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),this.currentValue=e,this.$emit("input",e))}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},precision:function(){var t=this.value,e=this.step,a=this.getPrecision;return Math.max(a(t),a(e))}},methods:{toPrecision:function(t,e){return void 0===e&&(e=this.precision),parseFloat(parseFloat(Number(t).toFixed(e)))},getPrecision:function(t){var e=t.toString(),a=e.indexOf("."),i=0;return-1!==a&&(i=e.length-a-1),i},_increase:function(t,e){if("number"!=typeof t)return this.currentValue;var a=Math.pow(10,this.precision);return this.toPrecision((a*t+a*e)/a)},_decrease:function(t,e){if("number"!=typeof t)return this.currentValue;var a=Math.pow(10,this.precision);return this.toPrecision((a*t-a*e)/a)},increase:function(){if(!this.disabled&&!this.maxDisabled){var t=this.value||0,e=this._increase(t,this.step);e>this.max||this.setCurrentValue(e)}},decrease:function(){if(!this.disabled&&!this.minDisabled){var t=this.value||0,e=this._decrease(t,this.step);e<this.min||this.setCurrentValue(e)}},handleBlur:function(){this.$refs.input.setCurrentValue(this.currentValue)},setCurrentValue:function(t){var e=this.currentValue;if(t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),e===t)return void this.$refs.input.setCurrentValue(this.currentValue);this.$emit("change",t,e),this.$emit("input",t),this.currentValue=t},handleInput:function(t){if(""!==t){var e=Number(t);isNaN(e)?this.$refs.input.setCurrentValue(this.currentValue):this.setCurrentValue(e)}}},created:function(){var t=this;this.debounceHandleInput=r()(this.debounce,function(e){t.handleInput(e)})}}},491:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(194),s=a(992),n=a(995);e.default={name:"ElInput",componentName:"ElInput",mixins:[i.a],data:function(){return{currentValue:this.value,textareaCalcStyle:{}}},props:{value:[String,Number],placeholder:String,size:String,resize:String,readonly:Boolean,autofocus:Boolean,icon:String,disabled:Boolean,type:{type:String,default:"text"},name:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},autoComplete:{type:String,default:"off"},form:String,maxlength:Number,minlength:Number,max:{},min:{},step:{},validateEvent:{type:Boolean,default:!0},onIconClick:Function},computed:{validating:function(){return"validating"===this.$parent.validateState},textareaStyle:function(){return a.i(n.a)({},this.textareaCalcStyle,{resize:this.resize})}},watch:{value:function(t,e){this.setCurrentValue(t)}},methods:{handleBlur:function(t){this.$emit("blur",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.currentValue])},inputSelect:function(){this.$refs.input.select()},resizeTextarea:function(){if(!this.$isServer){var t=this.autosize;if("textarea"===this.type){if(!t)return void(this.textareaCalcStyle={minHeight:a.i(s.a)(this.$refs.textarea).minHeight});var e=t.minRows,i=t.maxRows;this.textareaCalcStyle=a.i(s.a)(this.$refs.textarea,e,i)}}},handleFocus:function(t){this.$emit("focus",t)},handleInput:function(t){var e=t.target.value;this.$emit("input",e),this.setCurrentValue(e),this.$emit("change",e)},handleIconClick:function(t){this.onIconClick&&this.onIconClick(t),this.$emit("click",t)},setCurrentValue:function(t){var e=this;t!==this.currentValue&&(this.$nextTick(function(t){e.resizeTextarea()}),this.currentValue=t,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[t]))}},created:function(){this.$on("inputSelect",this.inputSelect)},mounted:function(){this.resizeTextarea()}}},493:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(a(6),a(2)),s=(a.n(i),a(996)),n=(a.n(s),a(1125)),r=a.n(n);e.default={model:{prop:"value",event:"change"},props:{value:String,id:String},methods:{creatCalendar:function(){var t=this.id,e=this;new r.a(t,{months:1,mode:"multiple",selected:[new Date]}).subscribe("change",function(t){e.$emit("change",this.getSelected())})}},mounted:function(){this.creatCalendar()}}},50:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jdyalert",staticStyle:{top:"0"}},[a("div",{staticClass:"jdyalert-title"},[a("span",{staticClass:"f14 pl16"},[t._v(t._s(t.title))]),t._v(" "),a("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:t.closeAlert}},[a("i",{staticClass:"el-message-box__close el-icon-close"})])]),t._v(" "),a("div",{staticClass:"jdyalert-content"},[t._t("default"),t._v(" "),a("div",{staticClass:"tc ffhidden hiddens"},[a("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:t.closeAlert}},[a("i",{staticClass:"el-message-box__close el-icon-close"})])])],2)])},staticRenderFns:[]}},57:function(t,e){},58:function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"e",function(){return r}),a.d(e,"c",function(){return l}),a.d(e,"a",function(){return o}),a.d(e,"b",function(){return c});var i=/^1[3|4|5|6|7|8|9]\d{9}$/,s=/^((\d{3,4})|\d{3,4}-|\s)?\d{7,14}$/,n=function(t,e,a){""==e.trim()?a():i.test(e)?s.test(e)?a():a(new Error("请输入正确的电话号码")):a(new Error("请输入正确的手机号码"))},r=function(t,e,a){var i=/(^\d{15}$)|(^\d{17}(\d|X)$)/;""==e.trim()?a():i.test(e)?a():a(new Error("请输入正确的身份证"))},l=function(t,e,a){""===e.toString().trim()?a(new Error("不能为空")):a()},o=function(t,e,a){var i=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/;e?""==e.toString().trim()?a():i.test(e)?a():a(new Error("格式不正确（参考：99.88，无小数或最多两位小数）")):a()},c=function(t,e,a){var i=/^[1-9]\d*$/;e?""==e.toString().trim()?a():i.test(e)?a():a(new Error("格式不正确，请输入正整数")):a()}},612:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(35),s=a.n(i),n=a(36),r=a.n(n);e.default={name:"app",components:{jdyHeader:s.a,jdyNav:r.a},data:function(){return{fullscreenLoading:!1}},created:function(){}}},613:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Hotel",data:function(){return{searchParam:{str:"",companyId:null,currPage:1,pageSize:20},pid:this.$route.query.id,c_id:this.$route.query.c_id,currentPage:1,pageSize:20,tableDataTotal:0,tableData:[],isNull:null,locationFlag:""}},methods:{getTableData:function(t){var e=this;this.$http.post(api_prefix+"productCosting/queryProductCostingTitleListById",{productId:this.$route.query.id,type:1,pageSize:20,currPage:this.currentPage,productType:t,companyId:this.c_id}).then(function(t){if(0==t.data.code){var a=t.data.body;e.tableData=a.list,e.tableDataTotal=a.total,a.list.length>0?e.isNull=!1:e.isNull=!0}else e.$alert(t.data.message,"温馨提示",{type:"error"})},function(t){e.$alert("获取数据失败","温馨提示",{type:"error"})})},getProductDetail:function(){var t=this;this.$http.post(api_prefix+"/product/detail",{id:this.$route.query.id,lineType:0}).then(function(e){if(0==e.data.body.code){var a=e.data.body.body.product;t.productType=1==a.ascription?"2":"1",t.getTableData(t.productType)}else t.$alert(e.body.message,"温馨提示",{type:"error"})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})},handleCurrentChange:function(t){t&&(this.currentPage=t,this.getTableData())},handleSizeChange:function(){},getDetail:function(t){"assemblylist"==this.locationFlag?this.$router.push({name:"assemblyAddCostPage",query:{id:t,type:1,pid:this.pid}}):this.$router.push({name:"addCostPage",query:{id:t,type:1,pid:this.pid}})}},mounted:function(){this.getProductDetail(),this.locationFlag=location.hash.split("/")[1]}}},614:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(13),s=a.n(i);e.default={name:"Hotel",data:function(){return{numObj:{list:[],itemindex:null},datePicker:[(new Date).setTime((new Date).getTime()+864e5),(new Date).setTime((new Date).getTime()+6048e5)],productCostingTitle:{productName:null,relId:this.$route.query.pid,type:1,peopleNum:null,peopleNumExplain:null,isExempt:0,isExemptExplain:null,beginTime:null,endTime:null,companyId:this.$route.query.c_id},productCostingCategoryDetailList:[],DetailListCell:{categoryId:null,content:"",amount:null,unit:null,unitPrice:null,remark:""},tableData:[],total:{sum1_6:null,sum7_9:null,sum1_9:null,costSingle:null,allTotal:null},readOnly:!0,productType:""}},methods:{getCostPage:function(){var t=this,e={type:1,productType:this.productType,productId:this.$route.query.pid,companyId:this.$route.query.c_id};1==this.$route.query.type?(e.id=this.$route.query.id,this.readOnly=!0):this.readOnly=!1,this.$http.post(api_prefix+"productCosting/queryProductCostingAllInformationById",e).then(function(e){if(0==e.data.code){var a=e.data.body;t.productCostingTitle.productName=a.productName,t.productCostingTitle.peopleNum=a.peopleNum,t.productCostingTitle.peopleNumExplain=a.peopleNumExplain,t.productCostingTitle.isExempt=Number(a.isExempt),t.productCostingTitle.isExemptExplain=a.isExemptExplain,t.productCostingTitle.beginTime=t.changeMusterTime(a.beginTime),t.productCostingTitle.endTime=t.changeMusterTime(a.endTime),t.datePicker=[t.productCostingTitle.beginTime,t.productCostingTitle.endTime],t.numObj.list=[],a.productCostingCategoryInformationList.forEach(function(e,a){var i=JSON.parse(s()(t.DetailListCell));e.productCostingCategoryDetailList.push(i),50!=e.categoryId&&20!=e.categoryId&&(e.listSize=e.listSize+1),t.numObj.list.push(e.listSize)}),t.tableData=a.productCostingCategoryInformationList,t.getTotalCell()}else t.$alert(e.data.message,"温馨提示",{type:"error"})},function(e){t.$alert("获取成本明细失败！","温馨提示",{type:"error"})})},judgeIsNull:function(){var t=this;this.readOnly=!1,this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:240}).then(function(e){if(0==e.body.code){var a=e.body.body;t.numObj.list=[],a.forEach(function(e,a){console.log("名字：",e.dName,"; Id：",e.id,"; dSort：",e.dSort),e.categoryName=e.dName,e.categoryId=e.dSort,e.listSize=0,e.productCostingCategoryDetailList=[];var i=JSON.parse(s()(t.DetailListCell));e.productCostingCategoryDetailList.push(i),t.numObj.list.push(0),e.subtotal=0}),t.tableData=a}else t.$alert(e.body.message,"温馨提示",{type:"error"});return!0},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})},save:function(){var t=this,e=[];if(this.tableData.forEach(function(t,a){t.productCostingCategoryDetailList.forEach(function(a,i){""!=a.content&&null!=a.amount&&null!=a.unitPrice&&(a.categoryId=t.categoryId,e.push(a))})}),0==e.length)return void this.$message.info("请填写具体项目明细！");this.productCostingTitle.productType=this.productType;var a={productCostingTitle:this.productCostingTitle,productCostingCategoryDetailList:e};this.$http.post(api_prefix+"productCosting/addProductCosting",a).then(function(e){0==e.data.code?(t.$message.success("保存成功！"),window.history.go(-1)):t.$alert(e.body.message,"温馨提示",{type:"error"})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})},inputChange:function(t){var e=this;setTimeout(function(){if(e.numObj.list[e.numObj.itemindex]>t)e.tableData[e.numObj.itemindex].productCostingCategoryDetailList.pop();else{var a=JSON.parse(s()(e.DetailListCell));e.tableData[e.numObj.itemindex].productCostingCategoryDetailList.push(a)}e.numObj.list[e.numObj.itemindex]=t},100)},getIndex:function(t){this.numObj.itemindex=t},inputdesc:function(){var t=this;setTimeout(function(){t.tableData[t.numObj.itemindex].productCostingCategoryDetailList.pop(),t.tableData[t.numObj.itemindex].listSize=t.tableData[t.numObj.itemindex].listSize-1},100)},inputadd:function(){var t=this;setTimeout(function(){var e=JSON.parse(s()(t.DetailListCell));t.tableData[t.numObj.itemindex].productCostingCategoryDetailList.push(e),t.tableData[t.numObj.itemindex].listSize=t.tableData[t.numObj.itemindex].listSize+1},100)},getTotalCell:function(t){var e=null;t?(this.tableData[t].productCostingCategoryDetailList.forEach(function(t,a){e+=t.amount*t.unitPrice}),this.tableData[t].subtotal=e):this.tableData.forEach(function(t,e){t.subtotal=0,t.productCostingCategoryDetailList.forEach(function(e,a){t.subtotal+=e.amount*e.unitPrice})}),this.sumTotalCell(1,6),this.sumTotalCell(8,10),this.sumTotalCell(1,10),this.sumTotalCell(1,11),this.costSingleTotal()},sumTotalCell:function(t,e){var a=this.tableData.slice(t-1,e),i=0,s=0;a.forEach(function(t,e){i+=t.subtotal,50==t.categoryId&&(s=t.subtotal)}),1==t&&6==e?this.total.sum1_6=i:8==t&&10==e?this.total.sum7_9=i:1==t&&10==e&&(this.total.sum1_9=i-s),this.total.allTotal=i},costSingleTotal:function(){var t=null;this.tableData.forEach(function(e,a){e.productCostingCategoryDetailList.forEach(function(e,a){e.unitPrice&&(t+=Number(e.unitPrice))})}),this.total.costSingle=t},dateRangeChange:function(t){if(t){var e=t.split(" - ");this.productCostingTitle.beginTime=e[0],this.productCostingTitle.endTime=e[1]}else this.productCostingTitle.beginTime=null,this.productCostingTitle.endTime=null},changeMusterTime:function(t){if(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth(),s=e.getDate();return a+"-"+(i+1>=10?i+1:"0"+(i+1))+"-"+(s+1<10?"0"+s:s)}},goback:function(){if(1==this.$route.query.type)return void window.history.go(-1);this.$confirm("添加成本数据未保存，是否要返回？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.history.go(-1)}).catch(function(){})}},mounted:function(){var t=this;this.$http.post(api_prefix+"/product/detail",{id:this.$route.query.pid,lineType:0}).then(function(e){if(0==e.data.body.code){var a=e.data.body.body.product;t.productType=1==a.ascription?"2":"1",1==t.$route.query.isNull?(t.productCostingTitle.productName=a.pName,t.judgeIsNull()):t.getCostPage()}else t.$alert(e.body.message,"温馨提示",{type:"error"})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})}}},615:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i);e.default={components:{jdyAlert:s.a},name:"information",data:function(){return{aPlace:"",taCity:"111",uStatus:0,value1:!0,adverContent:"",fullscreenLoading:!1,selectList:[],props:{value:"id",label:"cName",children:"children"},selectedOptions:[],advertings:{aComment:"",aOther:"",aPlace:"",aStatus:"",aTitle:"",taCity:"",currPage:1,pageSize:20,userId:""},userVal:"",OptionsList:{},tableData:[],currentId:"",currentPage:1,pageSizeAll:1,tableDataTotal:1,departurePlaceFlag:!1}},mounted:function(){this.defaultSelectList(),this.defaultadvertisingList(),this.getLocation()},computed:{},filters:{filterStartTime:function(t){return new Date(t).format("yyyy-MM-dd")},filterAreaList:function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].taCity);return e.join()}},methods:{defaultadvertisingList:function(){var t=this,e=api_prefix+"/advertisement/list",a=this.advertings;this.$http.post(e,a).then(function(e){console.log(e),200===e.status&&-1!=e.body.code&&(t.tableData=e.body.body.list,t.currentPage=e.body.body.pageNum,t.pageSizeAll=e.body.body.pageSize,t.tableDataTotal=e.body.body.total,t.PageCount=e.body.body.pages)})},defaultSelectList:function(){var t=this,e=api_prefix+"/Company/selectAllCompanyWithTree?pageIndex=1&pageInteger=1";this.$http.post(e).then(function(e){if(200===e.status){var a=e.body.body.list;for(var i in a)a[i].children&&a[i].children.length<=0&&delete a[i].children;t.selectList=a}})},handleChange:function(t){},getLocation:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:133}).then(function(e){0==e.data.code?t.OptionsList=e.data.body:t.$alert(e.data.message)},function(t){console.log("出错了")})},firstSearch:function(){var t=this;this.$http.post(api_prefix+"/advertisement/list",{aTitle:this.searchValue,aPlace:this.aPlace,aOther:this.searchValue,taCity:this.searchValue,aComment:this.searchValue}).then(function(e){0==e.data.code?t.tableData=e.body.body.list:t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getSearchValue:function(t){this.searchValue=t},refreshBtn:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.$router.go(0)},1e3)},SwitchChange:function(t){var e=this;0==t.aStatus?t.aStatus++:t.aStatus--,this.$http.post(api_prefix+"/advertisement/update",t).then(function(t){if(0!=t.data.code)return e.$alert(t.data.message),void e.defaultadvertisingList();e.defaultadvertisingList()},function(t){console.log("出错了")})},deleteRow:function(t,e){var a=this,i=api_prefix+"/advertisement/delete/"+t;this.currentId=t,console.log("当前ID",this.currentId),this.$confirm("你确定要删除该内容？","友情提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.get(i).then(function(t){0==t.data.code?a.$message({type:"success",message:"删除成功!"}):a.$alert(t.data.message),a.defaultadvertisingList()},function(t){console.log("出错了")})}).catch(function(){})},editInfo:function(){},sizeChange:function(t){console.log(t)},handleCurrentChange:function(t){console.log(t,"val"),this.advertings.currPage=t,this.defaultadvertisingList()},addInfoRouter:function(){this.$router.push({path:"/advertisingInfo"})}}}},616:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(4),s=a.n(i);e.default={data:function(){return{btnFlag:!1,id:this.$route.query.id,selectCityArr:{id:[],name:[]},showcfCityFlag:!1,proviceArr:{},submitArr:[],OptionsList:[],tahtOption:"",startTime:"",endTime:"",radio:"0",showradio:"0",saveFormRules:{companyId:[{type:"regexp",required:!0,message:"请选择所属单位",trigger:"change"}],aPlace:[{required:!0,type:"number",message:"请选择广告位置",trigger:"change"}],aStartTime:[{required:!0,type:"date",message:"请选择有效时间",trigger:"change"}],aEndTime:[{required:!0,type:"date",message:"请选择有效时间",trigger:"change"}],aOpenType:[{required:!0,type:"number",message:"请选择打开方式",trigger:"change"}],aShow:[{required:!0,type:"number",message:"请选择是否显示",trigger:"change"}],attachUrl:[{required:!0,type:"string",message:"请添加图片",trigger:"change,blur,clearFiles,abort"}],areaList:[{required:!0,type:"object",message:"请选择投放市场",trigger:"change,blur"}]},uCompanyId:"",selectList:"",saveForm:{companyId:"",attachUrl:null,aComment:null,aEndTime:null,aLink:null,aOpenType:0,aOther:null,aPlace:15,aSort:null,aStartTime:null,aTitle:null,aStatus:0,aShow:0},areaObj:{taArea:null,taCity:null,taCountry:null,taProvince:null},areaList:[],showPicHover:!1,fileType:{fileType:"jpg"}}},mounted:function(){var t=this,e=JSON.parse(sessionStorage.loginData);this.uCompanyId=e.uCompanyId,0!=this.uCompanyId&&(this.saveForm.companyId=this.uCompanyId),this.getLocation(),this.defaultSelectList(),this.$route.query.id&&this.$http.get(api_prefix+"advertisement/get/"+this.$route.query.id).then(function(e){e.data.body?(t.saveForm=e.data.body,t.saveForm.aStartTime=new Date(t.saveForm.aStartTime),t.saveForm.aEndTime=new Date(t.saveForm.aEndTime),t.saveForm.areaList.forEach(function(e){t.selectCityArr.name.push(e.taCity)}),t.submitArr=t.saveForm.areaList):t.$alert("查询详细失败")})},methods:{searchCompany:function(t){""!=this.saveForm.uCompanyId&&(console.log("09090909090900909090900"),this.defaultSelectList(t))},defaultSelectList:function(e){var a=this,i=api_prefix+"/Company/index",s={pageIndex:1};e&&(s.fastSearchStr=t.trim(e)),this.$http.post(i,s,{emulateJSON:!0}).then(function(t){var e=t.body.body.list;a.selectList=e,console.log(a.selectList,"this.selectList")})},openFileWindow:function(){document.getElementById("uploadFile").click()},getFileAndUpload:function(t){var e=this;console.log(t);var a=event.currentTarget.files||event.dataTransfer.files;if(a){var i=new FormData;i.append("fileType","jpg"),i.append("file",a[0]),this.$http.post(api_prefix+"/common/file/upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.saveForm.attachUrl=t.body.body.key},function(t){console.log("出错了")}),document.getElementById("uploadFile").value=null}},deleteAttachUrl:function(){this.saveForm.attachUrl=null},getLocation:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:133}).then(function(e){0==e.data.code?t.OptionsList=e.data.body:t.$alert(e.data.message)},function(t){console.log("出错了")})},saveNewAD:function(){var t=this;this.$refs.saveForm.validate(function(e){if(e){if(t.saveForm.attachUrl.length<1)return void t.$message.error("请上传图片");var a=t.id?"/advertisement/update":"/advertisement/save";t.btnFlag=!0,console.log(t.btnFlag,"-----------------------------"),t.$http.post(api_prefix+a,t.saveForm).then(function(e){if(0==e.data.code){t.btnFlag=!1,t.$message({showClose:!0,message:"保存成功",type:"success"});var a=t;setTimeout(function(){a.$router.push({name:"advertising"})},500)}else t.btnFlag=!1,t.$alert(e.data.message)}),console.log(t.saveForm)}})}},components:{jdyAlert:s.a},computed:{upload_action:function(){return api_prefix+"/common/file/upload"}}}}.call(e,a(2))},617:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(13),s=a.n(i);e.default={name:"line",data:function(){return{tableDataTotal:0,currentPage:1,pageSize:10,h5Url:"",btnFlag:!1,assemblyPid:"",currentRow:"",choseRow:"",ruleForm:{companyId:null,pName:null,pType:"0",pageSize:10,currPage:1,startStation:null},tableData:[],uDataLimit:"",companyId:"",selectList:[],typeList:{0:"全部类型",10:"周边短线",11:"国内长线",20:"出境长线",21:"出境短线",30:"邮轮",50:"自由行",51:"出境海岛",52:"定制旅游",54:"团队会奖",55:"签证服务",56:"机票预订",57:"酒店预订",58:"单项委托",59:"其他服务",60:"户外拓展",61:"游学/研学",62:"自驾游",63:"全球旅拍",64:"旅游金融",65:"旅游地产",66:"亲子"}}},methods:{gotoH5:function(t){var e="";e="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",this.h5Url=e+"/wap/m/detail.html?p_id="+t+"&from=preview",console.log(this.h5Url,"this.h5Url")},defaultSelectList:function(t){var e=this,a=api_prefix+"/Company/index",i={pageIndex:1,pid:0,searchType:1};this.$http.post(a,i,{emulateJSON:!0}).then(function(t){var a=t.body.body.list;e.selectList=a,console.log(e.selectList,"this.selectList")})},rowclickHandler:function(t){console.log(t,"09090909"),this.assemblyPid=t.id,this.choseRow=t?1:0},handleCurrentChange:function(t){t&&(this.ruleForm.currPage=t,this.getTableData())},getTableData:function(){var t=this,e=JSON.parse(s()(this.ruleForm));"0"==e.pType&&delete e.pType,this.$http.post(api_prefix+"/aggr/area-productlist",e).then(function(e){var a=e.data.body;t.tableData=a.resultList,t.tableDataTotal=a.totalNum},function(t){console.log("出错了")})},firstSearch:function(){this.getTableData()},goback:function(){this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){location.href="/transfer.html#/assemblylist"}).catch(function(){})},onSubmitGo:function(){var t=this;1==this.choseRow?(this.btnFlag=!0,this.$http.post(api_prefix+"/ticket/copyGatherTickets",{productId:this.assemblyPid}).then(function(e){0==e.body.code?(t.btnFlag=!1,t.$router.push({name:"assemblyTicketprice",query:{id:t.assemblyPid}})):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(e){t.btnFlag=!1,console.log("出错了")})):this.$message.error("请先选择一个产品！")}},mounted:function(){var t=JSON.parse(sessionStorage.loginData);this.uDataLimit=t.uDataLimit,console.log("登录",JSON.parse(sessionStorage.loginData)),this.defaultSelectList(),this.getTableData()}}},618:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(69),s=a.n(i),n=a(13),r=a.n(n),l=a(102),o=a.n(l),c=a(4),u=(a.n(c),a(219)),d=(a.n(u),a(149)),p=a.n(d),m=a(122),h=a.n(m);e.default={components:{ElInputNumber:h.a,jdyCalendar:o.a,ElInput:p.a},name:"editSchedule",data:function(){return{btnFlag:!1,addType:this.$route.query.type,setType:[{value:0,label:"不对号入座"},{value:1,label:"对号入座(系统随机)"},{value:2,label:"对号入座(人工选择)"}],WeekDay:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],week:(new Date).getDay(),calendars:new Date,multiCalendars:"",sLeaveTime:new Date,banqiForm:{busDTOS:[],calendars:[new Date],sCarNum:null,sCarSeats:null,sGroupNum:null,sLeaveTime:"",sPrint:null,sProductId:11,sScheduleName:"",sScheduleNo:"",sShamNum:"",sSitType:"",sStopSale:null,sStopType:"",tickets:[],seatSold:0,fromProductListMenu:!1},TicketAddDTO:{id:"",tMarketPrice:"",tPeerPrice:"",tStock:""},busDto:{holdList:[],bSeatsLock:"",bSeatsNum:0,busHolds:[]},busHold:{bAccount:"",bCompanyId:"",bHoldHours:"",bSeat:""},banqiRule:{sScheduleNo:[{required:!0,message:"请输入班期编号",trigger:"blur"},{min:1,max:20,message:"班期编号最多20个字符！"}],sCarNum:[{required:!0,message:"请输入车辆数",trigger:"blur",numeric:!0,type:"number"}],sCarSeats:[{required:!0,message:"请输入座位数",trigger:"blur",numeric:!0,type:"number"}],sStopSale:[{required:!0,message:"请输入停售时间",trigger:"blur",numeric:!0,type:"number"}]},baseCategory:[],pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},saveUrl:api_prefix+"/Schedule/updateSchedule",ticketListUrl:api_prefix+"/ticket/list",getScheduleUrl:api_prefix+"/Schedule/scheduleWithTickets/"+this.$route.query.banqi+"/1",selectBusUrl:api_prefix+"/Bus/selectBus",addBusUrl:api_prefix+"/Bus/insertBus",removeBusUrl:api_prefix+"/Bus/deleteBus",updateLockSeatInfoUrl:api_prefix+"/Bus/updateLock",updateTemporarySeatInfoUrl:api_prefix+"/Bus/updateReserve",updateCarSeatNumUrl:api_prefix+"/Bus/updateSeat",ticketList:[],oldTickedList:[],ticketPage:{currPage:1,pageSize:30,total:0},ticketLimitType:{0:"无限制 ",1:"实名票",2:"限制性别",3:"限制年龄"},simpleWeekDay:["一","二","三","四","五","六","日"],tableData2:[{licenseNumber:"",seatNumber:"",company:"",reservePrescription:""}],carList:[],currentCar:-1,currentCompany:"",selectedList:[],temptoraryTime:null,companyList:[],loading:!1,canNotModifyCarNum:!1,currentCarSeatNum:0}},methods:{changeType:function(t){console.log(t,"-------------------"),this.banqiForm.sSitType=parseInt(t)},modifyCarSeatNum:function(){var t=this;if(this.currentCar<0)return this.$alert("请选择车辆","温馨提示",{type:"warning"}),void(this.currentCarSeatNum=e);var e=this.carList[this.currentCar].bSeatsNum,a=this.currentCarSeatNum;if(a<=0)return this.$alert("车座数请输入大于0的数字","温馨提示",{type:"warning"}),void(this.currentCarSeatNum=e);if(e<a)this.dealHttpReseponse(this.updateCarSeatNumUrl,{bSeatsNum:a,id:this.carList[this.currentCar].id},function(e){t.carList[t.currentCar].bSeatsNum=t.currentCarSeatNum});else if(e>a){var i=this.carList[this.currentCar].holdList.concat(this.carList[this.currentCar].bSeatsLock.split(",")),s=!0;i.forEach(function(t){parseInt(t)>=a&&(s=!1)}),s?this.dealHttpReseponse(this.updateCarSeatNumUrl,{bSeatsNum:a,id:this.carList[this.currentCar].id},function(e){t.carList[t.currentCar].bSeatsNum=t.currentCarSeatNum}):(this.$alert("有座位已经预留或者锁定，不能修改","温馨提示",{type:"warning"}),this.currentCarSeatNum=e)}},getTipContent:function(t){for(var e=this.carList[this.currentCar].busHolds,a=0;a<e.length;a++)if(-1!==e[a].bSeat.split(",").indexOf(t.toString()))return e[a].companyName?e[a].companyName:"暂无";return"没找到预留信息"},multiCanlederChange:function(t){this.multiCalendars=t},lockSeat:function(){var t=this;if(this.currentCar<0)return void this.$alert("请选择车辆","温馨提示",{type:"warning"});var e=this.carList[this.currentCar].bSeatsLock.split(",");this.selectedList=this.selectedList.filter(function(a){return-1==t.carList[t.currentCar].holdList.indexOf(a.toString())&&-1==e.indexOf(a.toString())}),this.selectedList.length?this.dealHttpReseponse(this.updateLockSeatInfoUrl,{bSeatsLock:this.selectedList.join(","),id:this.carList[this.currentCar].id,lock:!0},function(a){e.length?t.carList[t.currentCar].bSeatsLock=e.concat(t.selectedList).join(","):t.carList[t.currentCar].bSeatsLock=t.selectedList.join(","),t.selectedList=[]}):this.$alert("请选择未锁定且未预留的车座","温馨提示",{type:"warning"})},unlockSeat:function(){var t=this;if(this.currentCar<0)return void this.$alert("请选择车辆","温馨提示",{type:"warning"});this.selectedList=this.selectedList.filter(function(e){return-1!=t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())&&-1==t.carList[t.currentCar].holdList.indexOf(e.toString())}),this.selectedList.length?this.dealHttpReseponse(this.updateLockSeatInfoUrl,{bSeatsLock:this.selectedList.join(","),id:this.carList[this.currentCar].id,lock:!1},function(e){t.carList[t.currentCar].bSeatsLock=t.carList[t.currentCar].bSeatsLock.split(",").filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}).join(","),t.selectedList=[]}):this.$alert("请选择已经锁定的车座","温馨提示",{type:"warning"})},addTemporary:function(){var t=this;return console.log(this.currentCompany,"this.currentCompany"),this.currentCar<0?void this.$alert("请选择车辆","温馨提示",{type:"warning"}):null==this.currentCompany?void this.$alert("请先选择单位","温馨提示",{type:"warning"}):this.temptoraryTime?(this.selectedList=this.selectedList.filter(function(e){return-1==t.carList[t.currentCar].holdList.indexOf(e.toString())&&-1==t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())}),this.selectedList.length?void this.dealHttpReseponse(this.updateTemporarySeatInfoUrl,{bAccount:"",bBusId:this.carList[this.currentCar].id,bCompanyId:this.currentCompany,bHoldHours:this.temptoraryTime,bSeat:this.selectedList.join(","),reserve:!0},function(e){var a=t.getCurrentCompanyBusHold();if(a)a.bSeat=a.bSeat.split(",").concat(t.selectedList).join(","),a.bHoldHours=t.temptoraryTime;else{var i={bAccount:"",companyName:t.getCompanyName(t.currentCompany),bCompanyId:t.currentCompany,bHoldHours:t.temptoraryTime,bSeat:t.selectedList.join(",")};t.carList[t.currentCar].busHolds.push(i)}t.carList[t.currentCar].holdList=t.carList[t.currentCar].holdList.concat(t.selectedList.join(",").split(",")),console.log(t.carList[t.currentCar]),t.selectedList=[]}):void this.$alert("请选择未预留和未锁定的车座","温馨提示",{type:"warning"})):void this.$alert("请输入预留时效","温馨提示",{type:"warning"})},getCompanyName:function(t){var e="某有匹配的单位";return this.companyList.forEach(function(a){a.id.toString==t.toString&&(e=a.cName)}),e},getCurrentCompanyBusHold:function(){var t=this,e=null;return this.carList[this.currentCar].busHolds.forEach(function(a){a.bCompanyId==t.currentCompany&&(e=a)}),e},releaseTemporary:function(){var t=this;return this.currentCar<0?void this.$alert("请选择车辆","温馨提示",{type:"warning"}):(this.selectedList=this.selectedList.filter(function(e){return-1==t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString())}),this.selectedList.length?void this.dealHttpReseponse(this.updateTemporarySeatInfoUrl,{bBusId:this.carList[this.currentCar].id,bSeat:this.selectedList.join(","),reserve:!1},function(e){t.carList[t.currentCar].busHolds.forEach(function(e){e.bSeat=e.bSeat.split(",").filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}).join(",")}),t.carList[t.currentCar].holdList=t.carList[t.currentCar].holdList.filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}),t.selectedList=[]}):void this.$alert("请选择已经预留的座位","温馨提示",{type:"warning"}))},carNumChange:function(t){console.log("pre"+t);var e=this.carList.length;if(t>e)for(var a=0;a<t-e;a++)this.carList.push({holdList:[],bSeatsLock:"",bSeatsNum:this.banqiForm.sCarSeats,busHolds:[]});else if(t<e)for(var i=0;i<e-t;i++)this.carList.pop();console.log("after"+this.carList.length)},seatChange:function(t){this.currentCar>-1?this.banqiForm.sCarSeats=t:this.$alert("请选择车辆","温馨提示",{type:"warning"})},addCar:function(){var t=this;this.canNotModifyCarNum=!0,this.dealHttpReseponse(this.addBusUrl,{bScheduleId:this.$route.query.banqi,bSeatsNum:this.banqiForm.sCarSeats,num:1},function(e){t.banqiForm.sCarNum+=1,t.carNumChange(t.banqiForm.sCarNum),t.canNotModifyCarNum=!1,t.defaultBusList()})},removeCar:function(){var t=this;this.canNotModifyCarNum=!0,this.$confirm("你确定要删除该内容？","友情提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(t.currentCar>-1){if(t.carList[t.currentCar].holdList.length)return t.$alert("当前车辆已经预留了座位，不能删除","温馨提示",{type:"warning"}),void(t.canNotModifyCarNum=!1);if(t.carList[t.currentCar].bSeatsLock.length)return t.$alert("当前车辆已经锁定了座位，不能删除","温馨提示",{type:"warning"}),void(t.canNotModifyCarNum=!1);t.dealHttpReseponse(t.removeBusUrl,{bScheduleId:t.$route.query.banqi,id:t.carList[t.currentCar].id},function(e){t.banqiForm.sCarNum=t.banqiForm.sCarNum-1,t.carList.splice(t.currentCar,1),t.currentCar=-1,t.canNotModifyCarNum=!1},"post",function(e){t.canNotModifyCarNum=!1})}else t.$alert("请选择车辆","温馨提示",{type:"warning"}),t.canNotModifyCarNum=!1}).catch(function(){})},onSubmit:function(t){var e=this;this.dealBanqiFormData()&&this.$refs[t].validate(function(t){t?(e.btnFlag=!0,e.$http.post(e.saveUrl,e.banqiForm).then(function(t){0==t.data.code?(e.$message.success("修改成功"),setTimeout(function(){e.btnFlag=!1,e.$router.push({name:"assemblySchedule",query:{id:e.$route.query.id}})},1e3)):(e.btnFlag=!1,e.$alert(t.data.message))})):(e.btnFlag=!1,e.$message.error("提交失败"))})},dealBanqiFormData:function(){var t=this;if(this.banqiForm.calendars=[],this.calendars&&(this.banqiForm.calendars[0]=this.formatDate(this.calendars,"yyyy-MM-dd")),this.sLeaveTime&&(this.banqiForm.sLeaveTime=new Date(this.sLeaveTime)),new Date(this.banqiForm.calendars[0])<new Date(this.formatDate(new Date,"yyyy-MM-dd")))return this.$alert("出发时间不能早于今天","温馨提示",{type:"warning"}),!1;var e=[],a=!1;return this.$refs.multipleTable.selection.forEach(function(i){(!i.tMarketPrice||i.tMarketPrice<=0)&&(t.$alert("门市价不能为空且非负","温馨提示",{type:"warning"}),a=!0),i.tPeerPrice=i.tMarketPrice,i.chosen=1,e.push({id:i.id,tMarketPrice:i.tMarketPrice,tPeerPrice:i.tPeerPrice,tStock:i.tStock,choose:1})}),!a&&(e.length<=0?(this.$alert("请选择车票","温馨提示",{type:"warning"}),!1):((this.banqiForm.ticketsChanged=this.isTicketInfoChanged(e))&&(this.banqiForm.tickets=e),!0))},isTicketInfoChanged:function(t){if(t.length!=this.oldTickedList.length)return!0;t.sort(this.sortBy),this.oldTickedList.sort(this.sortBy);for(var e=0;e<t.length;e++)if(t[e].id!=this.oldTickedList[e].id||t[e].tMarketPrice!=this.oldTickedList[e].tMarketPrice||t[e].tPeerPrice!=this.oldTickedList[e].tPeerPrice||t[e].tStock!=this.oldTickedList[e].tStock||t[e].chosen!=this.oldTickedList[e].chosen)return!0;return!1},sortBy:function(t,e){return t.id-e.id},formatDate:function(t,e){if(t instanceof Date){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}throw new Error("日期格式转换发现错误的参数类型")},calendarsChange:function(t){this.week=t?new Date(t).getDay():null},goback:function(t){var e=this;this.$confirm("数据未保存，确定返回吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:"assemblySchedule",query:{id:e.$route.query.id}})}).catch(function(){})},getLimitType:function(t){return t?this.ticketLimitType[t]:"无限制"},getEffctiveDay:function(t){var e=this,a="";return t.toString().split("").forEach(function(t,i){parseInt(t)&&(a+=e.simpleWeekDay[i])}),a},setSeat:function(t){var e=this.selectedList.indexOf(t);-1==e?this.selectedList.push(t):this.selectedList.splice(e,1)},handleCurrentChange:function(t){this.currentCar=this.carList.indexOf(t),this.currentCarSeatNum=this.carList[this.currentCar].bSeatsNum,this.selectedList=[]},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t},searchCompany:function(t){this.defaultCompanyList(t)},defaultCompanyList:function(t){var e=this;this.loading=!0;var a={pageIndex:1};t&&(a.fastSearchStr=t),this.$http.post(api_prefix+"/Company/index",a,{emulateJSON:!0}).then(function(t){var a=t.body;"0"==a.code?e.companyList=a.body.list:e.$alert(a.message),e.loading=!1},function(t){e.loading=!1,e.$alert("网络错误")})},dealHttpReseponse:function(t,e,a,i,s){var n=this;i||(i="post"),this.$http[i](t,e).then(function(t){0==t.body.code?a&&a(t):(n.$alert(t.body.message,"温馨提示","error"),s&&s(t))},function(t){s&&s(t),n.$alert("网络错误","温馨提示","error")})},defaultBanqiForm:function(){var t=this;this.dealHttpReseponse(this.getScheduleUrl,null,function(e){var a=e.body.body;a.sCalendar&&(t.calendars=new Date(a.sCalendar)),a.sLeaveTime&&(t.sLeaveTime=a.sLeaveTime),t.ticketList=a.tickets,t.oldTickedList=[],setTimeout(function(){t.ticketList.forEach(function(e){e.tCategory=t.filterCategory(e.tCategory),e.chosen&&(t.oldTickedList.push(JSON.parse(r()(e))),t.$refs.multipleTable.toggleRowSelection(e))})},200),s()(t.banqiForm,a)},"get")},getCategory:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},filterCategory:function(t){var e=[];return""==t?t="---":e=this.baseCategory.filter(function(e){return t==e.id}),0!=e.length?e[0].name:t},defaultBusList:function(){var t=this;this.dealHttpReseponse(this.selectBusUrl,{bScheduleId:this.$route.query.banqi},function(e){var a=e.body.body;a.map(function(t){t.holdList=[],t.bSeatsLock||(t.bSeatsLock=""),t.busHolds.forEach(function(e){e.bSeat&&e.bSeat.length&&(t.holdList=t.holdList.concat(e.bSeat.split(",")))})}),t.carList=a})}},mounted:function(){this.getCategory(),this.currentCompany="",this.companyList=[],this.defaultCompanyList(),this.$route.query.banqi&&(this.defaultBanqiForm(),this.defaultBusList())}}},619:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(220),s=a.n(i),n=a(39),r=a.n(n),l=a(4),o=a.n(l),c=a(14),u=a.n(c),d=a(219),p=a.n(d);e.default={name:"Schedule",data:function(){var t;return t={datePicker:"",schedulesStatus:"",msg:"Schedule",booleanValue:{on:0,off:1},search:{currPage:1,pageSize:20,sCalendarEnd:null,sCalendarStart:null,sProductId:this.$route.query.id,flag:null,orderBy:1,tableDataTotal:0},ProductInfo:{pName:"",pNo:"",pType:"",createUser:""},productType:{10:"周边短线",11:"国内长线",20:"出境旅游",30:"邮轮",40:"特色游",50:"自助游"},ScheduleListUrl:api_prefix+"/Schedule/list",tableData:[],banqiForm:p.a.banqiForm,banqiForm2:p.a.banqiForm2,banqiRule:p.a.banqiRule,banqiRule2:p.a.banqiRule2,pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},journalCurrentData:{},currentPage:1,pageSize:100,multipleSelection:[],multipleSelection3:[],addBanqiFlag1:!1,addBanqiFlag2:!1,addBanqiFlag3:!1,stopSalesType:{0:function(t){return 60*t*1e3},1:function(t){return 60*t*60*1e3},2:function(t){return 24*t*60*60*1e3}},WeekDay:["一","二","三","四","五","六","日"],orderByList:{"按班期编号分组":1,"按出发日期分组":3,"按出发时分分组":5,"按星期几分组":7},updateStatusUrl:api_prefix+"/Schedule/updateStatus",fullscreenLoading:!1,clearCustomTicketsUrl:api_prefix+"/Schedule/clearCustomTickets/",alertJournalFlag:!1,h5Url:"",rowId:"",pid:null,module:"Schedule",journalTotal:0},r()(t,"journalCurrentData",[]),r()(t,"showstatue",0),t},methods:{getRowId:function(t){this.rowId=t,console.log(this.rowId,"this.rowId")},gotoH5:function(){var t=this.$route.query.id,e="";e="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",this.h5Url=e+"/wap/m/detail.html?p_id="+t+"&from=preview",console.log(this.h5Url,"this.h5Url")},goback:function(t){this.$router.push({name:t})},goLast:function(t){this.$router.push({name:t,query:{id:this.$route.query.id}})},look:function(){this.$alert("该功能暂未开放,敬请期待","温馨提示",{type:"warning"})},refreshBtn:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.getTableData()},1e3)},orderByChange:function(){this.getTableData()},dateRangeChange:function(t){if(t){var e=t.split(" - ");this.search.sCalendarStart=e[0],this.search.sCalendarEnd=e[1]}else this.search.sCalendarStart=null,this.search.sCalendarEnd=null;this.getTableData()},changeSelectStatus:function(t){this.search.flag=""!==t?Number(t):null,this.getTableData()},formatDate:function(t){if(s()(t)){var e=new Date(parseFloat(t)),a=e.getMonth()+1;return e.getFullYear()+"/"+a+"/"+e.getDate()}return""},getStopSaleDate:function(t,e,a,i){if(a>=0&&a<=2&&s()(t)){var n=this.stopSalesType[a](i),r=new Date(t).getFullYear(),l=new Date(t).getMonth(),o=new Date(t).getDate(),c=new Date(e).getHours(),u=new Date(e).getMinutes(),d=new Date(r,l,o,c,u,0);return d=new Date(d.getTime()-n),d.format("yyyy-MM-dd hh:mm")}return""},editBanqi:function(t){t||this.$message.error("请选择班期"),this.$router.push({name:"assemblyEditSchedule",query:{id:this.search.sProductId,banqi:t}})},editSeat:function(t){var e=this;this.$confirm("你确定要删除该内容？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(!t)return void e.$message.error("请选择班期");e.$http.get(e.clearCustomTicketsUrl+t).then(function(t){console.log(t);try{e.$message.success("操作成功")}catch(a){e.$message.error(t.body.message)}},function(t){e.$alert("网络错误","温馨提示","error")})}).catch(function(){})},delBanqi:function(t){var e=this;this.$confirm("你确定要删除该内容？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(!t)return void e.$message.error("请选择班期");e.$http.post(e.updateStatusUrl,{id:t,sStatus:2}).then(function(t){0==t.data.code?(e.getTableData(),setTimeout(function(){e.$message({showClose:!0,message:"删除成功",type:"success"})},500)):e.$alert(t.data.message)},function(t){console.log("出错了")})}).catch(function(){})},updateStatus:function(t){if(console.log("status: "+t),!this.rowId)return void this.$message.error("请选择班期");this.dealHttpReseponse(this.updateStatusUrl,{id:this.rowId,sStatus:t},function(){fun&&fun()})},changeStatus:function(t){this.updateStatus(t)},getTableData:function(){var t=this;this.dealHttpReseponse(this.ScheduleListUrl,this.search,function(e){var a=e.body.body;t.tableData=a.list,t.search.tableDataTotal=a.total})},upJia:function(){var t=this;this.dealHttpReseponse(this.ScheduleListUrl,{currPage:1,pageSize:5,sProductId:this.$route.query.id},function(e){e.body.body.list.length>0?t.effect(t.ProductInfo.companyId,t.ProductInfo.id,t.ProductInfo.updateUser):t.$alert("请先维护好线路，行程，票价，班期等信息","温馨提示",{type:"warning"})})},effect:function(t,e,a){var i=this;this.$http.post(api_prefix+"product/effect",{companyId:t,id:e,puserId:a}).then(function(t){0==t.body.code?(i.$message.success("入库成功"),setTimeout(function(){i.$router.push({name:"list"})},1e3)):i.$message.error("入库失败")},function(t){i.$message.error("入库失败")})},submitForm:function(t){this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;alert("submit!")})},addSingleTicket:function(){},removeSingleTicket:function(){},addTr:function(){this.ruleForm3.push(this.ruleForm3Obj),console.log(this.ruleForm3)},removeTr:function(){0==this.multipleSelection3.length?alert("请选择要删除的行!"):console.log(this.multipleSelection3)},cloneTr:function(){},handleCurrentJournalChange:function(t){},handleSizeChange:function(t){},handleCurrentChange:function(t){t&&t!=this.search.currPage&&(this.search.currPage=t,this.getTableData())},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t},addBanqi:function(t){this.$router.push({name:"ScheduleOne",query:{id:this.search.sProductId,type:t}})},defaultUserName:function(t){var e=this;this.dealHttpReseponse(api_prefix+"/user/get/"+t,{},function(t){try{e.ProductInfo.createUser=t.body.body.uRealName,e.showstatue=t.body.body.uStatus}catch(t){e.ProductInfo.createUser="没有的用户"}},"get")},defaultProductInfo:function(){var t=this;this.dealHttpReseponse(api_prefix+"/product/detail",{id:this.search.sProductId,tType:0,lineType:0},function(e){t.ProductInfo=e.body.body.body.product,t.defaultUserName(t.ProductInfo.createUser)},"post",function(){t.$alert("不存在的产品","温馨提示","error")})},dealHttpReseponse:function(t,e,a,i,s){var n=this;i||(i="post"),this.$http[i](t,e).then(function(t){0==t.body.code?a(t):s?s():n.$alert(t.body.message,"温馨提示","error")},function(t){n.$alert("网络错误","温馨提示","error")})},addBanqiClose:function(){this.addBanqiFlag1=!1,this.addBanqiFlag2=!1,this.addBanqiFlag3=!1,this.search.banqi="",t(".alertbgg").remove()},alertJournal:function(t){if(!this.pid)return void this.$alert("请选择用户");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"/logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.pid).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})},rowclickHandler:function(t,e,a){this.pid=t.id,this.companyId||(this.companyId=t.companyId),this.getLogData(1)}},created:function(){if(!this.search.sProductId)return void this.$message.error("请选择产品");this.defaultProductInfo(),this.getTableData()},components:{jdyAlert:o.a,jdyLog:u.a},computed:{}}}.call(e,a(2))},62:function(t,e,a){var i=a(1)(a(106),a(124),null,null,null);t.exports=i.exports},620:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(4),r=a.n(n),l=a(58);e.default={name:"",data:function(){return{btnFlag:!1,tickForm:{ascription:1,userId:JSON.parse(sessionStorage.loginData).userId,tCompanyId:JSON.parse(sessionStorage.loginData).uCompanyId,tProductId:this.$route.query.id,tTicketType:0,tType:0,tName:"成人票",tLimitType:0,tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:0,tGatherPrice:0,tAdultNum:1,tChildNum:0,tPeerPrice:1,tPriceAdd:"",tPriceReduce:"",tStock:-1,tEffectWeek:[],tIntroduction:"",ticketDepartureList:[],ticketAreaList:[]},productDetail:{},baseCategory:[],limits:null,selectCityArr:{id:[],name:[]},showcfCityFlag:!1,proviceArr:{},submitArr:[],selectStationArr:[],stationArr:{},checkWeekAll:!1,rules:{tName:[{required:!0,message:"请输入票价名称",trigger:"blur"},{max:20,message:"长度在20个字符以内",trigger:"blur"}],tType:[{type:"number",required:!0,message:"请输入票价类型",trigger:"change"}],tCategory:[{type:"number",required:!0,message:"请输入票价类目",trigger:"blur"}],tTraffic:[{type:"number",required:!0,message:"请输入交通类目",trigger:"change"}],tEffectWeek:[{type:"array",required:!0,message:"请选择周几有效",trigger:"change"}],tMarketPrice:[{validator:l.a,trigger:"blur"},{required:!0,message:"请输入门市价"}],selectStationArr:[{required:!0,message:"请选择始发站",trigger:"change"}],tPriceAdd:[{validator:l.a,trigger:"blur"}],tPriceReduce:[{validator:l.a,trigger:"blur"}]}}},methods:{getProductDetail:function(){var t=this,e={id:this.$route.query.id,lineType:0};this.$http.post(api_prefix+"product/detail",e).then(function(e){0==e.data.code?t.productDetail=e.data.body.body.product:t.$alert(e.data.message)},function(t){console.log("获取产品详情出错了")})},toEdit:function(){var t=this;1==this.$route.query.type&&this.$http.get(api_prefix+"ticket/get/"+this.$route.query.priceId+"/0").then(function(e){0==e.data.code?(t.tickForm=e.data.body,t.tickForm.tLimitCondition=e.data.body.tLimitCondition,t.getStationList(!1),t.formatEdit()):t.$alert("获取当前编辑数据失败！")},function(t){console.log("获取当前编辑数据失败！")})},formatEdit:function(){var t=this;this.checkWeekAll=1111111==this.tickForm.tEffectWeek,this.tickForm.tEffectWeek=this.num2week(this.tickForm.tEffectWeek),this.tickForm.ticketAreaList.forEach(function(e){t.selectCityArr.name.push(e.taCity)}),this.submitArr=this.tickForm.ticketAreaList,this.tickForm.ticketDepartureList.forEach(function(e){t.selectStationArr.push(e.departueId)});var e=this.baseCategory.filter(function(e){return t.tickForm.tCategory==e.id});0!=e.length&&(this.tickForm.tCategory=e[0].id);var a=this.tickForm.tLimitCondition;this.getLimits(this.tickForm.tLimitType),this.$nextTick(function(e){t.tickForm.tLimitCondition=a,2==t.tickForm.tLimitType&&(t.tickForm.tLimitCondition=0==t.tickForm.tLimitCondition?"男":"女")})},getLimits:function(t){this.tickForm.tLimitCondition="",this.limits=t},getName:function(t){this.$route.query.type||(this.tickForm.tName=1==t?"儿童票":"成人票"),0==t?(this.tickForm.tAdultNum=1,this.tickForm.tChildNum=0):(this.tickForm.tAdultNum=0,this.tickForm.tChildNum=1),console.log(this.tickForm.tAdultNum,"090909090"),console.log(this.tickForm.tChildNum,"090909090")},handleCheckAllWeek:function(t){t.target.checked?this.tickForm.tEffectWeek=["周一","周二","周三","周四","周五","周六","周日"]:this.tickForm.tEffectWeek=[]},getSelectWeeks:function(t){this.checkWeekAll=7==t.length},week2num:function(){for(var t=0,e=0;e<this.tickForm.tEffectWeek.length;e++)switch(this.tickForm.tEffectWeek[e]){case"周一":t+=1e6;break;case"周二":t+=1e5;break;case"周三":t+=1e4;break;case"周四":t+=1e3;break;case"周五":t+=100;break;case"周六":t+=10;break;case"周日":t+=1}return(Array(7).join("0")+t).slice(-7)},num2week:function(t){if("0000000"==t)return"未设置";for(var e=[],a={0:"一",1:"二",2:"三",3:"四",4:"五",5:"六",6:"日"},i=t.split(""),s=0;s<i.length;s++)1==i[s]&&e.push("周"+a[s]);return e},showtfCity:function(){this.showcfCityFlag=!0,this.selectStationArr=[],this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity"),jdyFn.selectCity2()})},closecfCity:function(){this.showcfCityFlag=!1,t(".alertbgg").remove()},getCategory:function(){var t=this;this.$http.post(api_prefix+"/Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},saveCC:function(){this.selectCityArr=jdyFn.selectCity2();var e=t(".showtfcityaaa-content span.active"),a={},i=0,s=void 0;this.submitArr=[];for(var n=0;n<e.length;n++)i=t(e[n]).index(),s=t(e[n]).parent().siblings(".hide"),a={taCountry:s.children(".taCountry").eq(i).text(),taProvince:s.children(".taProvince").eq(i).text(),taCity:t(e[n]).text()},this.submitArr.push(a);console.log("投放城市",this.selectCityArr,e,this.submitArr),this.getStationList(!1),this.closecfCity()},removeAll:function(){t(".showtfcityaaa-span.active").removeClass("active"),this.submitArr=[]},selectAllAll:function(){t(".showtfcityaaa-content span").addClass("active"),console.log("投放城市",this.selectCityArr,this.submitArr)},defaultProviceArr:function(){var t=this;this.$http.post(api_prefix+"/City/selectCityPutList",{isopen:!0}).then(function(e){t.proviceArr=e.body.body,t.toEdit()})},getStationList:function(t){var e=this;console.log(999);var a={citys:this.selectCityArr.name,companyId:this.tickForm.tCompanyId,currPage:1,dStatus:0,dTraffic:this.tickForm.tTraffic,pageSize:1e4};t&&(console.log("1111",t),this.selectStationArr=[]),this.$http.post(api_prefix+"departure/start_site_group",a).then(function(t){0==t.data.code&&(e.stationArr=t.body.body.resultList)})},clearSFstation:function(){console.log("选的始发站",this.selectStationArr),this.selectStationArr=[]},goback:function(t){var e=this;this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t,query:{id:e.$route.query.id}})}).catch(function(){})},onSubmit:function(){var t=this;this.$refs.tickForm.validate(function(e){if(e){var a=JSON.parse(s()(t.tickForm));if(3==a.tLimitType){if(!/^<+?[1-9][0-9]*$|^>+?[1-9][0-9]*$|^\d+-[1-9][0-9]*$/.test(a.tLimitCondition))return void t.$message.error('只能输入"<正整数 或 >正整数 或 正整数—正整数",如<10、>10、10-20等')}if(0==a.tMarketPrice)return void t.$message.error("门市价不能为0");if(0==t.selectStationArr.length)return void t.$message.error("始发站不能为空");if(0==a.tType&&0==a.tAdultNum)return void t.$message.error("选择成人票，成人数不能小于1");if(1==a.tType&&0==a.tChildNum)return void t.$message.error("选择儿童票，儿童数不能小于1");a.ticketDepartureList=[],t.selectStationArr.forEach(function(t){a.ticketDepartureList.push({departueId:t})}),a.ticketAreaList=t.submitArr;var i="";i=1==t.$route.query.type?"ticket/update":"ticket/save",a.tEffectWeek=t.week2num(),a.tPeerPrice=a.tMarketPrice,t.btnFlag=!0,t.$http.post(api_prefix+i,a).then(function(e){var a=e.body;"0"==a.code?(t.btnFlag=!1,t.$alert("保存成功","温馨提示",{type:"success"}),t.$router.push({name:"assemblyTicketprice",query:{id:t.$route.query.id}})):(t.btnFlag=!1,t.$alert(a.message,"温馨提示",{type:"error"}))},function(e){t.$alert("保存失败","温馨提示",{type:"error"})})}else t.$message.error("提交失败了")})}},components:{jdyAlert:r.a},watch:{selectCityArr:"getStationList(false)"},mounted:function(){var e=this;this.getProductDetail(),this.defaultProviceArr(),this.getCategory(),t("#TrafficDiv .el-input").click(function(){e.selectStationArr=[]}),console.log("redstar:",t(".el-form-item.redstar .el-form-item__label").text())}}}.call(e,a(2))},621:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(14),r=a.n(n);e.default={name:"ticketprice",data:function(){return{msg:"Ticketprice",search:{selectProduct:"",addProduct:"",selectProduct_select:""},productDetail:{},limits:null,searchParams:{currPage:1,pageSize:100,tName:"",tProductId:this.$route.query.id,flag:1},focusPriceId:null,tableDataTotal:0,tickForm:{userId:123,tCompanyId:123,tProductId:this.$route.query.id,tTicketType:0,tType:"",tName:"",tLimitType:"",tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:"",tPeerPrice:"",tPriceAdd:"",tPriceReduce:"",tStock:"",tIntroduction:"",ticketDepartureList:[{ticketId:1,departueId:""}],ticketAreaList:[{taTicketId:1,taCountry:"CN",taProvince:"山东",taCity:""}]},rules:{tName:[{required:!0,message:"请输入票价名称",trigger:"blur"}],tType:[{required:!0,message:"请输入票价类型",trigger:"change"}],tTraffic:[{required:!1,message:"请输入交通类目",trigger:"change"}],tMarketPrice:[{required:!0,message:"请输入门市价",trigger:"blur"}],tPeerPrice:[{required:!0,message:"请输入同行价",trigger:"blur"}],tEffectWeek:[{type:"array",required:!0,message:"请选择周几有效",trigger:"change"}],ticketAreaList:[{}],ticketDepartureList:[{}]},tickForm2:{tType:"",tName:"",tLimitType:"",tCategory:"",tTraffic:"",tLimitCondition:"",tMarketPrice:1,tPeerPrice:2,tPriceAdd:3,tPriceReduce:3,tStock:1,tEffectWeek:[],sets:"",departureList:"",tIntroduction:""},rules2:{tType:[{required:!0,message:"请输入票价类型",trigger:"change"}],tName:[{required:!0,message:"请输入票价名称",trigger:"blur"}],tTraffic:[{required:!0,message:"请输入交通类目",trigger:"change"}],tPeerPrice:[{required:!0,message:"请输入同行价",trigger:"blur"}],tEffectWeek:[{required:!0,message:"请选择周几有效",trigger:"change"}],tMarketPrice:[{required:!0,message:"请输入门市价",trigger:"blur"}],sets:[{required:!0,message:"请输入投放市场",trigger:"blur"}]},tickForm3:[{tType:"",tName:"",tLimitType:"",tCategory:"",tTraffic:"",tLimitCondition:"",tMarketPrice:1,tPeerPrice:2,tPriceAdd:3,tPriceReduce:3,tStock:1,tEffectWeek:[],sets:"",departureList:"",tIntroduction:""}],tickForm3Obj:{userId:123,tCompanyId:123,tProductId:123,tTicketType:0,tType:"",tName:"123",tLimitType:"",tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:"",tPeerPrice:"",tPriceAdd:"",tPriceReduce:"",tStock:"",tEffectWeek:[],tIntroduction:"",ticketDepartureList:[{ticketId:1,departueId:""}],ticketAreaList:[{taTicketId:1,taCountry:"CN",taProvince:"山东",taCity:""}]},rules3:{},tableData:[],currentPage:1,pageSize:100,addProductFlag1:!1,addProductFlag2:!1,addProductFlag3:!1,tableData3:[{tStatus:"1",tName:"王小虎",tsSeats:3,tType:1,tMarketPrice:1,tPeerPrice:1,tEffectWeek:"周一",tLimitType:"2",tLimitCondition:"1",updateTime:"2017-07-02"}],multipleSelection:[],multipleSelection3:[],fullscreenLoading:!1,baseCategory:[],module:"Ticket",journalTotal:0,journalCurrentData:[],alertJournalFlag:!1,journalStyle:{top:"164px",left:"300px"},booleanValue:{on:0,off:1},logId:""}},mounted:function(){this.getProductDetail(),this.getCategory(),this.getTableData()},methods:{handleRemove:function(t,e){console.log(t,e)},getProductDetail:function(){var t=this,e={id:this.$route.query.id,lineType:0};this.$http.post(api_prefix+"product/detail",e).then(function(e){0==e.data.code?t.productDetail=e.data.body.body.product:t.$alert(e.data.message)},function(t){console.log("获取产品详情出错了")})},editFare:function(t,e,a){0==a?this.$router.push({name:"assemblyAddfare",query:{id:t,priceId:e,type:1}}):this.$router.push({name:"Ticketmanagement",query:{id:t,priceId:e,type:1}})},setDefaultPrice:function(){var t=this;if(null==this.focusPriceId)this.$alert("请选择一个票价");else{var e={id:this.focusPriceId,tProductId:this.$route.query.id};this.$http.post(api_prefix+"ticket/default",e).then(function(e){t.$alert(e.data.message),t.getTableData()},function(t){console.log("设置默认价格出错了")})}},getCategory:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},filterCategory:function(t){var e=[];return""==t?t="---":e=this.baseCategory.filter(function(e){return t==e.id}),0!=e.length?e[0].name:t},getRowId:function(t){this.focusPriceId=t,console.log(this.focusPriceId,"this.focusPriceId")},setStatus:function(t){var e=this;console.log(t,"status"),this.$http.post(api_prefix+"ticket/status",{id:this.focusPriceId,tStatus:t}).then(function(t){0==t.data.code?e.getTableData():e.$message.error("票价状态修改失败")},function(t){console.log("修改票价状态出错了")})},getLimits:function(t){this.tickForm.tLimitCondition="",this.limits=t},deleteRow:function(t,e,a){var i=this;this.$confirm("是否删除该票价？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.splice(t,1);var s={id:a,tStatus:2};i.$http.post(api_prefix+"ticket/status",s).then(function(t){0==t.data.code?i.getTableData():i.$message.error("票价删除失败"),i.getTableData()},function(t){console.log("票价删除出错了")})}).catch(function(){})},searchTableData:function(){this.searchParams.currPage=1,this.currentPage=1,this.getTableData()},alertJournal:function(t){if(!this.logId)return void this.$alert("请选择一个票价");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.logId).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})},updatePage:function(){var t=this;this.fullscreenLoading=!0,this.searchParams={currPage:1,pageSize:100,tName:"",tProductId:this.$route.query.id,flag:1},setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.currentPage=1,t.getTableData()})},getTableData:function(){var t=this;this.$http.post(api_prefix+"ticket/outList",this.searchParams).then(function(e){var a=e.data.body;a.list.forEach(function(e){e.tickList.forEach(function(e){switch(e.tCategory=t.filterCategory(e.tCategory),e.tTraffic){case 0:e.tTraffic="飞机";break;case 1:e.tTraffic="火车";break;case 2:e.tTraffic="汽车";break;case 3:e.tTraffic="邮轮"}if(e.tLimitType&&""!=e.tLimitType)switch(e.tLimitType){case 0:e.tLimitCondition="无";break;case 1:e.tLimitCondition="实名";break;case 2:0==e.tLimitCondition?e.tLimitCondition="男":e.tLimitCondition="女"}else e.tLimitType=99,e.tLimitCondition="---";if(0==e.departureList.length)e.departureList="未设置";else{var a=[];e.departureList.forEach(function(t){a.push(t.dName)}),e.departureList=a.join(",")}})}),t.tableData=a.list,t.tableDataTotal=a.total},function(t){console.log("出错了")})},addProduct:function(t){1==t&&this.$router.push({name:"assemblyAddfare",query:{id:this.$route.query.id}}),2==t&&this.$router.push({name:"Ticketmanagement",query:{id:this.$route.query.id}}),3==t&&this.$router.push({name:"Batchfare",query:{id:this.$route.query.id}}),(this.addProductFlag1||this.addProductFlag2||this.addProductFlag3)&&this.$nextTick(function(){jdyFn.setAlertStyle("")})},submitForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return console.log("error submit!!"),!1;"tickForm"==t&&e.$http.post(api_prefix+"/ticket/save",e.tickForm).then(function(t){var a=t.data.code;alert(a),e.$router.go({name:"Ticketprice"})},function(t){console.log("添加票价出错了")}),"tickForm2"==t&&e.$http.post(api_prefix+"/ticket/save",e.tickForm2).then(function(t){var a=t.data.code;alert(a),e.$router.go({name:"Ticketprice"})},function(t){console.log("添加套票出错了")}),"tickForm3"==t&&e.$http.post(api_prefix+"/ticket/saveBash",e.tickForm3).then(function(t){var a=t.data.code;alert(a),e.$router.go({name:"Ticketprice"})},function(t){console.log("批量添加出错了")})})},handleCurrentJournalChange:function(t){},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){t&&(this.searchParams.currPage=t,this.searchParams.pageNum=t,this.getTableData())},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t},handleRowChange:function(t){this.logId=t.id,this.getLogData(1)},onSubmitGo:function(t){this.$router.push({name:t,query:{id:this.$route.query.id}})},goback:function(t){this.$router.push({name:t,query:{id:this.$route.query.id}})}},filters:{filterType:function(t){return 0==t?"单票":1==t?"套票":"未设置"},filterProType:function(t){if(!(62|null==t))return"未设置";switch(t){case null:return"全部类型";case 10:return"周边短线";case 11:return"国内长线";case 20:return"出境旅游";case 30:return"邮轮";case 40:return"特色游";case 50:return"自助游"}},filterLimitType:function(t){if(!(99|0==t))return"未设置";switch(t){case 0:return"无限制";case 1:return"实名制";case 2:return"限制性别";case 3:return"限制年龄";case 99:return"---"}},filterEffectWeek:function(t){if("0000000"==t)return"未设置";for(var e=[],a={0:"一",1:"二",2:"三",3:"四",4:"五",5:"六",6:"日"},i=t.split(""),s=0;s<i.length;s++)1==i[s]&&e.push(a[s]);return e.join(" ")}},computed:{},components:{jdyAlert:s.a,jdyLog:r.a}}},622:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(13),s=a.n(i);e.default={name:"Hotel",data:function(){return{numObj:{list:[],itemindex:null},datePicker:[(new Date).setTime((new Date).getTime()+864e5),(new Date).setTime((new Date).getTime()+6048e5)],productCostingTitle:{productName:null,relId:this.$route.query.pid,type:1,peopleNum:null,peopleNumExplain:null,isExempt:0,isExemptExplain:null,beginTime:null,endTime:null,companyId:this.$route.query.c_id},productCostingCategoryDetailList:[],DetailListCell:{categoryId:null,content:"",amount:null,unit:null,unitPrice:null,remark:""},tableData:[],total:{sum1_6:null,sum7_9:null,sum1_9:null,costSingle:null,allTotal:null},readOnly:!0,productType:""}},methods:{getCostPage:function(){var t=this,e={type:1,productType:this.productType,productId:this.$route.query.pid,companyId:this.$route.query.c_id};1==this.$route.query.type?(e.id=this.$route.query.id,this.readOnly=!0):this.readOnly=!1,this.$http.post(api_prefix+"productCosting/queryProductCostingAllInformationById",e).then(function(e){if(0==e.data.code){var a=e.data.body;t.productCostingTitle.productName=a.productName,t.productCostingTitle.peopleNum=a.peopleNum,t.productCostingTitle.peopleNumExplain=a.peopleNumExplain,t.productCostingTitle.isExempt=Number(a.isExempt),t.productCostingTitle.isExemptExplain=a.isExemptExplain,t.productCostingTitle.beginTime=t.changeMusterTime(a.beginTime),t.productCostingTitle.endTime=t.changeMusterTime(a.endTime),t.datePicker=[t.productCostingTitle.beginTime,t.productCostingTitle.endTime],t.numObj.list=[],a.productCostingCategoryInformationList.forEach(function(e,a){var i=JSON.parse(s()(t.DetailListCell));e.productCostingCategoryDetailList.push(i),50!=e.categoryId&&20!=e.categoryId&&(e.listSize=e.listSize+1),t.numObj.list.push(e.listSize)}),t.tableData=a.productCostingCategoryInformationList,t.getTotalCell()}else t.judgeIsNull()},function(e){t.$alert("获取成本明细失败！","温馨提示",{type:"error"})})},judgeIsNull:function(){var t=this;this.readOnly=!1,this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:240}).then(function(e){if(0==e.body.code){var a=e.body.body;t.numObj.list=[],a.forEach(function(e,a){e.categoryName=e.dName,e.categoryId=e.dSort,e.listSize=0,e.productCostingCategoryDetailList=[];var i=JSON.parse(s()(t.DetailListCell));e.productCostingCategoryDetailList.push(i),t.numObj.list.push(0),e.subtotal=0}),t.tableData=a}else t.$alert(e.body.message,"温馨提示",{type:"error"});return!0},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})},save:function(){var t=this,e=[];if(this.tableData.forEach(function(t,a){t.productCostingCategoryDetailList.forEach(function(a,i){""!=a.content&&null!=a.amount&&null!=a.unitPrice&&(a.categoryId=t.categoryId,e.push(a))})}),0==e.length)return void this.$message.info("请填写具体项目明细！");this.productCostingTitle.productType=this.productType;var a={productCostingTitle:this.productCostingTitle,productCostingCategoryDetailList:e};this.$http.post(api_prefix+"productCosting/addProductCosting",a).then(function(e){0==e.data.code?(t.$message.success("保存成功！"),window.history.go(-1)):t.$alert(e.body.message,"温馨提示",{type:"error"})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})},inputChange:function(t){var e=this;setTimeout(function(){if(e.numObj.list[e.numObj.itemindex]>t)e.tableData[e.numObj.itemindex].productCostingCategoryDetailList.pop();else{var a=JSON.parse(s()(e.DetailListCell));e.tableData[e.numObj.itemindex].productCostingCategoryDetailList.push(a)}e.numObj.list[e.numObj.itemindex]=t},100)},getIndex:function(t){this.numObj.itemindex=t},inputdesc:function(){var t=this;setTimeout(function(){t.tableData[t.numObj.itemindex].productCostingCategoryDetailList.pop(),t.tableData[t.numObj.itemindex].listSize=t.tableData[t.numObj.itemindex].listSize-1},100)},inputadd:function(){var t=this;setTimeout(function(){var e=JSON.parse(s()(t.DetailListCell));t.tableData[t.numObj.itemindex].productCostingCategoryDetailList.push(e),t.tableData[t.numObj.itemindex].listSize=t.tableData[t.numObj.itemindex].listSize+1},100)},getTotalCell:function(t){var e=null;t?(this.tableData[t].productCostingCategoryDetailList.forEach(function(t,a){e+=t.amount*t.unitPrice}),this.tableData[t].subtotal=e):this.tableData.forEach(function(t,e){t.subtotal=0,t.productCostingCategoryDetailList.forEach(function(e,a){t.subtotal+=e.amount*e.unitPrice})}),this.sumTotalCell(1,6),this.sumTotalCell(8,10),this.sumTotalCell(1,10),this.sumTotalCell(1,11),this.costSingleTotal()},sumTotalCell:function(t,e){var a=this.tableData.slice(t-1,e),i=0,s=0;a.forEach(function(t,e){i+=t.subtotal,50==t.categoryId&&(s=t.subtotal)}),1==t&&6==e?this.total.sum1_6=i:8==t&&10==e?this.total.sum7_9=i:1==t&&10==e&&(this.total.sum1_9=i-s),this.total.allTotal=i},costSingleTotal:function(){var t=null;this.tableData.forEach(function(e,a){e.productCostingCategoryDetailList.forEach(function(e,a){e.unitPrice&&(t+=Number(e.unitPrice))})}),this.total.costSingle=t},dateRangeChange:function(t){if(t){var e=t.split(" - ");this.productCostingTitle.beginTime=e[0],this.productCostingTitle.endTime=e[1]}else this.productCostingTitle.beginTime=null,this.productCostingTitle.endTime=null},changeMusterTime:function(t){if(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth(),s=e.getDate();return a+"-"+(i+1>=10?i+1:"0"+(i+1))+"-"+(s+1<10?"0"+s:s)}},goback:function(){if(1==this.$route.query.type)return void window.history.go(-1);this.$confirm("添加成本数据未保存，是否要返回？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.history.go(-1)}).catch(function(){})}},mounted:function(){var t=this;this.$http.post(api_prefix+"/product/detail",{id:this.$route.query.pid,lineType:0}).then(function(e){if(0==e.data.body.code){var a=e.data.body.body.product;t.productType=1==a.ascription?"2":"1",1==t.$route.query.isNull&&(t.productCostingTitle.productName=a.pName),t.getCostPage()}else t.$alert(e.body.message,"温馨提示",{type:"error"})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})}}},623:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(4),r=a.n(n),l=a(14),o=a.n(l);t(function(){t(".jdy-main-scroll").scrollTop(0)}),e.default={name:"list",data:function(){return{h5Url:"",confirmlist:[],puserId:1,jdytabActive:null,type:{0:"全部类型",10:"周边短线",11:"国内长线",20:"出境长线",21:"出境短线",30:"邮轮",50:"自由行",51:"出境海岛",52:"定制旅游",54:"团队会奖",55:"签证服务",56:"机票预订",57:"酒店预订",58:"单项委托",59:"其他服务",60:"户外拓展",61:"游学/研学",62:"自驾游",63:"全球旅拍",64:"旅游金融",65:"旅游地产",66:"亲子"},brandList:[],brandSearchParams:{bCompanyId:null,bDel:null,bName:null,bStatus:null,puserId:0},tableData:[],companyData:[],companyValue:"",setkeyTags:[],setkeyTagsAll:[],setkeyInputVisible:!1,setkeyTagsMax:4,setkeyTagsNumber:0,setkeyInputValue:"",setkeyTagType:"danger",alertSetkeyFlag:!1,setkeyStyle:{},setkeySelectTags:[],alertJournalFlag:!1,journalStyle:{top:"164px",left:"300px"},currentPage:1,pageSize:10,companyName:"",companyType:null,companiesOptions:[],searchParams:{puserId:null,companyId:null,pName:null,pType:"0",pageSize:10,currPage:1,pStatus:null},deleteTripsParams:{tProductId:"",tType:1,puserId:0,tcStartDay:null,tcEndDay:null},tableDataTotal:0,addFlag:null,productsKeywords:[],allProductsKeywords:[],currentSelectKey:null,newKeywordForm:{companyId:null,kName:null,lSort:null,kColor:null},isOpen:"1",editType:[],tripDays:0,pid:null,c_id:null,module:"Product",journalTotal:0,journalCurrentData:[],rules:{kName:[{required:!0,message:"请输入名称",trigger:"blur"},{max:5,message:"最多输入5个字符",trigger:"blur"}],lSort:[{type:"number",message:"排序必须为数字值"}]},fullscreenLoading:!1,loading:!1,contractFlag:!1,tempId:null,tempIdGroup:[],BuyerCompanyIdArr:[],companyIdFlag:!1}},mounted:function(){var t=this,e=JSON.parse(sessionStorage.loginData);this.companyId=e.uCompanyId,this.newKeywordForm.companyId=e.uCompanyId,this.companyType=e.cType,this.brandSearchParams.bCompanyId=this.companyId,this.brandSearchParams.companyId=this.companyId,3==e.uDataLimit?(this.searchParams.companyId=e.uCompanyId,this.getBuyerCompanyId(),this.companyIdFlag=!0):this.searchParams.companyId=e.uCompanyId,this.$http.post(api_prefix+"/Company/index?pageIndex=1",{fastSearchStr:e.cName},{emulateJSON:!0}).then(function(e){t.companiesOptions=e.body.body.list},function(t){console.log("出错了")}),this.getTableData(),this.searchBrands()},methods:{gotoH5:function(t){var e="";e="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",this.h5Url=e+"/wap/m/detail.html?p_id="+t+"&from=preview",console.log(this.h5Url,"this.h5Url")},goAssemblyLine:function(){this.$router.push({name:"assemblyLine"})},deleteRelation:function(t){var e=this;this.$http.post(api_prefix+"/productKey/deleteProductKeyRelation?keyId="+t.id+"&productId="+this.pid).then(function(a){if(0==a.data.code){var i=e.productsKeywords.indexOf(t);i>-1&&(e.productsKeywords.splice(i,1),e.setkeyTagsNumber--),e.$message({showClose:!0,message:"删除成功",type:"success"})}},function(t){console.log("获取日志出错了")})},changeColor:function(e){t(".alertTagMain a li").removeClass("active"),t(".alertTagMain a li").eq(e).addClass("active"),this.newKeywordForm.kColor=e,this.changeViewBtn()},getCurrentKeyword:function(t){console.log(t,"item"),console.log(this.setkeyTagsNumber,"setkeyTagsNumber"),this.setkeyTagsNumber<4?this.productsKeywords.indexOf(t)<0?(this.productsKeywords.push(t),this.currentSelectKey=t.id,this.setkeyTagsNumber++):this.$alert("请不要重复选择同一关键词"):this.$alert("最多可以选择4个关键词")},saveAddTag:function(){var t=this;this.$refs.newKeywordForm.validate(function(e){e&&t.$http.post(api_prefix+"productKey/saveNewKey",t.newKeywordForm).then(function(e){0==e.data.code?(t.$message({showClose:!0,message:"添加成功",type:"success"}),t.getProductsKeywords(),t.getAllProductsKeywords()):t.$message({type:"success",message:"保存成功!"})},function(t){console.log("出错了")})})},getAllProductsKeywords:function(){var t=this;this.$http.post(api_prefix+"productKey/selectKeyListByCompanyId",{companyId:this.companyId,currPage:1,pageSize:1e3}).then(function(e){t.allProductsKeywords=[],e.data.body.resultList.forEach(function(e){t.allProductsKeywords.push(e)})},function(t){console.log("获取日志出错了")})},getProductsKeywords:function(){var t=this;this.$http.post(api_prefix+"/productKey/selectKeyListByProductId?productId="+this.pid).then(function(e){t.productsKeywords=[],e.data.body.forEach(function(a){t.productsKeywords.push(a),t.setkeyTagsNumber=e.data.body.length>0?e.data.body.length:0})},function(t){console.log("获取日志出错了")})},alertSetkey:function(){this.newKeywordForm.kName=null,this.newKeywordForm.lSort=null,this.newKeywordForm.kColor=null,this.kName=null,this.currentSelectKey=null,this.alertSetkeyFlag=!this.alertSetkeyFlag,this.setkeyTagsNumber=0,this.$set(this.editType,this.pid,null)},gotoEditPage:function(t){return 1!=this.alertJournalFlag||this.pid?1==t?void(location.href="/transfer.html#/assemblylist/assemblyLine?id="+this.pid):3==t?void(location.href="/transfer.html#/assemblylist/assemblyTicketprice?id="+this.pid):4==t?void(location.href="/transfer.html#/assemblylist/assemblySchedule?id="+this.pid):8==t?void(location.href="/transfer.html#/assemblylist/addCostList?id="+this.pid+"&c_id="+this.companyId):(9==t&&this.getContract(),this.pid?void(7==t&&(location.href="#/list/assemblylist?copyId="+this.pid)):void this.$alert("请选择产品")):void this.$alert("请选择产品")},getContract:function(){var t=this;this.$http.get(api_prefix+"front/order/m/electronicContract/prodTempList/"+this.pid).then(function(e){if(0==e.data.code){t.openContract();var a=e.data.body;t.tempId=a.id,t.tempIdGroup=a.list,t.tempIdGroup.push({templateTitle:"线下签署",id:0})}else t.$alert(e.data.message)},function(t){console.log("出错了")})},saveContract:function(){var t=this,e={currPage:1,pageSize:20,pid:this.pid,tid:this.tempId};this.$http.post(api_prefix+"front/order/m/electronicContract/bindProAndTmp",e).then(function(e){0==e.data.code?(t.$message.info("保存成功！"),t.closeContract()):t.$alert(e.data.message),t.getTableData()},function(t){console.log("出错了")})},openContract:function(){this.contractFlag=!0,this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity")})},closeContract:function(){this.contractFlag=!1,t(".alertbgg").remove(),this.$set(this.editType,this.pid,null)},deleteProduct:function(t){var e=this;this.$confirm("是否要删除该产品？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(api_prefix+"product/delete/"+t).then(function(t){0==t.data.code?e.$message.success("删除成功"):e.$alert(t.data.message),e.getTableData()},function(t){console.log("出错了")})}).catch(function(){})},alertJournal:function(t){if(!this.pid)return void this.$alert("请选择产品");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"/logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.pid).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})},rowclickHandler:function(t,e,a){this.pid=t.id,this.tripDays=t.pDays,this.getLogData(1),this.getProductsKeywords(),this.getAllProductsKeywords()},deleteTrips:function(t,e,a){var i=this;this.deleteTripsParams.tProductId=t,this.deleteTripsParams.tcStartDay=e,this.deleteTripsParams.tcEndDay=a,this.$confirm("你确定要删除该行程？","温馨提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){i.$http.post(api_prefix+"/trip/batchDelete",i.deleteTripsParams).then(function(t){0==t.data.code?i.$message({showClose:!0,message:"删除成功",type:"success"}):i.$alert(t.data.message),i.getTableData()},function(t){console.log("出错了")})})},changeConfirm:function(t){var e=this;0==t.pConfirm?t.pConfirm=1:t.pConfirm=0,t.lineType=0,console.log("pConfirm",t.pConfirm),delete t.pQq,delete t.pContacts,t.puserId=this.puserId,this.$http.post(api_prefix+"/product/update",t).then(function(t){0!=t.data.code&&e.$alert(t.data.message)},function(t){console.log("出错了")})},changeBrand:function(){this.searchParams.pBrand=null,this.brandList=null,this.searchBrands()},searchBrands:function(t){var e=this;this.searchParams.companyId&&(this.brandSearchParams.companyId=this.searchParams.companyId,this.brandSearchParams.bCompanyId=this.searchParams.companyId,this.brandSearchParams.bName=t,t||(this.searchParams.pBrand=null),this.brandList=null,this.$http.post(api_prefix+"/brand/list",this.brandSearchParams).then(function(t){e.brandList=t.data.body.resultList},function(t){console.log("出错了")}))},jdytab:function(t){this.jdytabActive=t,this.searchParams.pStatus=t,this.getTableData()},getChangeType:function(t){this.pType=t,this.getTableData()},queryExtTrips:function(t){var e=this;this.$http.post(api_prefix+"trip/list",{tProductId:t,tType:1}).then(function(t){e.$alert(t.body.message)},function(t){console.log("出错了")})},updatePage:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.getTableData()},1e3)},addProductKey:function(){var t=this;this.$http.post(api_prefix+"productKey/saveProductKeyRelation?productId=1&keyId=1").then(function(e){t.$alert(e.body.message)},function(t){console.log("出错了")})},effect:function(t,e,a){var i=this;this.$confirm("你确定要将该产品入库？","温馨提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){i.$http.post(api_prefix+"product/effect",{companyId:t,id:e,puserId:a}).then(function(t){0==t.data.code?(i.$message({showClose:!0,message:"入库成功",type:"success"}),i.getTableData()):i.$alert(t.data.message)},function(t){console.log("出错了")})})},uneffect:function(t,e,a){var i=this;this.$confirm("你确定要将该产品移出？","温馨提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){i.$http.post(api_prefix+"product/uneffect",{companyId:t,id:e,puserId:a}).then(function(t){0==t.data.code?(i.$message({showClose:!0,message:"出库成功",type:"success"}),i.getTableData()):i.$alert(t.data.message)},function(t){console.log("出错了")})})},getTableData:function(){var t=this,e=JSON.parse(s()(this.searchParams));"0"==e.pType&&delete e.pType,this.$http.post(api_prefix+"aggr/local-productlist",e).then(function(e){var a=e.data.body;t.tableData=a.resultList,t.tableDataTotal=a.totalNum},function(t){console.log("出错了")})},handleSetkeyClose:function(t){this.setkeyTags.splice(this.setkeyTags.indexOf(t),1)},showSetkeyInput:function(){var t=this;this.setkeyInputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleSetkeyInputConfirm:function(){var t=this.setkeyInputValue,e=this.setkeyTagType;if(console.log(e),t){var a={name:t,type:e,classname:"el-tag--"+e};this.setkeyTagsAll.push(a)}this.setkeyInputVisible=!1,this.setkeyInputValue=""},saveSetkey:function(t,e,a){var i=this;if(this.productsKeywords.length>4)return void this.$alert("最多可以添加4个关键词");if(this.productsKeywords.length<1)return void this.$alert("请选择词条");var s=[];this.productsKeywords.forEach(function(t){s.push(t.id)}),this.$http.post(api_prefix+"/productKey/batchSaveProductKeyRelation",{productId:this.pid,keyIds:s}).then(function(t){0==t.data.code&&(i.getProductsKeywords(),i.getTableData(),i.getAllProductsKeywords()),i.$message({type:"success",message:"保存成功!"})},function(t){console.log("获取日志出错了")})},setType:function(t,e,a){for(var i=this.setkeySelectTags,s=i.length,n=0;n<s;n++)this.setkeySelectTags[n].flag=!1;this.setkeySelectTags[a].flag=!0,this.setkeyTagType=t},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){t&&(this.searchParams.currPage=t,this.searchParams.pageNum=t,this.getTableData())},changeViewBtn:function(){switch(this.newKeywordForm.kColor){case 0:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkone");break;case 1:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bktwo");break;case 2:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkthree");break;case 3:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkfour");break;case 4:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkfive");break;case 5:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bksix");break;case 6:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkseven");break;case 7:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkeight")}this.tagViewBtnColor=t(".jl-TagViewBtn").css("color"),console.log(this.tagViewBtnColor)},getBuyerCompanyId:function(e){var a=this;this.$http.post(api_prefix+"Company/index",{pid:0,searchType:1,pageIndex:1,fastSearchStr:t.trim(e)},{emulateJSON:!0}).then(function(t){0==t.body.code&&(a.BuyerCompanyIdArr=t.body.body.list)})}},watch:{"searchParams.companyId":"changeBrand"},components:{jdyAlert:r.a,jdyLog:o.a},created:function(){jdyFn.scrollToTop()},filters:{changeCreate:function(t){function e(t){return parseInt(t)<10&&(t="0"+t),t}var a=new Date(t),i=a.getFullYear(),s=a.getMonth()+1,n=a.getDate(),r=a.getHours(),l=a.getMinutes(),o=a.getSeconds();return t=(i+"-"+e(s)+"-"+e(n)+" "+e(r)+":"+e(l)+":"+e(o)).substr(0,10)}}}}.call(e,a(2))},624:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(13),s=a.n(i),n=a(39),r=a.n(n);e.default={name:"Hotel",data:function(){var t;return t={searchParam:{str:"",companyId:null,currPage:1,pageSize:20},currentPage:1,pageSize:20,tableDataTotal:0,tableData:[],testnum:123123,p1_num:5,downLoadHref:"",numObj:{list:[],itemindex:null},datePicker:[(new Date).setTime((new Date).getTime()+864e5),(new Date).setTime((new Date).getTime()+6048e5)],datePicker2:[(new Date).setTime((new Date).getTime()+864e5),(new Date).setTime((new Date).getTime()+6048e5)],productCostingTitle:{productName:null,relId:this.$route.query.pid,type:1,peopleNum:null,peopleNumExplain:null,isExempt:0,isExemptExplain:null,beginTime:null,endTime:null,percentAllTotal:null},productCostingTitle2:{productName:null,relId:this.$route.query.scheduleId,type:2,peopleNum:null,peopleNumExplain:null,isExempt:0,isExemptExplain:null,percentage:0,beginTime:null,endTime:null},productCostingCategoryDetailList:[],DetailListCell:{categoryId:null,content:"",amount:null,unit:null,unitPrice:null,remark:""}},r()(t,"tableData",[]),r()(t,"tableData2",[]),r()(t,"total",{sum1_6:null,sum7_9:null,sum1_9:null,costSingle:null,percentAllTotal:null,allTotal:null}),r()(t,"total2",{sum1_6:null,sum7_9:null,sum1_9:null,costSingle:null,allTotal:null}),r()(t,"readOnly",!0),r()(t,"readOnly2",!1),r()(t,"productType",""),t},methods:{changeHref:function(){var t=this.$route.query.scheduleId;this.downLoadHref=api_prefix+"/productCost/exportProductCostAccountingExcel/"+t+"/2",console.log(this.downLoadHref,"downLoadHref")},getCostPage:function(t){var e=this;this.$http.post(api_prefix+"/productCosting/queryProductCostingAllInformationById",t).then(function(a){if(0==a.data.code){var i=a.data.body;3==t.type?(e.productCostingTitle.productName=i.productName,e.productCostingTitle.peopleNum=i.peopleNum,e.productCostingTitle.peopleNumExplain=i.peopleNumExplain,e.productCostingTitle.isExempt=Number(i.isExempt),e.productCostingTitle.isExemptExplain=i.isExemptExplain,e.productCostingTitle.beginTime=e.changeMusterTime(i.beginTime),e.productCostingTitle.endTime=e.changeMusterTime(i.endTime),e.datePicker=[e.productCostingTitle.beginTime,e.productCostingTitle.endTime]):(e.productCostingTitle2.productName=i.productName,e.productCostingTitle2.peopleNum=i.peopleNum,e.productCostingTitle2.peopleNumExplain=i.peopleNumExplain,e.productCostingTitle2.percentage=i.percentage,e.productCostingTitle2.isExempt=Number(i.isExempt),e.productCostingTitle2.isExemptExplain=i.isExemptExplain,e.productCostingTitle2.beginTime=e.changeMusterTime(i.beginTime),e.productCostingTitle2.endTime=e.changeMusterTime(i.endTime),e.datePicker2=[e.productCostingTitle2.beginTime,e.productCostingTitle2.endTime]),e.numObj.list=[],i.productCostingCategoryInformationList.forEach(function(a,i){var n=JSON.parse(s()(e.DetailListCell));a.productCostingCategoryDetailList.push(n),50!=a.categoryId&&20!=a.categoryId&&(a.listSize=a.listSize+1),2==t.type&&e.numObj.list.push(a.listSize)}),3==t.type?e.tableData=JSON.parse(s()(i.productCostingCategoryInformationList)):e.tableData2=JSON.parse(s()(i.productCostingCategoryInformationList)),e.getTotalCell()}else e.judgeIsNull(t.type)},function(t){e.$alert(t.data.message,"温馨提示",{type:"error"})})},judgeIsNull:function(t){var e=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:240}).then(function(a){if(0==a.body.code){var i=a.body.body;e.numObj.list=[],i.forEach(function(t,a){t.categoryName=t.dName,t.categoryId=t.dSort,t.listSize=0,t.productCostingCategoryDetailList=[];var i=JSON.parse(s()(e.DetailListCell));t.productCostingCategoryDetailList.push(i),e.numObj.list.push(0),t.subtotal=0}),3==t?e.tableData=JSON.parse(s()(i)):e.tableData2=JSON.parse(s()(i))}else e.$alert(a.body.message,"温馨提示",{type:"error"});return!0},function(t){e.$alert("网络出错啦~","温馨提示",{type:"error"})})},save:function(){var t=this,e=[];if(this.tableData2.forEach(function(t,a){t.productCostingCategoryDetailList.forEach(function(a,i){""!=a.content&&null!=a.amount&&null!=a.unitPrice&&(a.categoryId=t.categoryId,e.push(a))})}),0==e.length)return void this.$message.info("请填写具体项目明细！");this.productCostingTitle2.productType=this.productType;var a={productCostingTitle:this.productCostingTitle2,productCostingCategoryDetailList:e};this.$http.post(api_prefix+"productCosting/addProductCosting",a).then(function(e){if(0==e.data.code){t.$message.success("保存成功！");var a={type:2,productId:t.$route.query.productId,scheduleId:t.$route.query.scheduleId,productType:t.productType};t.getCostPage(a),a=JSON.parse(s()(a)),a.type=2,t.getCostPage(a)}else t.$alert(e.body.message,"温馨提示",{type:"error"})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})},inputChange:function(t){var e=this;setTimeout(function(){if(e.numObj.list[e.numObj.itemindex]>t)e.tableData2[e.numObj.itemindex].productCostingCategoryDetailList.pop();else{var a=JSON.parse(s()(e.DetailListCell));e.tableData2[e.numObj.itemindex].productCostingCategoryDetailList.push(a)}e.numObj.list[e.numObj.itemindex]=t},100)},getIndex:function(t){this.numObj.itemindex=t},inputdesc:function(){var t=this;setTimeout(function(){t.tableData2[t.numObj.itemindex].productCostingCategoryDetailList.pop(),t.tableData2[t.numObj.itemindex].listSize=t.tableData2[t.numObj.itemindex].listSize-1},100)},inputadd:function(){var t=this;setTimeout(function(){var e=JSON.parse(s()(t.DetailListCell));t.tableData2[t.numObj.itemindex].productCostingCategoryDetailList.push(e),t.tableData2[t.numObj.itemindex].listSize=t.tableData2[t.numObj.itemindex].listSize+1},100)},getTotalCell:function(t){var e=null;t?(this.tableData2[t].productCostingCategoryDetailList.forEach(function(t,a){e+=t.amount*t.unitPrice}),this.tableData2[t].subtotal=e):this.tableData2.forEach(function(t,e){t.subtotal=0,t.productCostingCategoryDetailList.forEach(function(e,a){t.subtotal+=e.amount*e.unitPrice})});var a=null;t?(this.tableData[t].productCostingCategoryDetailList.forEach(function(t,e){a+=t.amount*t.unitPrice}),this.tableData[t].subtotal=a):this.tableData.forEach(function(t,e){t.subtotal=0,t.productCostingCategoryDetailList.forEach(function(e,a){t.subtotal+=e.amount*e.unitPrice})}),this.sumTotalCell(1,6),this.sumTotalCell(8,10),this.sumTotalCell(1,10),this.sumTotalCell(1,11),this.costSingleTotal()},sumTotalCell:function(t,e){var a=this.tableData.slice(t-1,e),i=0,s=0;a.forEach(function(t,e){i+=t.subtotal,50==t.categoryId&&(s=t.subtotal)}),1==t&&6==e?this.total.sum1_6=i:8==t&&10==e?this.total.sum7_9=i:1==t&&10==e&&(this.total.sum1_9=i-s),this.total.allTotal=i,null!=this.productCostingTitle2.percentage?(this.total.percentAllTotal=Number(i)*Number(this.productCostingTitle2.percentage)*.01,this.total.percentAllTotal=this.total.percentAllTotal+i):this.total.percentAllTotal=i;var n=this.tableData2.slice(t-1,e),r=0,l=0;n.forEach(function(t,e){r+=t.subtotal,50==t.categoryId&&(l=t.subtotal)}),1==t&&6==e?this.total2.sum1_6=r:8==t&&10==e?this.total2.sum7_9=r:1==t&&10==e&&(this.total2.sum1_9=r-l),this.total2.allTotal=r},costSingleTotal:function(){var t=null;this.tableData.forEach(function(e,a){e.productCostingCategoryDetailList.forEach(function(e,a){e.unitPrice&&(t+=Number(e.unitPrice))})}),this.total.costSingle=t;var e=null;this.tableData2.forEach(function(t,a){t.productCostingCategoryDetailList.forEach(function(t,a){t.unitPrice&&(e+=Number(t.unitPrice))})}),this.total2.costSingle=e},dateRangeChange:function(t){if(t){var e=t.split(" - ");this.productCostingTitle2.beginTime=e[0],this.productCostingTitle2.endTime=e[1]}else this.productCostingTitle2.beginTime=null,this.productCostingTitle2.endTime=null},changeMusterTime:function(t){if(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth(),s=e.getDate();return a+"-"+(i+1>=10?i+1:"0"+(i+1))+"-"+(s+1<10?"0"+s:s)}},goback:function(){this.$confirm("添加成本数据未保存，是否要返回？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){window.history.go(-1)}).catch(function(){})}},mounted:function(){var t=this;this.$http.post(api_prefix+"/product/detail",{id:this.$route.query.productId,lineType:0}).then(function(e){if(0==e.data.body.code){var a=e.data.body.body.product;t.productCostingTitle2.productName=a.pName,t.productType=1==a.ascription?"2":"1";var i={type:3,productId:t.$route.query.productId,scheduleId:t.$route.query.scheduleId,productType:t.productType};t.getCostPage(i),i=JSON.parse(s()(i)),i.type=2,t.getCostPage(i)}else t.$alert(e.body.message,"温馨提示",{type:"error"})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})}}},625:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(4),s=a.n(i);e.default={components:{jdyAlert:s.a},name:"information",data:function(){return{cancelFlag:!1,downLoadHref:"",currentPage:1,pageSizeAll:20,tableDataTotal:0,tableData:[],ruleform:{cancelReason:""},cancelIdList:[]}},mounted:function(){var t=JSON.parse(sessionStorage.loginData);this.uDataLimit=t.uDataLimit,this.getTableData()},methods:{changeHref:function(){var t=this.$route.query.id;this.downLoadHref=api_prefix+"/Order/exportCancelTourists?scheduleId="+t,console.log(this.downLoadHref,"downLoadHref")},getTableData:function(){var t=this;this.$http.post(api_prefix+"/Schedule/guestList/",{id:this.$route.query.id,currPage:this.currentPage,pageSize:20}).then(function(e){var a=e.body.body;t.tableData=a.list,t.tableDataTotal=a.total},function(t){console.log("出错了")})},handleCurrentChange:function(t){console.log(t,"val"),this.currentPage=t,this.getTableData()},goCancel:function(t){this.cancelIdList=[],this.cancelIdList.push(t),this.cancelFlag=!0,console.log(this.cancelIdList,"this.cancelIdList")},goCancelList:function(){this.cancelFlag=!0,console.log(this.cancelIdList,"this.cancelIdList222")},firstSearch:function(){this.$router.push({name:"groupManage"})},cancelUser:function(){var t=this;return""==this.ruleform.cancelReason?void this.$message.error("请选择取消原因"):""==this.cancelIdList?void this.$message.error("请选择客人"):(this.btnFlag=!0,void this.$http.post(api_prefix+"/Schedule/batchCancelTourist/",{touristIds:this.cancelIdList,remark:this.ruleform.cancelReason}).then(function(e){t.btnFlag=!1,t.$message.success("取消游客成功"),setTimeout(function(){t.closeAlert(),t.getTableData(),t.cancelIdList=[]},500)},function(e){t.btnFlag=!1,console.log("出错了")}))},cancelList:function(t){if(console.log(t,"val"),t){this.cancelIdList=[];for(var e=0;e<t.length;e++)if(1==t[e].status)this.$message.error("请勿选择已取消的客人"),this.$refs.multipleTable.clearSelection();else{var a=[];a.push(t[e].id);for(var i=0;i<a.length;i++)-1==this.cancelIdList.indexOf(a[i])&&this.cancelIdList.push(a[i]);console.log(this.cancelIdList,"this.cancelIdList")}}else console.log(this.cancelIdList,"this.cancelIdList2")},closeAlert:function(){this.btnFlag=!1,this.cancelFlag=!1,this.ruleform.cancelReason="",t(".alertbgg").remove()}}}}.call(e,a(2))},626:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(4),r=a.n(n),l=a(14),o=a.n(l);e.default={name:"groupManage",data:function(){return{downLoadHref:"",btnFlag:!1,dataParam:{dateType:0,dateStart:dateChange(1),dateEnd:dateChange(15)},datePicker:[(new Date).setTime((new Date).getTime()+864e5),(new Date).setTime((new Date).getTime()+1296e6)],ruleform:{currPage:1,pageSize:10,departureStatus:null,searchContent:"",outGroupTimeBeginStr:dateChange(1),outGroupTimeEndStr:dateChange(15),backGroupTimeBeginStr:null,backGroupTimeEndStr:null,scheduleTimeBeginStr:null,scheduleTimeEndStr:null,companyId:"",otStatus:null},tableData:[],jdytabActive:null,orderChangeType:[],orderTotal:null,currentPage:1,pageSize:10,tableDataTotal:0,fullscreenLoading:!1,loading:!1,logindata:"",rowData:null,startGroupObj:{infoList:[{days:null,info:null,start:null,destination:null,starttime:null,endtime:null,planes:null}]},cancelGroupObj:{flag:!1,reason:"",groupNo:null,line:null},uDataLimit:"",selectedOptions:"",selectList:[],checkedOtStatus:!1,module:"schedule",journalTotal:0,journalCurrentData:[],alertJournalFlag:!1,logId:"",journalStyle:{top:"164px",left:"300px"}}},mounted:function(){var t=JSON.parse(sessionStorage.loginData);this.uDataLimit=t.uDataLimit,this.ruleform.companyId=JSON.parse(sessionStorage.loginData).uCompanyId,this.getTableData(),this.defaultSelectList()},methods:{changeHref:function(){this.downLoadHref=api_prefix+"productCost/exportProductCostLossExcel?flag="+this.dataParam.dateType+"&beginDate="+this.dataParam.dateStart+"&endDate="+this.dataParam.dateEnd+"&searchStr="+this.ruleform.searchContent,console.log(this.downLoadHref,"downLoadHref")},defaultSelectList:function(t){var e=this,a=api_prefix+"/Company/index",i={pageIndex:1,pid:0,searchType:1};this.$http.post(a,i,{emulateJSON:!0}).then(function(t){var a=t.body.body.list;e.selectList=a,console.log(e.selectList,"this.selectList")})},changeOtStatus:function(){console.log(this.checkedOtStatus,"09090"),1==this.checkedOtStatus?this.ruleform.otStatus=0:this.ruleform.otStatus=null,this.getTableData()},getTableData:function(){var t=this;this.getCancelNum(),this.getSession(),1==this.dataParam.dateType?(this.ruleform.outGroupTimeBeginStr=null,this.ruleform.outGroupTimeEndStr=null,this.ruleform.backGroupTimeBeginStr=this.dataParam.dateStart,this.ruleform.backGroupTimeEndStr=this.dataParam.dateEnd,this.ruleform.scheduleTimeBeginStr=null,this.ruleform.scheduleTimeEndStr=null):0==this.dataParam.dateType?(this.ruleform.backGroupTimeBeginStr=null,this.ruleform.backGroupTimeEndStr=null,this.ruleform.outGroupTimeBeginStr=this.dataParam.dateStart,this.ruleform.outGroupTimeEndStr=this.dataParam.dateEnd,this.ruleform.scheduleTimeBeginStr=null,this.ruleform.scheduleTimeEndStr=null):(this.ruleform.backGroupTimeBeginStr=null,this.ruleform.backGroupTimeEndStr=null,this.ruleform.outGroupTimeBeginStr=null,this.ruleform.outGroupTimeEndStr=null,this.ruleform.scheduleTimeBeginStr=this.dataParam.dateStart,this.ruleform.scheduleTimeEndStr=this.dataParam.dateEnd),this.$http.post(api_prefix+"Schedule/queryScheduleManagerList",this.ruleform).then(function(e){var a=e.body;"0"==a.code?(t.tableData=a.body.list,t.tableDataTotal=a.body.total):t.$alert(a.message,"温馨提示",{type:"error"})},function(e){t.$alert("获取表格数据失败","温馨提示",{type:"error"})})},getSession:function(){if(null!=window.sessionStorage.getItem("searchParams")){var t=JSON.parse(window.sessionStorage.getItem("searchParams"));this.dataParam.dateStart=t.start,this.dataParam.dateEnd=t.end,this.dataParam.dateType=t.dataType,this.jdytabActive=t.jdytabActive,this.ruleform.departureStatus=t.jdytabActive,this.ruleform.searchContent=t.keys,this.ruleform.currPage=t.currPage,this.ruleform.pageSize=t.pageSize,this.datePicker=[t.start,t.end],window.sessionStorage.removeItem("searchParams")}},jdytab:function(t){this.ruleform.departureStatus=null==t?"":t,this.jdytabActive=t,this.getTableData()},dateRangeChange:function(t){if(t){var e=t.split(" - ");this.dataParam.dateStart=e[0],this.dataParam.dateEnd=e[1]}else this.dataParam.dateStart=null,this.dataParam.dateEnd=null},handleCurrentChange:function(t){t&&(this.ruleform.currPage=t,this.ruleform.pageNum=t,this.getTableData())},orderChange:function(t){switch(t){case"1":this.startGroup_submit();break;case"2":this.doneGroup_submit();break;case"3":this.getGroupCancel();break;case"4":this.cancelGroupObj.groupNo=this.rowData.groupNo,this.cancelGroupObj.line=this.rowData.routeName,this.cancelGroupObj.flag=!0;break;case"5":this.getCostKeeping()}this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity")})},closeAlertBtn:function(){this.btnFlag=!1,this.orderChangeType=[],this.cancelGroupObj.flag=!1,this.cancelGroupObj.reason=null,this.cancelGroupObj.groupNo=null,t(".alertbgg").remove(),this.getTableData()},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleRowChange:function(t){console.log("行点击事件",t),this.logId=t.scheduleId,this.getLogData(1),this.rowData=t},getTouristInfo:function(t){var e={jdytabActive:this.jdytabActive,dataType:this.dataParam.dateType,start:this.dataParam.dateStart,end:this.dataParam.dateEnd,keys:this.ruleform.searchContent,currPage:this.ruleform.currPage,pageSize:this.ruleform.pageSize};window.sessionStorage.setItem("searchParams",s()(e)),this.$router.push({name:"touristInfo",query:{sId:t}})},getGroupCancel:function(){this.$router.push({name:"groupCancel",query:{id:this.rowData.scheduleId}})},getCostKeeping:function(){this.$router.push({name:"costKeeping",query:{scheduleId:this.rowData.scheduleId,productId:this.rowData.productId}})},getCancelNum:function(){var t=this;this.$http.get(api_prefix+"Order/getNeedToDealCount").then(function(e){var a=e.body;"0"==a.code?t.orderTotal=a.body:t.$alert(a.message,"温馨提示",{type:"error"})},function(e){t.$alert("获取已取消数量失败","温馨提示",{type:"error"})})},startGroup_submit:function(){var t=this;this.$confirm("确认进行发团操作？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.get(api_prefix+"Schedule/startSchedule/"+t.rowData.scheduleId).then(function(e){var a=e.body;"0"==a.code?(t.getTableData(),t.$message.success("发团成功！")):t.$alert(a.message,"温馨提示",{type:"error"}),t.orderChangeType=[]},function(e){t.orderChangeType=[],t.$alert("发团失败！","温馨提示",{type:"error"})})}).catch(function(){t.orderChangeType=[]})},cancelGroup_submit:function(){var t=this;if(this.btnFlag=!0,!this.cancelGroupObj.reason)return this.btnFlag=!1,this.$message.info("请填写取消团期原因！");if(this.cancelGroupObj.reason.length>100)return this.btnFlag=!1,this.$message.info("取消团期原因不要超过100个字！");var e={scheduleId:this.rowData.scheduleId,cancelComment:this.cancelGroupObj.reason};this.$http.post(api_prefix+"Schedule/cancelSchedule",e).then(function(e){var a=e.body;"0"==a.code?(t.$message.success("取消团期操作成功"),t.getTableData()):t.$alert(a.message,"温馨提示",{type:"error"}),t.closeAlertBtn()},function(e){t.btnFlag=!1,t.$alert("取消团期操作失败!","温馨提示",{type:"error"})})},doneGroup_submit:function(){var t=this;this.$confirm("确认进行结团操作？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.get(api_prefix+"Schedule/finishSchedule/"+t.rowData.scheduleId).then(function(e){var a=e.body;"0"==a.code?(t.getTableData(),t.$message.success("结团成功！"),setTimeout(function(){t.$router.push({name:"costKeeping",query:{scheduleId:t.rowData.scheduleId,productId:t.rowData.productId}})},300)):t.$alert(a.message,"温馨提示",{type:"error"}),t.orderChangeType=[]},function(e){t.orderChangeType=[],t.$alert("结团失败！","温馨提示",{type:"error"})})}).catch(function(){t.orderChangeType=[]})},gotoNotice:function(t){this.$router.push({name:"groupNotice",query:{sId:t}})},alertJournal:function(t){if(!this.logId)return void this.$alert("请选择一个团期");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.logId).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})}},components:{jdyAlert:r.a,jdyLog:o.a},filters:{filterStatus:function(t){switch(t){case 0:return"待发团";case 1:return"发团中";case 2:return"已结团";case 3:return"已回团";case 4:return"已取消";default:return"未获得数据"}}}}}.call(e,a(2))},627:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(14),r=a.n(n);a(669);e.default={components:{jdyAlert:s.a,jdyLog:r.a},name:"information",data:function(){return{showBianji:!0,showPrint:!0,showSave:!1,btnFlag:!1,alertIndex:"",showEdit:!1,planeData:[],fromData:{},tableData:{sCalendar:"",trips:[{tripsDay:""}]},downLoadHref:"",showAddFlight:!1}},filters:{lineTypeFilter:function(t){return 0==t?t="出团":2==t?t="回团":1==t?t="中转":void 0},flightTypeFilter:function(t){return 1==t?t="飞机":2==t?t="火车":3==t?t="邮轮":4==t?t="汽车":void 0}},mounted:function(){this.getTableData();var t=this;this.$nextTick(function(){window.addEventListener("keydown",function(e){!e.ctrlKey||"p"!==e.key&&80!==e.keyCode||(e.preventDefault(),t.printFn())})})},methods:{changeDate:function(t){console.log(t,"value"),console.log(this.planeData[0].arrivalTime,"arrivalTime")},changeHref:function(){var t=this.$route.query.sId;this.downLoadHref=api_prefix+"/Schedule/exportGroupNotice/"+t,console.log(this.downLoadHref,"downLoadHref")},printFn:function(){var t=this;this.showAddFlight=!1,setTimeout(function(){var e=document.getElementById("ptintHtml");jdyFn.printHtml(e),setTimeout(function(){t.showAddFlight=!0},1e3)},500)},goForWord:function(){var t=this;this.$http.get(api_prefix+"Order/exportGroupNotice/"+this.$route.query.id).then(function(e){0==e.data.code||t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getTableData:function(){var t=this,e=this,a=this.$route.query.sId;this.$http.get(api_prefix+"/Schedule/getScheduleMessage/"+a).then(function(a){if(0==a.data.code){var i=a.data.body;e.tableData=i,e.fromData=i.scheduleSetting,e.planeData=i.scheduleFlightList,4!=t.fromData.departureStatus&&2!=t.fromData.departureStatus||(t.showBianji=!1),console.log("vm.tableData.sCalendar",e.tableData.sCalendar);var s=e.tableData.pDays;console.log(s,"day");for(var n=e.tableData.sCalendar,r=0;r<s;r++)if(0==r){var l=function(t){return parseInt(t)<10&&(t="0"+t),t},o=new Date(n),c=o.getFullYear(),u=o.getMonth()+1,d=o.getDate(),p=o.getHours(),m=o.getMinutes(),h=o.getSeconds(),f=c+"年"+l(u)+"月"+l(d)+"日"+l(p)+":"+l(m)+":"+l(h);f=f.substring(5,11),console.log(f,"oTime1"),t.tableData.trips[r].tripsDay=f,console.log(t.tableData.trips[r].tripsDay,"this.tableData.trips[i].tripsDay")}else{var v=function(t){return parseInt(t)<10&&(t="0"+t),t},g=n+864e5,b=new Date(g),y=b.getFullYear(),_=b.getMonth()+1,C=b.getDate(),k=b.getHours(),T=b.getMinutes(),S=b.getSeconds(),f=y+"年"+v(_)+"月"+v(C)+"日"+v(k)+":"+v(T)+":"+v(S),f=f.substring(5,11);console.log(f,"oTime2"),n=g,console.log(n,"odate"),t.tableData.trips[r].tripsDay=f,console.log(t.tableData.trips[r].tripsDay,"this.tableData.trips[i].tripsDay2")}}else e.$alert(a.data.message)},function(t){console.log("出错了")})},addFlight:function(){var t={lineType:"",flightType:"",sortDay:null,flightNum:null,departurePlace:null,destination:null,flightTime:null,arrivalTime:null};this.planeData.push(t)},editPrint:function(){this.showPrint=!1,this.showSave=!0,this.showEdit=!0,this.showAddFlight=!0,this.showBianji=!1},goCancel:function(t){console.log(t,"index"),this.planeData.splice(t,1)},changeMusterTime:function(t){if(console.log(t,"vasl"),console.log(this.fromData.musterTime,"this.fromData.musterTime"),t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth(),s=e.getDate(),n=e.getHours(),r=e.getMinutes(),l=e.getSeconds(),o=a+"-"+(i+1>=10?i+1:"0"+(i+1))+"-"+(s+1<10?"0"+s:s)+" "+(n+1<10?"0"+n:n)+":"+(r+1<10?"0"+r:r)+":"+(l+1<10?"0"+l:l);this.fromData.musterTime=o}},save:function(){for(var t=this,e=!0,a=!0,i=0;i<this.planeData.length;i++)e&&0!=this.planeData[i].lineType||(e=!1),a&&2!=this.planeData[i].lineType||(a=!1);if(1==a&&1==e)return void this.$message.error("请添加出团和回团信息");if(1==e)return void this.$message.error("请添加出团信息");if(1==a)return void this.$message.error("请添加回团信息");for(var s=0;s<this.planeData.length;s++){if(void 0==this.planeData[s].flightTime)return void this.$message.error("请添加出团日期");var n=this.planeData[s].flightTime,r=new Date(n),l=r.getFullYear(),o=r.getMonth(),c=r.getDate(),u=r.getHours(),d=r.getMinutes(),p=r.getSeconds(),m=l+"-"+(o+1>=10?o+1:"0"+(o+1))+"-"+(c+1<10?"0"+c:c)+" "+(u+1<10?"0"+u:u)+":"+(d+1<10?"0"+d:d)+":"+(p+1<10?"0"+p:p);this.planeData[s].flightTime=m}for(var h=0;h<this.planeData.length;h++){if(void 0==this.planeData[h].arrivalTime)return void this.$message.error("请添加回团日期");var f=this.planeData[h].arrivalTime,v=new Date(f),g=v.getFullYear(),b=v.getMonth(),y=v.getDate(),_=v.getHours(),C=v.getMinutes(),k=v.getSeconds(),T=g+"-"+(b+1>=10?b+1:"0"+(b+1))+"-"+(y+1<10?"0"+y:y)+" "+(_+1<10?"0"+_:_)+":"+(C+1<10?"0"+C:C)+":"+(k+1<10?"0"+k:k);this.planeData[h].arrivalTime=T}if(void 0==this.fromData.musterTime)return void this.$message.error("请添加集合时间");console.log(this.tableData,"tableData"),this.btnFlag=!0,this.$http.post(api_prefix+"/Schedule/saveScheduleSetting/",this.tableData).then(function(e){0==e.data.code?(t.btnFlag=!1,t.showAddFlight=!1,t.showEdit=!1,t.showSave=!1,t.showPrint=!0,t.showBianji=!0,t.$message.success("保存成功")):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(e){t.btnFlag=!1,console.log("出错了")})}}}},628:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i);e.default={name:"touristInfo",data:function(){return{searchParam:{scheduleId:null,currPage:1,pageSize:15},currentPage:1,pageSize:15,tableDataTotal:0,tableData:null,alertFlag:!1,userInfo:null}},methods:{getTableData:function(){var t=this;this.$http.post(api_prefix+"Schedule/queryTouristsListByScheduleId",this.searchParam).then(function(e){var a=e.body;"0"==a.code?(t.tableData=a.body.list,t.tableDataTotal=a.body.total):t.$alert(a.message,"温馨提示",{type:"error"})},function(e){t.$alert("获取游客信息数据失败","温馨提示",{type:"error"})})},peopleDetail:function(t){var e=this;this.$http.get(api_prefix+"user/get/"+t).then(function(t){0==t.data.code&&(e.userInfo=t.data.body,e.alertFlag=!0,e.$nextTick(function(){jdyFn.setAlertStyle("showtfcity")}))},function(t){console.log("出错了")})},closeAlert:function(){this.alertFlag=!1},orderDetail:function(t){window.open("/sale.html#/orderSellerDetail?id="+t)},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){t&&(this.searchParam.currPage=t,this.searchParam.pageNum=t,this.getTableData())},goback:function(){window.history.go(-1)}},filters:{sexName:function(t){return t?"女":"男"}},components:{jdyAlert:s.a},mounted:function(){this.searchParam.scheduleId=this.$route.query.sId,this.getTableData()}}},629:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i);e.default={components:{jdyAlert:s.a},name:"information",data:function(){return{downLoadHref:"",currentPage:1,pageSizeAll:20,tableDataTotal:0,tableData:[],tableDataOne:[],tableDataTwo:[],firstMenuList:[],fullscreenLoading:!1,jdytabActive:null,menuId:null,flag:"",ruleForm:{dateRange:[(new Date).setTime((new Date).getTime()+864e5),(new Date).setTime((new Date).getTime()+13824e5)],beginDate:dateChange(1),endDate:dateChange(16),pageSize:20,currPage:1,companyId:null},selectList:[],uDataLimit:""}},mounted:function(){var t=JSON.parse(sessionStorage.loginData);this.uDataLimit=t.uDataLimit,this.ruleForm.companyId=JSON.parse(sessionStorage.loginData).uCompanyId,this.getTableData(),this.defaultSelectList()},methods:{changeHref:function(){1==this.jdytabActive&&(this.flag=0),2==this.jdytabActive&&(this.flag=1),null==this.jdytabActive&&(this.flag="");this.$route.query.id;this.downLoadHref=api_prefix+"/SchedulePlan/export?beginDate="+this.ruleForm.beginDate+"&endDate="+this.ruleForm.endDate+"&flag="+this.flag+"&companyId="+this.ruleForm.companyId,console.log(this.downLoadHref,"downLoadHref")},defaultSelectList:function(t){var e=this,a=api_prefix+"/Company/index",i={pageIndex:1,pid:0,searchType:1};this.$http.post(a,i,{emulateJSON:!0}).then(function(t){var a=t.body.body.list;e.selectList=a,console.log(e.selectList,"this.selectList")})},getTableData:function(){var t=this;this.$http.post(api_prefix+"/SchedulePlan/manageList",this.ruleForm).then(function(e){var a=e.body.body;t.tableData=a.pageInfo.list,t.tableDataOne=a.pageTotalInfo.list,t.tableDataTwo=a.totalInfo.list,t.tableDataTotal=a.pageInfo.total},function(t){console.log("出错了")})},jdytab:function(t){this.jdytabActive=t,console.log(t,"index"),this.getTableData()},datetimerange:function(t){if(t){console.log(t,"时间范围");var e=(new Date).setTime(new Date(this.ruleForm.dateRange[0]).getTime()),a=(new Date).setTime(new Date(this.ruleForm.dateRange[1]).getTime());console.log(e,a,"555555555555555555555555"),e+2592e6<a?(this.ruleForm.dateRange=[],this.$alert("日期范围最大为30天","温馨提示",{confirmButtonText:"确定",type:"info"})):(this.ruleForm.beginDate=t.substring(0,10),this.ruleForm.endDate=t.substring(13),console.log(this.ruleForm.beginDate,"this.ruleForm.createTimeS"),console.log(this.ruleForm.endDate,"this.ruleForm.createTimeE"),this.ruleForm.dateRange=[(new Date).setTime(new Date(this.ruleForm.dateRange[0]).getTime()),(new Date).setTime(new Date(this.ruleForm.dateRange[1]).getTime())],console.log(this.ruleForm.dateRange,"dataRange"))}},handleCurrentChange:function(t){console.log(t,"val"),this.ruleForm.currPage=t,this.getTableData()},firstSearch:function(){this.getTableData()},refreshBtn:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.getTableData()},1e3)},deleteRow:function(t){var e=this,a=api_prefix+"/module/delete/"+t;this.currentId=t,console.log("当前ID",this.currentId),this.$confirm("你确定要删除该内容？","友情提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){e.$http.get(a).then(function(t){0==t.data.code?(e.getTableData(),setTimeout(function(){e.$message({showClose:!0,message:"删除成功",type:"success"})},500)):e.$alert(t.data.message)},function(t){console.log("出错了")})}).catch(function(){})}}}},630:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i);e.default={components:{jdyAlert:s.a},name:"information",data:function(){return{time:this.$route.query.beginDate+"———"+this.$route.query.endDate,pname:this.$route.query.name,groupNone:"groupNone",tableData:[],tableDataTwo:[],tableDataThree:[],tableDataFour:[],jdytabActive:this.$route.query.jdytabActive,ruleForm:{productId:this.$route.query.productId,dateRange:[parseInt(this.$route.query.dateRange[0]),parseInt(this.$route.query.dateRange[1])],beginDate:this.$route.query.beginDate||dateChange(1),endDate:this.$route.query.endDate||dateChange(16),pageSize:20,currPage:1,flag:""},currentPage:1,pageSizeAll:20,tableDataTotal:0}},mounted:function(){var t=this;this.getTableData(),this.getTitle(),setTimeout(function(){NaN==t.ruleForm.dateRange[0]&&(t.ruleForm.dateRange=t.$route.query.dateRange),console.log(t.ruleForm.dateRange,"dateRange")},300)},methods:{getTitle:function(){var t=this;this.$http.get(api_prefix+"/SchedulePlan/ticketList/"+this.$route.query.productId).then(function(e){var a=e.body.body;t.tableData=a},function(t){console.log("出错了")})},getTableData:function(){var t=this;0==this.$route.query.jdytabActive&&(this.ruleForm.flag=null),1==this.$route.query.jdytabActive&&(this.ruleForm.flag=0),2==this.$route.query.jdytabActive&&(this.ruleForm.flag=1),this.$http.post(api_prefix+"/SchedulePlan/planList",this.ruleForm).then(function(e){var a=e.body.body;t.tableDataTwo=a.pageInfo.list,t.tableDataThree=a.pageTotalInfo,t.tableDataFour=a.totalInfo,t.tableDataTotal=a.pageInfo.total},function(t){console.log("出错了")})},datetimerange:function(t){t?(console.log(t,"时间范围"),this.ruleForm.beginDate=t.substring(0,10),this.ruleForm.endDate=t.substring(13),console.log(this.ruleForm.beginDate,"this.ruleForm.createTimeS"),console.log(this.ruleForm.endDate,"this.ruleForm.createTimeE")):(this.ruleForm.beginDate="",this.ruleForm.endDate="")},jdytab:function(t){this.jdytabActive=t,console.log(t,"index"),this.getTableData()},handleCurrentChange:function(t){console.log(t,"val"),this.ruleForm.currPage=t,this.getTableData()},firstSearch:function(){this.getTableData()},goBack:function(){this.$router.push({name:"groupPlanManage"})}}}},631:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i);e.default={name:"roleManager",data:function(){return{currentPage:1,pageSizeAll:20,tableDataTotal:0,ruleSearchForm:{},ruleform:{currPage:1,pageSize:20,key:""},tableData:[],publicId:"",accesstoken:"",time:"",rCompanyId:null,companyName:null,alertFlag:!1,totelPeople:null,userInfo:null}},created:function(){},mounted:function(){var t=JSON.parse(sessionStorage.loginData);this.publicId=t.appId,this.rCompanyId=t.uCompanyId,this.companyName=t.cName,this.getTableData()},methods:{handleCurrentChange:function(t){this.currentPage=t,this.ruleform.currPage=t,this.getTableData()},handleRowChange:function(){},goBack:function(){0==this.$route.query.jdytabActive?this.$router.push({name:"groupSheet",query:{jdytabActive:this.$route.query.jdytabActive,time:this.$route.query.time,productId:this.$route.query.productId,pname:this.$route.query.pname,beginDate:this.$route.query.beginDate,endDate:this.$route.query.endDate,dateRange:this.$route.query.dateRange}}):this.$router.push({name:"groupSheet",query:{jdytabActive:this.$route.query.jdytabActive,time:this.$route.query.time,productId:this.$route.query.productId,pname:this.$route.query.pname,id:this.$route.query.id,name:this.$route.query.name,beginDate:this.$route.query.beginDate,endDate:this.$route.query.endDate,dateRange:this.$route.query.dateRange}})},getUserInfo:function(t){var e=this;this.$http.get(api_prefix+"user/get/"+t).then(function(t){0==t.data.code&&(e.userInfo=t.data.body,e.alertFlag=!0,e.$nextTick(function(){jdyFn.setAlertStyle("showtfcity")}))},function(t){console.log("出错了")})},getOrderInfo:function(t){location.href=location.origin+"/sale.html#/orderSellerDetail?id="+t},closeAlert:function(){this.alertFlag=!1},getTableData:function(){var t=this,e=null;0!=this.$route.query.jdytabActive&&(e=1==this.$route.query.jdytabActive?0:1);var a={currPage:this.currentPage,flag:e,pageSize:20,productId:this.$route.query.productId,sCalendar:this.$route.query.time,ticketId:this.$route.query.id};this.$http.post(api_prefix+"SchedulePlan/planDetailList",a).then(function(e){0==e.data.code?(t.tableData=e.body.body.list,t.totelPeople=e.body.body.total,t.tableDataTotal=e.body.body.total):t.$alert("获取销售明细失败！")},function(t){console.log("获取销售明细失败！")})}},filters:{degreeFormat:function(t){return t},sexName:function(t){return t?"女":"男"},chargePersonType:function(t){var e=(Number(t),"");return 0===t?e="":1===t?e="负责人+部门领导":2===t?e="法人":3===t?e="法人+部门领导":4===t?e="部门领导":5===t&&(e="法人+负责人+部门领导"),e}},components:{jdyAlert:s.a}}},632:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(69),r=a.n(n),l=a(671),o=(a.n(l),a(62)),c=a.n(o),u=a(148),d=a.n(u),p=a(122),m=a.n(p);e.default={name:"line",data:function(){return{btnFlag:!1,fileType:{fileType:"jpg"},uploadHeader:{Authorization:sessionStorage.token},action:"/common/file/upload",productType:[],productTypes:{"周边短线":{code:10,label:"周边短线"},"国内长线":{code:11,label:"国内长线"},"出境长线":{code:20,label:"出境长线"},"出境短线":{code:21,label:"出境短线"},"邮轮":{code:30,label:"邮轮"},"自由行":{code:50,label:"自由行"},"出境海岛":{code:51,label:"出境海岛"},"定制旅游":{code:52,label:"定制旅游"},"团队会奖":{code:54,label:"团队会奖"},"签证服务":{code:55,label:"签证服务"},"机票预订":{code:56,label:"机票预订"},"酒店预订":{code:57,label:"酒店预订"},"单项委托":{code:58,label:"单项委托"},"其他服务":{code:59,label:"其他服务"},"户外拓展":{code:60,label:"户外拓展"},"游学/研学":{code:61,label:"游学/研学"},"自驾游":{code:62,label:"自驾游"},"全球旅拍":{code:63,label:"全球旅拍"},"旅游金融":{code:64,label:"旅游金融"},"旅游地产":{code:65,label:"旅游地产"},"亲子":{code:66,label:"亲子"}},comeList:[{value:0,label:"自营"},{value:1,label:"非自营"}],brandList:[],peopleList:[],lineForm:{companyId:JSON.parse(sessionStorage.loginData).uCompanyId,cover:null,pBrand:null,pConfirm:null,pContacts:JSON.parse(sessionStorage.loginData).userId,pCostExclude:null,pCostInclude:null,pName:null,pNo:null,pNotes:null,pPhone:JSON.parse(sessionStorage.loginData).uTel,pQq:JSON.parse(sessionStorage.loginData).uQq,pRecommend:null,pShortName:null,pSort:null,pSpecial:null,pStatus:null,pType:null,pVisa:null,puserId:JSON.parse(sessionStorage.loginData).userId,pFrom:"",pFromName:null,pDestination:"",pDestinationPym:null,pPayWay:0,pPayAmount:"",pFirstPayType:1,ascription:0,subCompany:[],assembleCompanyIds:[]},ascriptionFlag:0,subCompanyArr:[],destinationList:[],rules:{pFrom:[{required:!0,message:"请选择产品来源",trigger:"change",type:"number"}],pFromName:[{required:!0,message:"请输入供应商单位名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字",trigger:"blur"}],pNo:[{required:!0,message:"请输入产品编号",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字",trigger:"blur"}],pDestination:[{type:"number",required:!0,message:"请选择目的地",trigger:"change"}],pName:[{required:!0,message:"请输入产品名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字",trigger:"blur"}],pShortName:[{min:1,max:20,message:"长度在 1 到 20 个字",trigger:"blur"}],pType:[{required:!0,message:"请选择类型",trigger:"change",type:"number"}],pBrand:[{type:"number",required:!0,message:"请输入品牌",trigger:"change"}],cover:[{required:!0,message:"请上传封面",trigger:"change"}]},brandName:"",contactsName:"",lineCopyFormpQq:"",lineCopyFormpPhone:""}},computed:{imgUploadPath:function(){return api_prefix+this.action}},methods:{defaultDestinationList:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{groupName:"产品目的地"}).then(function(e){t.destinationList=e.body.body,t.destinationList.forEach(function(t){t.name_des=t.dName.split(",")[0],t.name_py=t.dName.split(",")[1]})},function(e){t.$alert("网络出错啦~","温馨提示",{type:"error"})})},checkFileType:function(t){var e=t.type.startsWith("image/");e||this.$message.error("请选择图片上传");var a=t.size<5242880;return a||this.$message.error("文件太大了~请控制在5M以内"),e&&a},queryUserList:function(t){var e=this;this.$http.post(api_prefix+"/user/list",{uCompanyId:t,uRealName:this.contactsName,uStype:0}).then(function(t){0==t.body.code?e.peopleList=t.body.body.list:e.defalutErrorMessage(t.body.message)},function(t){e.defalutErrorMessage()})},testChange:function(t){var e=this;this.lineForm.pQq||this.lineForm.pPhone||(""==t?(this.lineForm.pQq="",this.lineForm.pPhone=""):this.$http.get(api_prefix+"/user/get/"+t).then(function(t){if(0==t.body.code){var a=t.body.body;e.lineForm.pQq=a.uQq,e.lineForm.pPhone=a.uTel}else e.defalutErrorMessage(t.body.message)},function(t){e.defalutErrorMessage()}))},testChange123:function(t){if(""==t)this.lineForm.pQq="",this.lineForm.pPhone="";else{var e=this.peopleList.filter(function(e){return e.userId==t});0!=e.length&&(this.lineForm.pQq=e[0].uQq,this.lineForm.pPhone=e[0].uTel)}},searchContacts:function(t){this.contactsName=t,this.queryUserList(JSON.parse(sessionStorage.loginData).uCompanyId)},queryBrandList:function(t){var e=this;this.$http.post(api_prefix+"/brand/list",{bCompanyId:t,bName:this.brandName}).then(function(t){0==t.body.code?e.brandList=t.body.body.resultList:e.defalutErrorMessage(t.body.message)},function(t){e.defalutErrorMessage()})},searchBrand:function(t){this.brandName=t,this.queryBrandList(JSON.parse(sessionStorage.loginData).uCompanyId)},productTypeChange:function(t){this.lineForm.pType=parseInt(t),null==this.$route.query.id&&(this.lineForm.pNo=this.typefilter(this.lineForm.pType)+window.FormatDate(new Date,"yyyy-MM-dd").replace(/-/g,"")+Math.floor(900*Math.random()+99))},typefilter:function(t){if(!t)return"XXXX";switch(t){case 10:return"GD";case 11:return"GC";case 20:return"CC";case 21:return"CD";case 30:return"YL";case 50:return"ZY";case 51:return"HD";case 52:return"DZ";case 54:return"HJ";case 55:return"QZ";case 56:return"JP";case 57:return"JD";case 58:return"DX";case 59:return"QT";case 60:return"HW";case 61:return"YX";case 62:return"ZJ";case 63:return"LP";case 64:return"LJ";case 65:return"LD";case 66:return"QZ"}},onSubmit:function(e,a){var i=this,s=this.lineForm.id;this.$refs[e].validate(function(e){if(!e)return i.$message.error("保存失败"),!1;var n=i.lineForm.subCompany.filter(function(t){return"number"==typeof t});i.lineForm.assembleCompanyIds=n;var r=i.destinationList.filter(function(t){return i.lineForm.pDestination==t.id});i.lineForm.pDestinationPym=r[0].name_py,i.lineForm.pPayAmount<=0&&1==i.lineForm.pPayWay?i.$message.error("首付款金额或比例需大于零"):s?(i.lineForm.id=s,i.lineForm.lineType=0,i.lineForm.pFromName&&(i.lineForm.pFromName=t.trim(i.lineForm.pFromName)),i.btnFlag=!0,i.$http.post(api_prefix+"/product/update",i.lineForm).then(function(t){0==t.body.code?(i.btnFlag=!1,i.$message.success("保存成功"),a&&a(s)):(i.btnFlag=!1,i.defalutErrorMessage(t.body.message))},function(t){i.defalutErrorMessage()})):(i.lineForm.lineType=0,i.lineForm.pFromName&&(i.lineForm.pFromName=t.trim(i.lineForm.pFromName)),i.btnFlag=!0,i.$http.post(api_prefix+"/product/save",i.lineForm).then(function(t){0==t.body.code?(i.btnFlag=!1,i.$message.success("保存成功"),i.lineForm.id=t.body.id[0],a&&a(t.body.id[0])):(i.btnFlag=!1,i.defalutErrorMessage(t.body.message))},function(t){i.defalutErrorMessage()}))})},goback:function(){this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){location.href="/transfer.html#/list"}).catch(function(){})},onSubmitGo:function(t){var e=this;this.onSubmit(t,function(t){var a={id:t};e.$route.query.copyId&&(a.copyId=e.$route.query.copyId),e.$route.query.id?a.isAdd=!1:a.isAdd=!0,e.$router.push({name:"Trip",query:a})})},uploadSuccess:function(t){0==t.code?this.lineForm.cover=t.body.key:this.defalutErrorMessage(t.message)},uploadError:function(){this.defalutErrorMessage()},editorUpdate:function(t,e){this.lineForm[e]=t},defaultProcut:function(e){var a=this;e&&this.$http.post(api_prefix+"/product/detail",{id:e,lineType:0}).then(function(e){if(0==e.data.body.code){e.data.body.body.product.pDestination=Number(e.data.body.body.product.pDestination),a.getSubCompanyId(e.data.body.body.product.companyId);var i={};r()(i,a.lineForm,e.data.body.body.product),i.cover=i.attach,i.line&&(i.line.id=i.line.tProductId,r()(i,i.line),r()(i,{line:null}));for(var s in i)""==t.trim(i[s])&&(i[s]=null);r()(a.lineForm,i),a.lineForm.ascriptionFlag=a.lineForm.ascription,setTimeout(function(){e.data.body.body.product.assembleCompanyIds.forEach(function(t){a.lineForm.subCompany.push(t)})},100)}else a.defalutErrorMessage(e.body.message)},function(t){a.defalutErrorMessage(t.body.message)})},copyProcut:function(t){var e=this;this.$http.post(api_prefix+"/product/detail",{id:t,lineType:0}).then(function(t){if(0==t.data.body.code){t.data.body.body.product.pDestination=Number(t.data.body.body.product.pDestination),e.getSubCompanyId(t.data.body.body.product.companyId),t.data.body.body.product.subCompany=[];var a=t.data.body.body.product;a.cover=a.attach,a.id=null,a.pName=null,a.pNo=null,a.pType=null,e.lineForm=a,a.line&&(a.line.id=null,r()(a,a.line),r()(a,{line:null})),e.lineForm.ascriptionFlag=e.lineForm.ascription,e.lineForm.subCompany=JSON.parse(s()(e.subCompanyArr)),setTimeout(function(){t.data.body.body.product.assembleCompanyIds.forEach(function(t){e.lineForm.subCompany.push(t)})},100)}else e.defalutErrorMessage("复制产品出错")},function(t){e.defalutErrorMessage("复制产品出错")})},defalutErrorMessage:function(t){t?this.$alert(t,"温馨提示",{type:"error"}):this.$alert("网络出错了~","温馨提示",{type:"error"})},clearPay:function(){this.lineForm.pPayAmount=""},subCompanyChange:function(){},getSubCompanyId:function(t){var e=this;this.$http.post(api_prefix+"Company/index",{pid:0,searchType:1,pageIndex:1,fastSearchStr:""},{emulateJSON:!0}).then(function(a){if(0==a.body.code){var i=a.body.body.list.filter(function(e){return e.id!=t});e.lineForm.subCompany=i,e.subCompanyArr=i}else e.$message.error("获取分公司失败！")})}},components:{ElInputNumber:m.a,ElFormItem:d.a,jdyEditor:c.a},mounted:function(){},created:function(){this.defaultDestinationList();var t=JSON.parse(sessionStorage.loginData).uCompanyId;this.queryBrandList(t),this.queryUserList(t),this.$route.query.id?this.defaultProcut(this.$route.query.id):this.$route.query.copyId?this.copyProcut(this.$route.query.copyId):this.getSubCompanyId(t)}}}.call(e,a(2))},633:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(4),r=a.n(n),l=a(14),o=a.n(l);t(function(){t(".jdy-main-scroll").scrollTop(0)}),e.default={name:"list",data:function(){return{h5Url:"",confirmlist:[],puserId:1,jdytabActive:null,type:{0:"全部类型",10:"周边短线",11:"国内长线",20:"出境长线",21:"出境短线",30:"邮轮",50:"自由行",51:"出境海岛",52:"定制旅游",54:"团队会奖",55:"签证服务",56:"机票预订",57:"酒店预订",58:"单项委托",59:"其他服务",60:"户外拓展",61:"游学/研学",62:"自驾游",63:"全球旅拍",64:"旅游金融",65:"旅游地产",66:"亲子"},brandList:[],brandSearchParams:{bCompanyId:null,bDel:null,bName:null,bStatus:null,puserId:0},tableData:[],companyData:[],companyValue:"",setkeyTags:[],setkeyTagsAll:[],setkeyInputVisible:!1,setkeyTagsMax:4,setkeyTagsNumber:0,setkeyInputValue:"",setkeyTagType:"danger",alertSetkeyFlag:!1,setkeyStyle:{},setkeySelectTags:[],alertJournalFlag:!1,journalStyle:{top:"164px",left:"300px"},currentPage:1,pageSize:10,companyName:"",companyType:null,companiesOptions:[],searchParams:{puserId:null,companyId:null,pName:null,pBrand:null,pType:"0",ascription:0,pageSize:10,currPage:1},deleteTripsParams:{tProductId:"",tType:1,puserId:0,tcStartDay:null,tcEndDay:null},tableDataTotal:0,addFlag:null,productsKeywords:[],allProductsKeywords:[],currentSelectKey:null,newKeywordForm:{companyId:null,kName:null,lSort:null,kColor:null},isOpen:"1",editType:[],tripDays:0,pid:null,c_id:null,module:"Product",journalTotal:0,journalCurrentData:[],rules:{kName:[{required:!0,message:"请输入名称",trigger:"blur"},{max:5,message:"最多输入5个字符",trigger:"blur"}],lSort:[{type:"number",message:"排序必须为数字值"}]},fullscreenLoading:!1,loading:!1,contractFlag:!1,tempId:null,tempIdGroup:[],BuyerCompanyIdArr:[],companyIdFlag:!1}},mounted:function(){var t=this,e=JSON.parse(sessionStorage.loginData);this.companyId=e.uCompanyId,this.newKeywordForm.companyId=e.uCompanyId,this.companyType=e.cType,this.brandSearchParams.bCompanyId=this.companyId,this.brandSearchParams.companyId=this.companyId,3==e.uDataLimit?(this.searchParams.companyId=e.uCompanyId,this.getBuyerCompanyId(),this.companyIdFlag=!0):this.searchParams.companyId=e.uCompanyId,this.$http.post(api_prefix+"/Company/index?pageIndex=1",{fastSearchStr:e.cName},{emulateJSON:!0}).then(function(e){t.companiesOptions=e.body.body.list},function(t){console.log("出错了")}),this.getTableData(),this.searchBrands()},methods:{gotoH5:function(t){var e="";e="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",this.h5Url=e+"/wap/m/detail.html?p_id="+t+"&from=preview",console.log(this.h5Url,"this.h5Url")},deleteRelation:function(t){var e=this;this.$http.post(api_prefix+"/productKey/deleteProductKeyRelation?keyId="+t.id+"&productId="+this.pid).then(function(a){if(0==a.data.code){var i=e.productsKeywords.indexOf(t);i>-1&&(e.productsKeywords.splice(i,1),e.setkeyTagsNumber--),e.$message({showClose:!0,message:"删除成功",type:"success"})}},function(t){console.log("获取日志出错了")})},changeColor:function(e){t(".alertTagMain a li").removeClass("active"),t(".alertTagMain a li").eq(e).addClass("active"),this.newKeywordForm.kColor=e,this.changeViewBtn()},getCurrentKeyword:function(t){console.log(t,"item"),console.log(this.setkeyTagsNumber,"setkeyTagsNumber"),this.setkeyTagsNumber<4?this.productsKeywords.indexOf(t)<0?(this.productsKeywords.push(t),this.currentSelectKey=t.id,this.setkeyTagsNumber++):this.$alert("请不要重复选择同一关键词"):this.$alert("最多可以选择4个关键词")},saveAddTag:function(){var t=this;this.$refs.newKeywordForm.validate(function(e){e&&t.$http.post(api_prefix+"productKey/saveNewKey",t.newKeywordForm).then(function(e){0==e.data.code?(t.$message({showClose:!0,message:"添加成功",type:"success"}),t.getProductsKeywords(),t.getAllProductsKeywords()):t.$message({type:"success",message:"保存成功!"})},function(t){console.log("出错了")})})},getAllProductsKeywords:function(){var t=this;this.$http.post(api_prefix+"productKey/selectKeyListByCompanyId",{companyId:this.companyId,currPage:1,pageSize:1e3}).then(function(e){t.allProductsKeywords=[],e.data.body.resultList.forEach(function(e){t.allProductsKeywords.push(e)})},function(t){console.log("获取日志出错了")})},getProductsKeywords:function(){var t=this;this.$http.post(api_prefix+"/productKey/selectKeyListByProductId?productId="+this.pid).then(function(e){t.productsKeywords=[],e.data.body.forEach(function(a){t.productsKeywords.push(a),t.setkeyTagsNumber=e.data.body.length>0?e.data.body.length:0})},function(t){console.log("获取日志出错了")})},alertSetkey:function(){this.newKeywordForm.kName=null,this.newKeywordForm.lSort=null,this.newKeywordForm.kColor=null,this.kName=null,this.currentSelectKey=null,this.alertSetkeyFlag=!this.alertSetkeyFlag,this.setkeyTagsNumber=0,this.$set(this.editType,this.pid,null)},gotoEditPage:function(t){return 1!=this.alertJournalFlag||this.pid?1==t?void(location.href="/transfer.html#/list/line?id="+this.pid):2==t?void(location.href="/transfer.html#/list/trip?id="+this.pid):3==t?void(location.href="/transfer.html#/list/ticketprice?id="+this.pid):4==t?void(location.href="/transfer.html#/list/schedule?id="+this.pid):5==t?this.tripDays<1?void this.$alert("请先添加默认行程"):void(location.href="/transfer.html#/list/supplement?id="+this.pid+"&pDays="+this.tripDays+"&isAdd="+!0):(6==t&&(this.alertSetkeyFlag=!0),8==t?void(location.href="/transfer.html#/list/addCostList?id="+this.pid+"&c_id="+this.c_id):(9==t&&this.getContract(),this.pid?void(7==t&&(location.href="#/list/line?copyId="+this.pid)):void this.$alert("请选择产品"))):void this.$alert("请选择产品")},getContract:function(){var t=this;this.$http.get(api_prefix+"front/order/m/electronicContract/prodTempList/"+this.pid).then(function(e){if(0==e.data.code){t.openContract();var a=e.data.body;t.tempId=a.id,t.tempIdGroup=a.list,t.tempIdGroup.push({templateTitle:"线下签署",id:0})}else t.$alert(e.data.message)},function(t){console.log("出错了")})},saveContract:function(){var t=this,e={currPage:1,pageSize:20,pid:this.pid,tid:this.tempId};this.$http.post(api_prefix+"front/order/m/electronicContract/bindProAndTmp",e).then(function(e){0==e.data.code?(t.$message.info("保存成功！"),t.closeContract()):t.$alert(e.data.message),t.getTableData()},function(t){console.log("出错了")})},openContract:function(){this.contractFlag=!0,this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity")})},closeContract:function(){this.contractFlag=!1,t(".alertbgg").remove(),this.$set(this.editType,this.pid,null)},deleteProduct:function(t){var e=this;this.$confirm("是否要删除该产品？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(api_prefix+"product/delete/"+t).then(function(t){0==t.data.code?e.$message.success("删除成功"):e.$alert(t.data.message),e.getTableData()},function(t){console.log("出错了")})}).catch(function(){})},alertJournal:function(t){if(!this.pid)return void this.$alert("请选择产品");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"/logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.pid).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})},rowclickHandler:function(t,e,a){this.pid=t.id,this.c_id=t.companyId,this.tripDays=t.pDays,this.getLogData(1),this.getProductsKeywords(),this.getAllProductsKeywords()},deleteTrips:function(t,e,a){var i=this;this.deleteTripsParams.tProductId=t,this.deleteTripsParams.tcStartDay=e,this.deleteTripsParams.tcEndDay=a,this.$confirm("你确定要删除该行程？","温馨提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){i.$http.post(api_prefix+"/trip/batchDelete",i.deleteTripsParams).then(function(t){0==t.data.code?i.$message({showClose:!0,message:"删除成功",type:"success"}):i.$alert(t.data.message),i.getTableData()},function(t){console.log("出错了")})})},changeConfirm:function(t){var e=this;0==t.pConfirm?t.pConfirm=1:t.pConfirm=0,t.lineType=0,console.log("pConfirm",t.pConfirm),delete t.pQq,delete t.pContacts,t.puserId=this.puserId,this.$http.post(api_prefix+"/product/update",t).then(function(t){0!=t.data.code&&e.$alert(t.data.message)},function(t){console.log("出错了")})},changeBrand:function(){this.searchParams.pBrand=null,this.brandList=null,this.searchBrands()},searchBrands:function(t){var e=this;this.searchParams.companyId&&(this.brandSearchParams.companyId=this.searchParams.companyId,this.brandSearchParams.bCompanyId=this.searchParams.companyId,this.brandSearchParams.bName=t,t||(this.searchParams.pBrand=null),this.brandList=null,this.$http.post(api_prefix+"/brand/list",this.brandSearchParams).then(function(t){e.brandList=t.data.body.resultList},function(t){console.log("出错了")}))},jdytab:function(t){this.jdytabActive=t,this.searchParams.pStatus=t,this.getTableData()},getChangeType:function(t){this.pType=t,this.getTableData()},queryExtTrips:function(t){var e=this;this.$http.post(api_prefix+"trip/list",{tProductId:t,tType:1}).then(function(t){e.$alert(t.body.message)},function(t){console.log("出错了")})},updatePage:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.getTableData()},1e3)},addProductKey:function(){var t=this;this.$http.post(api_prefix+"productKey/saveProductKeyRelation?productId=1&keyId=1").then(function(e){t.$alert(e.body.message)},function(t){console.log("出错了")})},effect:function(t,e,a){var i=this;this.$confirm("你确定要将该产品入库？","温馨提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){i.$http.post(api_prefix+"product/effect",{companyId:t,id:e,puserId:a}).then(function(t){0==t.data.code?(i.$message({showClose:!0,message:"入库成功",type:"success"}),i.getTableData()):i.$alert(t.data.message)},function(t){console.log("出错了")})})},uneffect:function(t,e,a){var i=this;this.$confirm("你确定要将该产品移出？","温馨提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){i.$http.post(api_prefix+"product/uneffect",{companyId:t,id:e,puserId:a}).then(function(t){0==t.data.code?(i.$message({showClose:!0,message:"出库成功",type:"success"}),i.getTableData()):i.$alert(t.data.message)},function(t){console.log("出错了")})})},getTableData:function(){var t=this,e=JSON.parse(s()(this.searchParams));"0"==e.pType&&delete e.pType,this.$http.post(api_prefix+"product/list",e).then(function(e){var a=e.data.body;t.tableData=a.resultList,t.tableDataTotal=a.totalNum},function(t){console.log("出错了")})},handleSetkeyClose:function(t){this.setkeyTags.splice(this.setkeyTags.indexOf(t),1)},showSetkeyInput:function(){var t=this;this.setkeyInputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleSetkeyInputConfirm:function(){var t=this.setkeyInputValue,e=this.setkeyTagType;if(console.log(e),t){var a={name:t,type:e,classname:"el-tag--"+e};this.setkeyTagsAll.push(a)}this.setkeyInputVisible=!1,this.setkeyInputValue=""},saveSetkey:function(t,e,a){var i=this;if(this.productsKeywords.length>4)return void this.$alert("最多可以添加4个关键词");if(this.productsKeywords.length<1)return void this.$alert("请选择词条");var s=[];this.productsKeywords.forEach(function(t){s.push(t.id)}),this.$http.post(api_prefix+"/productKey/batchSaveProductKeyRelation",{productId:this.pid,keyIds:s}).then(function(t){0==t.data.code&&(i.getProductsKeywords(),i.getTableData(),i.getAllProductsKeywords()),i.$message({type:"success",message:"保存成功!"})},function(t){console.log("获取日志出错了")})},setType:function(t,e,a){for(var i=this.setkeySelectTags,s=i.length,n=0;n<s;n++)this.setkeySelectTags[n].flag=!1;this.setkeySelectTags[a].flag=!0,this.setkeyTagType=t},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){t&&(this.searchParams.currPage=t,this.searchParams.pageNum=t,this.getTableData())},changeViewBtn:function(){switch(this.newKeywordForm.kColor){case 0:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkone");break;case 1:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bktwo");break;case 2:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkthree");break;case 3:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkfour");break;case 4:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkfive");break;case 5:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bksix");break;case 6:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkseven");break;case 7:t(".alertTagTop .jl-TagViewBtn").removeClass("bkone bktwo bkthree bkfour bkfive bksix bkseven bkeight"),t(".alertTagTop .jl-TagViewBtn").addClass("bkeight")}this.tagViewBtnColor=t(".jl-TagViewBtn").css("color"),console.log(this.tagViewBtnColor)},getBuyerCompanyId:function(e){var a=this;this.$http.post(api_prefix+"Company/index",{pid:0,searchType:1,pageIndex:1,fastSearchStr:t.trim(e)},{emulateJSON:!0}).then(function(t){0==t.body.code&&(a.BuyerCompanyIdArr=t.body.body.list)})}},watch:{"searchParams.companyId":"changeBrand"},components:{jdyAlert:r.a,jdyLog:o.a},created:function(){jdyFn.scrollToTop()},filters:{changeCreate:function(t){function e(t){return parseInt(t)<10&&(t="0"+t),t}var a=new Date(t),i=a.getFullYear(),s=a.getMonth()+1,n=a.getDate(),r=a.getHours(),l=a.getMinutes(),o=a.getSeconds();return t=(i+"-"+e(s)+"-"+e(n)+" "+e(r)+":"+e(l)+":"+e(o)).substr(0,10)}}}}.call(e,a(2))},634:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"recycle",data:function(){return{search:{edit:"",type:"",company:"",selectProduct:"",selectProduct_select:"",addProduct:""},tableData:[],currentPage:3,pageSize:100}},methods:{effect:function(t,e,a){this.$http.post(api_prefix+"product/effect",{companyId:t,id:e,puserId:a}).then(function(t){alert("刷新页面数据")},function(t){console.log("出错了")})},getTableData:function(t){var e=this;alert("请求数据");var a=this.search,i={data:a};if(t)for(var s in t){if("data"==s)return!1;i[s]=t[s]}console.log(i),this.$http.post(api_prefix+"product/list",{puserId:null,companyId:"1",pName:null,pBrand:null,pType:null,pStatus:"1"}).then(function(t){var a=t.data.body;e.tableData=a.resultList},function(t){console.log("出错了")})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){if(t){alert("当前页"+t);var e={currentPage:t};this.getTableData(e),this.currentPage=t}}},created:function(){var t=this;this.$http.post(api_prefix+"product/list",{puserId:null,companyId:"1",pName:null,pBrand:null,pType:null,pStatus:"1"}).then(function(e){var a=e.data.body;t.tableData=a.resultList},function(t){console.log("出错了")})},computed:{tableDataTotal:function(){return 500}}}},635:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(102),s=a.n(i),n=a(4),r=a.n(n),l=a(131),o=a.n(l);e.default={name:"",data:function(){return{banqiForm:o.a.banqiForm,banqiForm2:o.a.banqiForm2,banqiRule:o.a.banqiRule,banqiRule2:o.a.banqiRule2,pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},tableData2:[{licenseNumber:"",seatNumber:"",company:"",reservePrescription:""}],tableData3All:{car:"1",seatNumber:"30",company:"",time:"3",someIndex:"0"},tableData3:[{car:"",seatNumber:"",company:"",time:"",bus:"",info:{carNum:1,date:"",all:"50",buyed:"1"},seatSatus:[{status:0},{status:1},{status:2},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0}]},{car:"",seatNumber:"",company:"",time:"",bus:"",info:{carNum:1,date:"",all:"50",buyed:"1"},seatSatus:[{status:0},{status:1},{status:2},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0},{status:0}]}]}},methods:{goback:function(t){this.$confirm("数据未保存，确定返回吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){location.href="http://localhost:9090/transfer.html#/"+t}).catch(function(){})},setSeat:function(t){alert(t+1)},addSingleTicket:function(){},removeSingleTicket:function(){},handleCurrentChange:function(t){console.log(t)},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t}},components:{jdyAlert:r.a,jdyCalendar:s.a}}},636:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(69),s=a.n(i),n=a(673),r=a.n(n),l=a(102),o=a.n(l),c=a(4),u=(a.n(c),a(131)),d=(a.n(u),a(149)),p=a.n(d),m=a(122),h=a.n(m),f=a(148),v=a.n(f),g=a(293);e.default={components:{ElCol:g.a,ElFormItem:v.a,ElInputNumber:h.a,jdyCalendar:o.a,ElInput:p.a},name:"",data:function(){return{btnFlag:!1,loginCompanyId:"",addType:this.$route.query.type,setType:[{value:0,label:"不对号入座"},{value:1,label:"对号入座(系统随机)"},{value:2,label:"对号入座(人工选择)"}],WeekDay:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],week:(new Date).getDay(),calendars:new Date,multiCalendars:(new Date).format("yyyy-MM-dd"),sLeaveTime:new Date,banqiForm:{busDTOS:[],calendars:[new Date],sCarNum:null,sCarSeats:null,sGroupNum:0,sLeaveTime:"",sPrint:null,sProductId:this.$route.query.id,sScheduleName:"",sScheduleNo:"",sShamNum:"",sSitType:0,sStopSale:30,sStopType:0,tickets:[],seatSold:0},TicketAddDTO:{id:"",tMarketPrice:"",tPeerPrice:"",tStock:""},busDto:{holdList:[],bSeatsLock:"",bSeatsNum:0,busHolds:[]},busHold:{bAccount:"",bCompanyId:"",bHoldHours:"",bSeat:""},banqiRule:{sScheduleNo:[{required:!0,message:"请输入班期编号",trigger:"blur"},{min:1,max:20,message:"班期编号最多20个字符！"}],sCarNum:[{required:!0,message:"请输入车辆数",trigger:"blur",numeric:!0,type:"number"}],sCarSeats:[{required:!0,message:"请输入座位数",trigger:"blur",numeric:!0,type:"number"}],sStopSale:[{required:!0,message:"请输入停售时间",trigger:"blur",numeric:!0,type:"number"}]},pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},saveUrl:api_prefix+"/Schedule/batchInsert",ticketListUrl:api_prefix+"/ticket/list",baseCategory:[],ticketList:[],ticketPage:{currPage:1,pageSize:30,total:0},ticketLimitType:{0:"无限制 ",1:"实名票",2:"限制性别",3:"限制年龄"},simpleWeekDay:["一","二","三","四","五","六","日"],tableData2:[{licenseNumber:"",seatNumber:"",company:"",reservePrescription:""}],carList:[],currentCar:-1,currentCompany:null,selectedList:[],temptoraryTime:null,companyList:[],loading:!1}},mounted:function(){this.getProductDetail(),this.getCategory()},methods:{getTipContent:function(t){for(var e=this.carList[this.currentCar].busHolds,a=0;a<e.length;a++)if(-1!==e[a].bSeat.split(",").indexOf(t.toString()))return e[a].companyName?e[a].companyName:"暂无";return"没找到预留信息"},getProductDetail:function(){var t=this,e={id:this.$route.query.id,lineType:0};this.$http.post(api_prefix+"product/detail",e).then(function(e){0==e.data.code?t.banqiForm.sScheduleNo=t.typefilter(e.data.body.body.product.pType)+t.formatDate(new Date,"yyyy-MM-dd").replace(/-/g,"")+Math.floor(900*Math.random()+99):t.$alert(e.data.message)},function(t){console.log("获取产品详情出错了")})},typefilter:function(t){if(!t)return"XXXX";switch(t){case 10:return"GD";case 11:return"GC";case 20:return"CC";case 21:return"CD";case 30:return"YL";case 50:return"ZY";case 51:return"HD";case 52:return"DZ";case 54:return"HJ";case 55:return"QZ";case 56:return"JP";case 57:return"JD";case 58:return"DX";case 59:return"QT";case 60:return"HW";case 61:return"YX";case 62:return"ZJ";case 63:return"LP";case 64:return"LJ";case 65:return"LD";case 66:return"QZ"}},multiCanlederChange:function(t){this.multiCalendars=t,console.log(t)},lockSeat:function(){var t=this;if(this.currentCar<0)return void this.$alert("请选择车辆","温馨提示",{type:"warning"});if(this.selectedList.length){var e=this.carList[this.currentCar].bSeatsLock;if(console.log(this.carList[this.currentCar].holdList),this.selectedList=this.selectedList.filter(function(e){return-1==t.carList[t.currentCar].holdList.indexOf(e.toString())}),e){var a={};e.split(",").concat(this.selectedList).forEach(function(t){a[t]=""}),this.carList[this.currentCar].bSeatsLock=r()(a).map(function(t){return t}).join(","),a=null}else this.carList[this.currentCar].bSeatsLock=this.selectedList.join(",")}else this.$alert("请选择车座","温馨提示",{type:"warning"});this.selectedList=[]},unlockSeat:function(){var t=this;if(this.currentCar<0)return void this.$alert("请选择车辆","温馨提示",{type:"warning"});this.selectedList=this.selectedList.filter(function(e){return-1!=t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())&&-1==t.carList[t.currentCar].holdList.indexOf(e.toString())}),this.selectedList.length?(this.carList[this.currentCar].bSeatsLock=this.carList[this.currentCar].bSeatsLock.split(",").filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}).join(","),this.selectedList=[]):this.$alert("请选择已经锁定的车座","温馨提示",{type:"warning"})},addTemporary:function(){var t=this;if(this.currentCar<0)return void this.$alert("请选择车辆","温馨提示",{type:"warning"});if(null==this.currentCompany)return void this.$alert("请先选择单位","温馨提示",{type:"warning"});if(!this.temptoraryTime)return void this.$alert("请输入预留时效","温馨提示",{type:"warning"});if(this.selectedList=this.selectedList.filter(function(e){return-1==t.carList[t.currentCar].holdList.indexOf(e.toString())&&-1==t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())}),!this.selectedList.length)return void this.$alert("请选择未预留或者锁定的车座","温馨提示",{type:"warning"});var e=this.getCurrentCompanyBusHold();if(e)e.bSeat=this.selectedList.join(","),e.bHoldHours=this.temptoraryTime;else{var a={bAccount:"",companyName:this.getCompanyName(this.currentCompany),bCompanyId:this.currentCompany,bHoldHours:this.temptoraryTime,bSeat:this.selectedList.join(",")};this.carList[this.currentCar].busHolds.push(a)}var i={};this.carList[this.currentCar].holdList.concat(this.selectedList).forEach(function(t){i[t]=""}),this.carList[this.currentCar].holdList=r()(i).map(function(t){return t}),i=null,this.selectedList=[],console.log(this.carList[this.currentCar].holdList)},getCompanyName:function(t){var e="某有匹配的单位";return this.companyList.forEach(function(a){a.id.toString==t.toString&&(e=a.cName)}),e},getCurrentCompanyBusHold:function(){var t=this,e=null;return this.carList[this.currentCar].busHolds.forEach(function(a){a.bCompanyId==t.currentCompany&&(e=a)}),e},releaseTemporary:function(){var t=this;return this.currentCar<0?void this.$alert("请选择车辆","温馨提示",{type:"warning"}):(this.selectedList=this.selectedList.filter(function(e){return-1==t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString())}),this.selectedList.length?(this.carList[this.currentCar].busHolds.forEach(function(e){e.bSeat=e.bSeat.split(",").filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}).join(",")}),this.carList[this.currentCar].holdList=this.carList[this.currentCar].holdList.filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}),void(this.selectedList=[])):void this.$alert("请选择已经预留的座位","温馨提示",{type:"warning"}))},carNumChange:function(t){var e=this.carList.length;if(t>e)for(var a=0;a<t-e;a++)this.carList.push({holdList:[],bSeatsLock:"",bSeatsNum:this.banqiForm.sCarSeats||0,busHolds:[]});else if(t<e)for(var i=0;i<e-t;i++)this.carList.pop()},seatChange:function(t){this.currentCar>-1?this.banqiForm.sCarSeats=t:this.$alert("请选择车辆","温馨提示",{type:"warning"})},addCar:function(){this.banqiForm.sCarNum+=1,this.carNumChange(this.banqiForm.sCarNum)},removeCar:function(){if(this.banqiForm.sCarNum>0)if(this.currentCar>-1){var t=this.currentCar;this.currentCar=-1,this.carList.splice(t,1),this.banqiForm.sCarNum-=1}else this.$alert("请选择车辆","温馨提示",{type:"warning"})},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){if(!e.dealBanqiFormData())return;e.btnFlag=!0,e.$http.post(e.saveUrl,e.banqiForm).then(function(t){0==t.data.code?(e.$message.success("修改成功"),setTimeout(function(){e.btnFlag=!1,e.$router.push({name:"Schedule",query:{id:e.$route.query.id}})},1e3)):(e.btnFlag=!1,e.$alert(t.data.message))})}else e.$message.error("提交失败")})},dealBanqiFormData:function(){var e=this;2==this.addType?this.multiCalendars&&(this.banqiForm.calendars=this.multiCalendars.split(",").map(function(e){return t.trim(e)})):this.calendars&&(this.banqiForm.calendars[0]=this.formatDate(this.calendars,"yyyy-MM-dd")),this.sLeaveTime&&(this.banqiForm.sLeaveTime=this.sLeaveTime);for(var a=0;a<this.banqiForm.calendars.length;a++){var i=new Date(this.banqiForm.calendars[a]),s=new Date(this.formatDate(new Date,"yyyy-MM-dd"));if(console.log(i,s),i<s)return this.$alert("出发时间不能早于今天","温馨提示",{type:"warning"}),!1}var n=[],r=!1;if(this.$refs.multipleTable.selection.forEach(function(t){(!t.tMarketPrice||t.tMarketPrice<=0)&&(e.$alert("门市价不能为空且非负","温馨提示",{type:"warning"}),r=!0),(!t.tPeerPrice||t.tPeerPrice<=0)&&(e.$alert("同行价不能为空且非负","温馨提示",{type:"warning"}),r=!0),n.push({id:t.id,tMarketPrice:t.tMarketPrice,tPeerPrice:t.tPeerPrice,tStock:t.tStock})}),r)return!1;if(this.banqiForm.tickets=n,n.length<=0)return this.$alert("请选择车票","温馨提示",{type:"warning"}),!1;if(0==this.carList.length)return this.$alert("请先添加车辆信息","温馨提示",{type:"warning"}),!1;for(var l=0;l<this.carList.length;l++)if(this.carList[l].bSeatsNum<=0)return this.$alert("请为"+(l+1)+"号车添加座位","温馨提示",{type:"warning"}),!1;return this.banqiForm.busDTOS=this.carList,!0},formatDate:function(t,e){if(t instanceof Date){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}throw new Error("日期格式转换发现错误的参数类型")},calendarsChange:function(t){this.week=t?new Date(t).getDay():null},goback:function(t){var e=this;this.$confirm("数据未保存，确定返回吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:"Schedule",query:{id:e.$route.query.id}})}).catch(function(){})},defaultTicketList:function(){var t=this;if(this.banqiForm.sProductId){var e=JSON.parse(sessionStorage.loginData);this.loginCompanyId=e.uCompanyId;var a=s()(this.ticketPage,{tProductId:this.banqiForm.sProductId,tStatus:0,tCompanyId:this.loginCompanyId});this.dealHttpReseponse(this.ticketListUrl,a,function(e){var a=e.data.body;setTimeout(function(){t.ticketList.forEach(function(e){e.tCategory=t.filterCategory(e.tCategory)})},200),t.ticketList=a.list,t.ticketPage.currPage=e.body.body.pageNum,t.ticketPage.total=e.body.body.total})}},getCategory:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},filterCategory:function(t){var e=[];return""==t?t="---":e=this.baseCategory.filter(function(e){return t==e.id}),0!=e.length?e[0].name:t},getLimitType:function(t){return t?this.ticketLimitType[t]:"无限制"},getEffctiveDay:function(t){var e=this,a="";return t.toString().split("").forEach(function(t,i){parseInt(t)&&(a+=e.simpleWeekDay[i])}),a},currentPageChange:function(t){t!=this.ticketPage.currPage&&(this.ticketPage.currPage=t,this.defaultTicketList())},pageSizeChange:function(t){},setSeat:function(t){var e=this.selectedList.indexOf(t);-1==e?this.selectedList.push(t):this.selectedList.splice(e,1)},addSingleTicket:function(){},removeSingleTicket:function(){},handleCurrentChange:function(t){this.selectedList=[],this.currentCar=this.carList.indexOf(t)},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t},searchCompany:function(t){this.defaultCompanyList(t)},defaultCompanyList:function(t){var e=this;this.loading=!0;var a={pageIndex:1};t&&(a.fastSearchStr=t),this.$http.post(api_prefix+"/Company/index",a,{emulateJSON:!0}).then(function(t){var a=t.body;"0"==a.code?e.companyList=a.body.list:e.$alert(a.message),e.loading=!1},function(t){e.loading=!1,e.$alert("网络错误")})},dealHttpReseponse:function(t,e,a,i){var s=this;i||(i="post"),this.$http[i](t,e).then(function(t){0==t.body.code?a(t):s.$alert(t.body.message,"温馨提示","error")},function(t){s.$alert("网络错误","温馨提示","error")})},defaultBanqiForm:function(){if(this.$route.query.banqi){var t=this.$route.query.banqi,e=JSON.parse(t);e.sCalendar&&(this.calendars=new Date(e.sCalendar)),e.sLeaveTime&&(this.sLeaveTime=e.sLeaveTime),console.log(e),this.banqiForm=e}}},created:function(){this.currentCompany="",this.companyList=[],this.defaultTicketList(),this.defaultCompanyList()}}}.call(e,a(2))},637:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(220),s=a.n(i),n=a(39),r=a.n(n),l=a(4),o=a.n(l),c=a(14),u=a.n(c),d=a(131),p=a.n(d);e.default={name:"Schedule",data:function(){var t;return t={datePicker:"",schedulesStatus:"",msg:"Schedule",booleanValue:{on:0,off:1},search:{currPage:1,pageSize:20,sCalendarEnd:null,sCalendarStart:null,sProductId:this.$route.query.id,flag:null,orderBy:1,tableDataTotal:0},ProductInfo:{pName:"",pNo:"",pType:"",createUser:""},productType:{10:"周边短线",11:"国内长线",20:"出境旅游",30:"邮轮",40:"特色游",50:"自助游"},ScheduleListUrl:api_prefix+"/Schedule/list",tableData:[],banqiForm:p.a.banqiForm,banqiForm2:p.a.banqiForm2,banqiRule:p.a.banqiRule,banqiRule2:p.a.banqiRule2,pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},journalCurrentData:{},currentPage:1,pageSize:100,multipleSelection:[],multipleSelection3:[],addBanqiFlag1:!1,addBanqiFlag2:!1,addBanqiFlag3:!1,stopSalesType:{0:function(t){return 60*t*1e3},1:function(t){return 60*t*60*1e3},2:function(t){return 24*t*60*60*1e3}},WeekDay:["一","二","三","四","五","六","日"],orderByList:{"按班期编号分组":1,"按出发日期分组":3,"按出发时分分组":5,"按星期几分组":7},updateStatusUrl:api_prefix+"/Schedule/updateStatus",fullscreenLoading:!1,clearCustomTicketsUrl:api_prefix+"/Schedule/clearCustomTickets/",alertJournalFlag:!1,h5Url:"",rowId:"",pid:null,module:"Schedule",journalTotal:0},r()(t,"journalCurrentData",[]),r()(t,"showstatue",0),t},methods:{getRowId:function(t){this.rowId=t,console.log(this.rowId,"this.rowId")},gotoH5:function(){var t=this.$route.query.id,e="";e="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",this.h5Url=e+"/wap/m/detail.html?p_id="+t+"&from=preview",console.log(this.h5Url,"this.h5Url")},goback:function(t){this.$router.push({name:t})},goLast:function(t){this.$router.push({name:t,query:{id:this.$route.query.id}})},look:function(){this.$alert("该功能暂未开放,敬请期待","温馨提示",{type:"warning"})},refreshBtn:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.getTableData()},1e3)},orderByChange:function(){this.getTableData()},dateRangeChange:function(t){if(t){var e=t.split(" - ");this.search.sCalendarStart=e[0],this.search.sCalendarEnd=e[1]}else this.search.sCalendarStart=null,this.search.sCalendarEnd=null;this.getTableData()},changeSelectStatus:function(t){this.search.flag=""!==t?Number(t):null,this.getTableData()},formatDate:function(t){if(s()(t)){var e=new Date(parseFloat(t)),a=e.getMonth()+1;return e.getFullYear()+"/"+a+"/"+e.getDate()}return""},getStopSaleDate:function(t,e,a,i){if(a>=0&&a<=2&&s()(t)){var n=this.stopSalesType[a](i),r=new Date(t).getFullYear(),l=new Date(t).getMonth(),o=new Date(t).getDate(),c=new Date(e).getHours(),u=new Date(e).getMinutes(),d=new Date(r,l,o,c,u,0);return d=new Date(d.getTime()-n),d.format("yyyy-MM-dd hh:mm")}return""},editBanqi:function(t){t||this.$message.error("请选择班期"),this.$router.push({name:"editSchedule",query:{id:this.search.sProductId,banqi:t}})},editSeat:function(t){var e=this;this.$confirm("你确定要删除该内容？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(!t)return void e.$message.error("请选择班期");e.$http.get(e.clearCustomTicketsUrl+t).then(function(t){console.log(t);try{e.$message.success("操作成功")}catch(a){e.$message.error(t.body.message)}},function(t){e.$alert("网络错误","温馨提示","error")})}).catch(function(){})},delBanqi:function(t){var e=this;this.$confirm("你确定要删除该内容？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(!t)return void e.$message.error("请选择班期");e.$http.post(e.updateStatusUrl,{id:t,sStatus:2}).then(function(t){0==t.data.code?(e.getTableData(),setTimeout(function(){e.$message({showClose:!0,message:"删除成功",type:"success"})},500)):e.$alert(t.data.message)},function(t){console.log("出错了")})}).catch(function(){})},updateStatus:function(t){if(console.log("status: "+t),!this.rowId)return void this.$message.error("请选择班期");this.dealHttpReseponse(this.updateStatusUrl,{id:this.rowId,sStatus:t},function(){fun&&fun()})},changeStatus:function(t){this.updateStatus(t)},getTableData:function(){var t=this;this.dealHttpReseponse(this.ScheduleListUrl,this.search,function(e){var a=e.body.body;t.tableData=a.list,t.search.tableDataTotal=a.total})},upJia:function(){var t=this;this.dealHttpReseponse(this.ScheduleListUrl,{currPage:1,pageSize:5,sProductId:this.$route.query.id},function(e){e.body.body.list.length>0?t.effect(t.ProductInfo.companyId,t.ProductInfo.id,t.ProductInfo.updateUser):t.$alert("请先维护好线路，行程，票价，班期等信息","温馨提示",{type:"warning"})})},effect:function(t,e,a){var i=this;this.$http.post(api_prefix+"product/effect",{companyId:t,id:e,puserId:a}).then(function(t){0==t.body.code?(i.$message.success("入库成功"),setTimeout(function(){i.$router.push({name:"list"})},1e3)):i.$message.error("入库失败")},function(t){i.$message.error("入库失败")})},submitForm:function(t){this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;alert("submit!")})},addSingleTicket:function(){},removeSingleTicket:function(){},addTr:function(){this.ruleForm3.push(this.ruleForm3Obj),console.log(this.ruleForm3)},removeTr:function(){0==this.multipleSelection3.length?alert("请选择要删除的行!"):console.log(this.multipleSelection3)},cloneTr:function(){},handleCurrentJournalChange:function(t){},handleSizeChange:function(t){},handleCurrentChange:function(t){t&&t!=this.search.currPage&&(this.search.currPage=t,this.getTableData())},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t},addBanqi:function(t){this.$router.push({name:"ScheduleOne",query:{id:this.search.sProductId,type:t}})},defaultUserName:function(t){var e=this;this.dealHttpReseponse(api_prefix+"/user/get/"+t,{},function(t){try{e.ProductInfo.createUser=t.body.body.uRealName,e.showstatue=t.body.body.uStatus}catch(t){e.ProductInfo.createUser="没有的用户"}},"get")},defaultProductInfo:function(){var t=this;this.dealHttpReseponse(api_prefix+"/product/detail",{id:this.search.sProductId,tType:0,lineType:0},function(e){t.ProductInfo=e.body.body.body.product,t.defaultUserName(t.ProductInfo.createUser)},"post",function(){t.$alert("不存在的产品","温馨提示","error")})},dealHttpReseponse:function(t,e,a,i,s){var n=this;i||(i="post"),this.$http[i](t,e).then(function(t){0==t.body.code?a(t):s?s():n.$alert(t.body.message,"温馨提示","error")},function(t){n.$alert("网络错误","温馨提示","error")})},addBanqiClose:function(){this.addBanqiFlag1=!1,this.addBanqiFlag2=!1,this.addBanqiFlag3=!1,this.search.banqi="",t(".alertbgg").remove()},alertJournal:function(t){if(!this.pid)return void this.$alert("请选择用户");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"/logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.pid).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})},rowclickHandler:function(t,e,a){this.pid=t.id,this.companyId||(this.companyId=t.companyId),this.getLogData(1)}},created:function(){if(!this.search.sProductId)return void this.$message.error("请选择产品");this.defaultProductInfo(),this.getTableData()},components:{jdyAlert:o.a,jdyLog:u.a},computed:{}}}.call(e,a(2))},638:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(69),s=a.n(i),n=a(13),r=a.n(n),l=a(102),o=a.n(l),c=a(4),u=(a.n(c),a(131)),d=(a.n(u),a(149)),p=a.n(d),m=a(122),h=a.n(m);e.default={components:{ElInputNumber:h.a,jdyCalendar:o.a,ElInput:p.a},name:"editSchedule",data:function(){return{btnFlag:!1,addType:this.$route.query.type,setType:[{value:0,label:"不对号入座"},{value:1,label:"对号入座(系统随机)"},{value:2,label:"对号入座(人工选择)"}],WeekDay:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],week:(new Date).getDay(),calendars:new Date,multiCalendars:"",sLeaveTime:new Date,banqiForm:{busDTOS:[],calendars:[new Date],sCarNum:null,sCarSeats:null,sGroupNum:null,sLeaveTime:"",sPrint:null,sProductId:11,sScheduleName:"",sScheduleNo:"",sShamNum:"",sSitType:"",sStopSale:null,sStopType:"",tickets:[],seatSold:0,fromProductListMenu:!0},TicketAddDTO:{id:"",tMarketPrice:"",tPeerPrice:"",tStock:""},busDto:{holdList:[],bSeatsLock:"",bSeatsNum:0,busHolds:[]},busHold:{bAccount:"",bCompanyId:"",bHoldHours:"",bSeat:""},banqiRule:{sScheduleNo:[{required:!0,message:"请输入班期编号",trigger:"blur"},{min:1,max:20,message:"班期编号最多20个字符！"}],sCarNum:[{required:!0,message:"请输入车辆数",trigger:"blur",numeric:!0,type:"number"}],sCarSeats:[{required:!0,message:"请输入座位数",trigger:"blur",numeric:!0,type:"number"}],sStopSale:[{required:!0,message:"请输入停售时间",trigger:"blur",numeric:!0,type:"number"}]},baseCategory:[],pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},saveUrl:api_prefix+"/Schedule/updateSchedule",ticketListUrl:api_prefix+"/ticket/list",getScheduleUrl:api_prefix+"/Schedule/scheduleWithTickets/"+this.$route.query.banqi+"/2",selectBusUrl:api_prefix+"/Bus/selectBus",addBusUrl:api_prefix+"/Bus/insertBus",removeBusUrl:api_prefix+"/Bus/deleteBus",updateLockSeatInfoUrl:api_prefix+"/Bus/updateLock",updateTemporarySeatInfoUrl:api_prefix+"/Bus/updateReserve",updateCarSeatNumUrl:api_prefix+"/Bus/updateSeat",ticketList:[],oldTickedList:[],ticketPage:{currPage:1,pageSize:30,total:0},ticketLimitType:{0:"无限制 ",1:"实名票",2:"限制性别",3:"限制年龄"},simpleWeekDay:["一","二","三","四","五","六","日"],tableData2:[{licenseNumber:"",seatNumber:"",company:"",reservePrescription:""}],carList:[],currentCar:-1,currentCompany:"",selectedList:[],temptoraryTime:null,companyList:[],loading:!1,canNotModifyCarNum:!1,currentCarSeatNum:0}},methods:{changeType:function(t){console.log(t,"-------------------"),this.banqiForm.sSitType=parseInt(t)},modifyCarSeatNum:function(){var t=this;if(this.currentCar<0)return this.$alert("请选择车辆","温馨提示",{type:"warning"}),void(this.currentCarSeatNum=e);var e=this.carList[this.currentCar].bSeatsNum,a=this.currentCarSeatNum;if(a<=0)return this.$alert("车座数请输入大于0的数字","温馨提示",{type:"warning"}),void(this.currentCarSeatNum=e);if(e<a)this.dealHttpReseponse(this.updateCarSeatNumUrl,{bSeatsNum:a,id:this.carList[this.currentCar].id},function(e){t.carList[t.currentCar].bSeatsNum=t.currentCarSeatNum});else if(e>a){var i=this.carList[this.currentCar].holdList.concat(this.carList[this.currentCar].bSeatsLock.split(",")),s=!0;i.forEach(function(t){parseInt(t)>=a&&(s=!1)}),s?this.dealHttpReseponse(this.updateCarSeatNumUrl,{bSeatsNum:a,id:this.carList[this.currentCar].id},function(e){t.carList[t.currentCar].bSeatsNum=t.currentCarSeatNum}):(this.$alert("有座位已经预留或者锁定，不能修改","温馨提示",{type:"warning"}),this.currentCarSeatNum=e)}},getTipContent:function(t){for(var e=this.carList[this.currentCar].busHolds,a=0;a<e.length;a++)if(-1!==e[a].bSeat.split(",").indexOf(t.toString()))return e[a].companyName?e[a].companyName:"暂无";return"没找到预留信息"},multiCanlederChange:function(t){this.multiCalendars=t},lockSeat:function(){var t=this;if(this.currentCar<0)return void this.$alert("请选择车辆","温馨提示",{type:"warning"});var e=this.carList[this.currentCar].bSeatsLock.split(",");this.selectedList=this.selectedList.filter(function(a){return-1==t.carList[t.currentCar].holdList.indexOf(a.toString())&&-1==e.indexOf(a.toString())}),this.selectedList.length?this.dealHttpReseponse(this.updateLockSeatInfoUrl,{bSeatsLock:this.selectedList.join(","),id:this.carList[this.currentCar].id,lock:!0},function(a){e.length?t.carList[t.currentCar].bSeatsLock=e.concat(t.selectedList).join(","):t.carList[t.currentCar].bSeatsLock=t.selectedList.join(","),t.selectedList=[]}):this.$alert("请选择未锁定且未预留的车座","温馨提示",{type:"warning"})},unlockSeat:function(){var t=this;if(this.currentCar<0)return void this.$alert("请选择车辆","温馨提示",{type:"warning"});this.selectedList=this.selectedList.filter(function(e){return-1!=t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())&&-1==t.carList[t.currentCar].holdList.indexOf(e.toString())}),this.selectedList.length?this.dealHttpReseponse(this.updateLockSeatInfoUrl,{bSeatsLock:this.selectedList.join(","),id:this.carList[this.currentCar].id,lock:!1},function(e){t.carList[t.currentCar].bSeatsLock=t.carList[t.currentCar].bSeatsLock.split(",").filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}).join(","),t.selectedList=[]}):this.$alert("请选择已经锁定的车座","温馨提示",{type:"warning"})},addTemporary:function(){var t=this;return console.log(this.currentCompany,"this.currentCompany"),this.currentCar<0?void this.$alert("请选择车辆","温馨提示",{type:"warning"}):null==this.currentCompany?void this.$alert("请先选择单位","温馨提示",{type:"warning"}):this.temptoraryTime?(this.selectedList=this.selectedList.filter(function(e){return-1==t.carList[t.currentCar].holdList.indexOf(e.toString())&&-1==t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())}),this.selectedList.length?void this.dealHttpReseponse(this.updateTemporarySeatInfoUrl,{bAccount:"",bBusId:this.carList[this.currentCar].id,bCompanyId:this.currentCompany,bHoldHours:this.temptoraryTime,bSeat:this.selectedList.join(","),reserve:!0},function(e){var a=t.getCurrentCompanyBusHold();if(a)a.bSeat=a.bSeat.split(",").concat(t.selectedList).join(","),a.bHoldHours=t.temptoraryTime;else{var i={bAccount:"",companyName:t.getCompanyName(t.currentCompany),bCompanyId:t.currentCompany,bHoldHours:t.temptoraryTime,bSeat:t.selectedList.join(",")};t.carList[t.currentCar].busHolds.push(i)}t.carList[t.currentCar].holdList=t.carList[t.currentCar].holdList.concat(t.selectedList.join(",").split(",")),console.log(t.carList[t.currentCar]),t.selectedList=[]}):void this.$alert("请选择未预留和未锁定的车座","温馨提示",{type:"warning"})):void this.$alert("请输入预留时效","温馨提示",{type:"warning"})},getCompanyName:function(t){var e="某有匹配的单位";return this.companyList.forEach(function(a){a.id.toString==t.toString&&(e=a.cName)}),e},getCurrentCompanyBusHold:function(){var t=this,e=null;return this.carList[this.currentCar].busHolds.forEach(function(a){a.bCompanyId==t.currentCompany&&(e=a)}),e},releaseTemporary:function(){var t=this;return this.currentCar<0?void this.$alert("请选择车辆","温馨提示",{type:"warning"}):(this.selectedList=this.selectedList.filter(function(e){return-1==t.carList[t.currentCar].bSeatsLock.split(",").indexOf(e.toString())&&-1!=t.carList[t.currentCar].holdList.indexOf(e.toString())}),this.selectedList.length?void this.dealHttpReseponse(this.updateTemporarySeatInfoUrl,{bBusId:this.carList[this.currentCar].id,bSeat:this.selectedList.join(","),reserve:!1},function(e){t.carList[t.currentCar].busHolds.forEach(function(e){e.bSeat=e.bSeat.split(",").filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}).join(",")}),t.carList[t.currentCar].holdList=t.carList[t.currentCar].holdList.filter(function(e){return-1==t.selectedList.indexOf(parseInt(e))}),t.selectedList=[]}):void this.$alert("请选择已经预留的座位","温馨提示",{type:"warning"}))},carNumChange:function(t){console.log("pre"+t);var e=this.carList.length;if(t>e)for(var a=0;a<t-e;a++)this.carList.push({holdList:[],bSeatsLock:"",bSeatsNum:this.banqiForm.sCarSeats,busHolds:[]});else if(t<e)for(var i=0;i<e-t;i++)this.carList.pop();console.log("after"+this.carList.length)},seatChange:function(t){this.currentCar>-1?this.banqiForm.sCarSeats=t:this.$alert("请选择车辆","温馨提示",{type:"warning"})},addCar:function(){var t=this;this.canNotModifyCarNum=!0,this.dealHttpReseponse(this.addBusUrl,{bScheduleId:this.$route.query.banqi,bSeatsNum:this.banqiForm.sCarSeats,num:1},function(e){t.banqiForm.sCarNum+=1,t.carNumChange(t.banqiForm.sCarNum),t.canNotModifyCarNum=!1,t.defaultBusList()})},removeCar:function(){var t=this;this.canNotModifyCarNum=!0,this.$confirm("你确定要删除该内容？","友情提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(t.currentCar>-1){if(t.carList[t.currentCar].holdList.length)return t.$alert("当前车辆已经预留了座位，不能删除","温馨提示",{type:"warning"}),void(t.canNotModifyCarNum=!1);if(t.carList[t.currentCar].bSeatsLock.length)return t.$alert("当前车辆已经锁定了座位，不能删除","温馨提示",{type:"warning"}),void(t.canNotModifyCarNum=!1);t.dealHttpReseponse(t.removeBusUrl,{bScheduleId:t.$route.query.banqi,id:t.carList[t.currentCar].id},function(e){t.banqiForm.sCarNum=t.banqiForm.sCarNum-1,t.carList.splice(t.currentCar,1),t.currentCar=-1,t.canNotModifyCarNum=!1},"post",function(e){t.canNotModifyCarNum=!1})}else t.$alert("请选择车辆","温馨提示",{type:"warning"}),t.canNotModifyCarNum=!1}).catch(function(){})},onSubmit:function(t){var e=this;this.dealBanqiFormData()&&this.$refs[t].validate(function(t){t?(e.btnFlag=!0,e.$http.post(e.saveUrl,e.banqiForm).then(function(t){0==t.data.code?(e.$message.success("修改成功"),setTimeout(function(){e.btnFlag=!1,e.$router.push({name:"Schedule",query:{id:e.$route.query.id}})},1e3)):(e.btnFlag=!1,e.$alert(t.data.message))})):(e.btnFlag=!1,e.$message.error("提交失败"))})},dealBanqiFormData:function(){var t=this;if(this.banqiForm.calendars=[],this.calendars&&(this.banqiForm.calendars[0]=this.formatDate(this.calendars,"yyyy-MM-dd")),this.sLeaveTime&&(this.banqiForm.sLeaveTime=new Date(this.sLeaveTime)),new Date(this.banqiForm.calendars[0])<new Date(this.formatDate(new Date,"yyyy-MM-dd")))return this.$alert("出发时间不能早于今天","温馨提示",{type:"warning"}),!1;var e=[],a=!1;return this.$refs.multipleTable.selection.forEach(function(i){(!i.tMarketPrice||i.tMarketPrice<=0)&&(t.$alert("门市价不能为空且非负","温馨提示",{type:"warning"}),a=!0),i.tPeerPrice=i.tMarketPrice,i.chosen=1,e.push({id:i.id,tMarketPrice:i.tMarketPrice,tPeerPrice:i.tPeerPrice,tStock:i.tStock,choose:1})}),!a&&(e.length<=0?(this.$alert("请选择车票","温馨提示",{type:"warning"}),!1):((this.banqiForm.ticketsChanged=this.isTicketInfoChanged(e))&&(this.banqiForm.tickets=e),!0))},isTicketInfoChanged:function(t){if(t.length!=this.oldTickedList.length)return!0;t.sort(this.sortBy),this.oldTickedList.sort(this.sortBy);for(var e=0;e<t.length;e++)if(t[e].id!=this.oldTickedList[e].id||t[e].tMarketPrice!=this.oldTickedList[e].tMarketPrice||t[e].tPeerPrice!=this.oldTickedList[e].tPeerPrice||t[e].tStock!=this.oldTickedList[e].tStock||t[e].chosen!=this.oldTickedList[e].chosen)return!0;return!1},sortBy:function(t,e){return t.id-e.id},formatDate:function(t,e){if(t instanceof Date){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e}throw new Error("日期格式转换发现错误的参数类型")},calendarsChange:function(t){this.week=t?new Date(t).getDay():null},goback:function(t){var e=this;this.$confirm("数据未保存，确定返回吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:"Schedule",query:{id:e.$route.query.id}})}).catch(function(){})},getLimitType:function(t){return t?this.ticketLimitType[t]:"无限制"},getEffctiveDay:function(t){var e=this,a="";return t.toString().split("").forEach(function(t,i){parseInt(t)&&(a+=e.simpleWeekDay[i])}),a},setSeat:function(t){var e=this.selectedList.indexOf(t);-1==e?this.selectedList.push(t):this.selectedList.splice(e,1)},handleCurrentChange:function(t){this.currentCar=this.carList.indexOf(t),this.currentCarSeatNum=this.carList[this.currentCar].bSeatsNum,this.selectedList=[]},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t},searchCompany:function(t){this.defaultCompanyList(t)},defaultCompanyList:function(t){var e=this;this.loading=!0;var a={pageIndex:1};t&&(a.fastSearchStr=t),this.$http.post(api_prefix+"/Company/index",a,{emulateJSON:!0}).then(function(t){var a=t.body;"0"==a.code?e.companyList=a.body.list:e.$alert(a.message),e.loading=!1},function(t){e.loading=!1,e.$alert("网络错误")})},dealHttpReseponse:function(t,e,a,i,s){var n=this;i||(i="post"),this.$http[i](t,e).then(function(t){0==t.body.code?a&&a(t):(n.$alert(t.body.message,"温馨提示","error"),s&&s(t))},function(t){s&&s(t),n.$alert("网络错误","温馨提示","error")})},defaultBanqiForm:function(){var t=this;this.dealHttpReseponse(this.getScheduleUrl,null,function(e){var a=e.body.body;a.sCalendar&&(t.calendars=new Date(a.sCalendar)),a.sLeaveTime&&(t.sLeaveTime=a.sLeaveTime),t.ticketList=a.tickets,t.oldTickedList=[],setTimeout(function(){t.ticketList.forEach(function(e){e.tCategory=t.filterCategory(e.tCategory),e.chosen&&(t.oldTickedList.push(JSON.parse(r()(e))),t.$refs.multipleTable.toggleRowSelection(e))})},200),s()(t.banqiForm,a)},"get")},getCategory:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},filterCategory:function(t){var e=[];return""==t?t="---":e=this.baseCategory.filter(function(e){return t==e.id}),0!=e.length?e[0].name:t},defaultBusList:function(){var t=this;this.dealHttpReseponse(this.selectBusUrl,{bScheduleId:this.$route.query.banqi},function(e){var a=e.body.body;a.map(function(t){t.holdList=[],t.bSeatsLock||(t.bSeatsLock=""),t.busHolds.forEach(function(e){e.bSeat&&e.bSeat.length&&(t.holdList=t.holdList.concat(e.bSeat.split(",")))})}),t.carList=a})}},mounted:function(){this.getCategory(),this.currentCompany="",this.companyList=[],this.defaultCompanyList(),this.$route.query.banqi&&(this.defaultBanqiForm(),this.defaultBusList())}}},639:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(13),s=a.n(i);e.default={name:"roleManager",data:function(){return{currentPage:1,pageSizeAll:20,tableDataTotal:0,tickForm:{currPage:1,pageSize:20,fastSearchStr:"",type:null,statusList:[0,2],companyId:null,departmentId:null},jdytabActive:null,searchValue:"",tableData:[],publicId:"",accesstoken:"",time:"",demandDetail:null}},mounted:function(){this.getTableData()},methods:{getTableData:function(){var t=this;this.$http.get(api_prefix+"require/historyDesignRequireList/"+this.$route.query.id).then(function(e){if(200==e.data.code){t.tableData=e.data.data;for(var a=0;a<t.tableData.length;a++)if(1==t.tableData[a].type){t.getDemandDetail(t.tableData[a].id);break}}},function(t){console.log("出错了")})},handleCurrentChange:function(t){this.tickForm.currPage=t,this.currentPage=t,this.getTableData()},handleRowChange:function(){},getDetail:function(t,e){if(t)this.getDemandDetail(e);else{var a="";a="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",window.open(a+"/wap/m/made_plan.html?id="+e)}},getDemandDetail:function(t){var e=this,a={edit:0,requireId:t};this.$http.post(api_prefix+"require/queryRequireDetail",a).then(function(t){if(200==t.body.code){var a=t.body.body;e.demandDetail=JSON.parse(s()(a))}else e.$message.error(t.body.message)})},goback:function(){window.history.go(-1)}}}},640:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(4),r=a.n(n),l=a(14),o=a.n(l);e.default={name:"orderbuyer",data:function(){return{btnFlag:!1,searchType:0,ruleform:{clientType:1,status:null,currPage:1,pageSize:15,type:9,searchKey:"",companyId:null},datePicker:[(new Date).setTime((new Date).getTime()-2592e6),new Date],tableData:[],jdytabActive:null,isReturn:!1,orderChangeType:[],orderTotal:{statuses_0:0,statuses_1:0,statuses_2:0,statuses_3:0,statuses_4:0},currentPage:1,pageSize:15,tableDataTotal:0,fullscreenLoading:!1,loading:!1,logindata:{},rowData:null,priceChangeObj:{flag:!1,radio:null,money:null,promotion:null,remark:""},offlinePayObj:{flag:!1,opPayTime:null,opComments:""},cancelOrderObj:{flag:!1,money:null,reason:null},downloadUrl:"",module:"Require",journalTotal:0,journalCurrentData:[],logId:"",focusPriceId:"",alertJournalFlag:!1,alertFlag:!1,userInfo:null,BuyerCompanyIdArr:[],alertproFlag:!1,proId:"",productId:"",selectList:[],h5Url:""}},mounted:function(){this.logindata=JSON.parse(sessionStorage.loginData),this.ruleform.companyId=this.logindata.uCompanyId,3==this.logindata.uDataLimit&&this.getBuyerCompanyId(),this.getTableData()},methods:{gotoH5:function(t){var e="";e="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",this.h5Url=e+"/wap/m/detail.html?p_id="+t+"&from=preview",console.log(this.h5Url,"this.h5Url")},getTableData:function(){var t=this,e=JSON.parse(s()(this.ruleform));e.type=9==e.type?"":e.type,this.$http.post(api_prefix+"require/queryRequireList",e).then(function(e){if(200==e.body.code){var a=e.body.data;t.tableData=a.list,t.tableDataTotal=a.total}})},jdytab:function(t){this.ruleform.status=null==t?"":t,this.jdytabActive=t,this.getTableData()},updateStatus:function(t){var e=this,a={currPage:1,dStatus:2,id:t,pageSize:20};this.$http.post(api_prefix+"require/status/update",a).then(function(t){0==t.body.code?e.$message.info("应单成功！"):e.$message.error("应单失败！"),e.getTableData()})},goDetail:function(t){this.$router.push({name:"selfline",query:{designId:t.dId,rId:t.id,id:t.projectId,status:t.dStatus}})},goH5:function(t){var e="";e="b2b.fingercrm.cn"==location.host?"http://b2b.fingercrm.cn":"http://b2b.test.fingercrm.cn",window.open(e+"/wap/m/made_plan.html?id="+t.projectId)},refresh:function(){var t=this;this.ruleform={clientType:1,status:null,currPage:1,pageSize:15,type:9,searchKey:""},this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.currentPage=1,t.getTableData()},1e3)},handleCurrentChange:function(t){t&&(this.ruleform.currPage=t,this.getTableData())},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleRowChange:function(t){console.log("行点击事件",t),this.logId=t.id,this.getLogData(1)},getSaleManage:function(t){var e=this;this.$http.get(api_prefix+"user/get/"+t).then(function(t){0==t.data.code&&(e.userInfo=t.data.body,e.alertFlag=!0,e.$nextTick(function(){jdyFn.setAlertStyle("showtfcity")}))},function(t){console.log("出错了")})},goPro:function(e){this.proId=e,this.alertproFlag=!this.alertproFlag,this.alertproFlag?this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity")}):t(".alertbgg").hide()},searchProduct:function(t){var e=this;this.$http.post(api_prefix+"require/searchProduct",{searchParam:t}).then(function(t){0==t.data.code&&(e.selectList=t.data.body)},function(t){console.log("出错了")})},savePro:function(){var e=this;this.btnFlag=!0,this.$http.post(api_prefix+"require/saveDesignProduct",{designId:this.proId,productId:this.productId}).then(function(a){0==a.data.code&&(e.btnFlag=!1,e.$message.success("保存成功！"),setTimeout(function(){e.alertproFlag=!1,t(".alertbgg").hide(),e.getTableData()},500))},function(t){e.btnFlag=!1,console.log("出错了")})},closeAlert:function(){this.alertFlag=!1},getBuyerCompanyId:function(e){var a=this;this.$http.post(api_prefix+"Company/index",{pid:0,searchType:1,pageIndex:1,fastSearchStr:t.trim(e)},{emulateJSON:!0}).then(function(t){0==t.body.code&&(a.BuyerCompanyIdArr=t.body.body.list)})},alertJournal:function(t){if(!this.logId)return void this.$alert("请选择一个需求单");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.logId).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})}},filters:{filterStatus:function(t){switch(t){case 1:return"待受理";case 2:return"定制中";case 3:return"已反馈";case 4:return"已确认"}},degreeFormat:function(t){return t},sexName:function(t){return t?"女":"男"},chargePersonType:function(t){var e=(Number(t),"");return 0===t?e="":1===t?e="负责人+部门领导":2===t?e="法人":3===t?e="法人+部门领导":4===t?e="部门领导":5===t&&(e="法人+负责人+部门领导"),e}},components:{jdyAlert:r.a,jdyLog:o.a}}}.call(e,a(2))},641:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(62),s=a.n(i),n=a(148),r=a.n(n),l=a(122),o=a.n(l);e.default={name:"line",data:function(){return{btnFlag:!1,lineForm:{designId:this.$route.query.designId,dpCoreScenic:null,dpLineName:null,dpMinClusteringNum:null,dpOrderAmount:null,dpStandardAccommodation:null,operationType:0,rId:this.$route.query.rId,id:this.$route.query.id},rules:{dpLineNo:[{required:!0,message:"请输入产品编号",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字",trigger:"blur"}],dpLineName:[{required:!0,message:"请输入产品名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字",trigger:"blur"}],dpSubheading:[{min:1,max:20,message:"长度在 1 到 20 个字",trigger:"blur"}],dpLineType:[{required:!0,message:"请选择线路类型",trigger:"change",type:"number"}],dpType:[{required:!0,message:"请选择产品业务分类",trigger:"change",type:"number"}],dpBrand:[{type:"number",required:!0,message:"请输入品牌",trigger:"change"}],dpPageUrl:[{required:!0,message:"请上传封面",trigger:"change"}]}}},methods:{editorUpdate:function(t,e){this.lineForm[e]=t},getSelfLineDetail:function(){var t=this;this.btnFlag=!0,this.$http.post(api_prefix+"require/queryProjectDetail",{projectId:this.$route.query.id,edit:!0}).then(function(e){200==e.body.code?(t.btnFlag=!1,t.lineForm.dpCoreScenic=e.body.body.dpCoreScenic,t.lineForm.dpLineName=e.body.body.dpLineName,t.lineForm.dpMinClusteringNum=e.body.body.dpMinClusteringNum,t.lineForm.dpOrderAmount=e.body.body.dpOrderAmount,t.lineForm.dpStandardAccommodation=e.body.body.dpStandardAccommodation):(t.btnFlag=!1,t.defalutErrorMessage(e.body.message))},function(e){t.defalutErrorMessage()})},onSave:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return a.$message.error("保存失败"),!1;a.lineForm.operationType=0,console.log("保存",a.lineForm),a.lineForm.dpLineName&&(a.lineForm.dpLineName=t.trim(a.lineForm.dpLineName)),a.btnFlag=!0,a.pid&&(a.lineForm.id=a.pid),a.$http.post(api_prefix+"/require/project/save",a.lineForm).then(function(t){0==t.body.code?(a.btnFlag=!1,console.log(t.body.id[0],"ooooo"),a.pid=t.body.id[0],console.log(a.pid,"pid"),a.$message.success("保存到草稿箱成功")):(a.btnFlag=!1,a.defalutErrorMessage(t.body.message))},function(t){a.defalutErrorMessage()})})},onSubmit:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return a.$message.error("保存失败"),!1;a.lineForm.operationType=1,console.log("提交",a.lineForm),a.lineForm.dpLineName&&(a.lineForm.dpLineName=t.trim(a.lineForm.dpLineName)),a.btnFlag=!0,a.pid&&(a.lineForm.id=a.pid),a.$http.post(api_prefix+"/require/project/save",a.lineForm).then(function(t){0==t.body.code?(a.btnFlag=!1,a.$message.success("提交成功"),setTimeout(function(){a.$router.push({name:"selfTravelList"})},200)):(a.btnFlag=!1,a.defalutErrorMessage(t.body.message))},function(t){a.defalutErrorMessage()})})},goback:function(){this.$router.push({name:"selfTravelList"})},defalutErrorMessage:function(t){t?this.$alert(t,"温馨提示",{type:"error"}):this.$alert("网络出错了~","温馨提示",{type:"error"})}},components:{ElInputNumber:o.a,ElFormItem:r.a,jdyEditor:s.a},mounted:function(){console.log("登录",JSON.parse(sessionStorage.loginData)),this.$route.query.id&&this.getSelfLineDetail()}}}.call(e,a(2))},642:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(102),r=a.n(n),l=a(62),o=a.n(l),c=a(4),u=a.n(c);e.default={name:"trip",components:{jdyCalendar:r.a,jdyEditor:o.a,jdyAlert:u.a},data:function(){return{btnFlag:!1,focusStatus:!1,tripObj:{tFromTo:"",tMeals:"",tMealsRemark:null,phHotelIds:[],haveMeals:[],tHotelRemark:null,tSimpleTrip:null,"tDetailTrip ":null,dialogImageUrl:null,dialogVisible:!1,vehicle:null,phScenicIds:[],attachs:[]},msg:"trip",easyTripValue:"",action:"common/file/upload",picArry:[],picNameArry:[],uploadImages:[],showPicHover:!1,isSearch:!1,ruleForm:{tProductId:this.$route.query.id,tType:0,puserId:1,pDays:1,trips:[{haveMeals:[],tFromTo:"",tMeals:"",tMealsRemark:"",phHotelIds:[],tHotelRemark:"",tSimpleTrip:"",tDetailTrip:"",dialogImageUrl:"",dialogVisible:!0,vehicle:"",phScenicIds:[],attachs:[],hotel:[]}]},scienspotFlag:!1,rules:{},accommodationOption:[],dialogImageUrl:"",dialogVisible:!1,viewData:[],picData:[],photoListData:[],picListData:[],alertTagFlag:!1,alertIndex:0,currentPage:1,tableDataTotal:0,pageSizeAll:20,addTagStyle:{sort:"景点",pAlbumId:"",picName:"",picList:[]},sortData:[{value:"酒店",label:"酒店"},{value:"景点",label:"景点"}],forceUpdateViewArray:[1],isUpdate:!1,flag:!1,isAdd:"",getPic:"",newId:"",oldId:"",pAlbumIdPage:""}},mounted:function(){var t=this;this.newId=this.$route.query.id,console.log(this.newId,"this.newId"),this.oldId=this.$route.query.copyId,console.log(this.oldId,"this.oldId"),this.$nextTick(function(){t.$http.post(api_prefix+"/album/list",{aType:1}).then(function(e){if(0==e.data.code){var a=e.data.body;t.picData=a.resultList,t.pType=1,console.log(t.picData)}else t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")}),t.$route.query.copyId?t.$http.post(api_prefix+"/trip/list",{tProductId:t.oldId,tType:0}).then(function(e){0==e.data.code?e.data.body.trips.length>0?(t.isAdd=!0,console.log("fuzhi"),console.log(t.ruleForm.trips.length,"this.ruleForm.trips.length"),console.log(t.ruleForm.trips,"this.ruleForm.trips"),t.ruleForm=e.data.body,t.ruleForm.pDays=t.ruleForm.trips.length,t.ruleForm.tType=0,t.ruleForm.tProductId=t.$route.query.id,t.ruleForm.puserId=1,t.ruleForm.trips.length>0&&t.rebuildFormData(t.ruleForm.trips)):(t.isAdd=!0,console.log("fuzhi"),t.ruleForm.pDays=1):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}),t.flag=!0},function(t){console.log("出错了")}):t.$http.post(api_prefix+"/trip/list",{tProductId:t.newId,tType:0}).then(function(e){0==e.data.code?e.data.body.trips.length>0?(t.isAdd=!1,console.log("bianji"),console.log(t.ruleForm.trips.length,"this.ruleForm.trips.length"),console.log(t.ruleForm.trips,"this.ruleForm.trips"),t.ruleForm=e.data.body,t.ruleForm.pDays=t.ruleForm.trips.length,t.ruleForm.tType=0,t.ruleForm.tProductId=t.$route.query.id,t.ruleForm.puserId=1,t.ruleForm.trips.length>0&&t.rebuildFormData(t.ruleForm.trips)):(t.isAdd=!0,console.log("xinzeng"),t.ruleForm.pDays=1):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}),t.flag=!0},function(t){console.log("出错了")})})},computed:{imgUploadPath:function(){return api_prefix+this.action}},updated:function(){t(".jl-upLoadPic").mouseenter(function(){t(this).find(".jl-upLoadPicHover").css("display","inline-block")}),t(".jl-upLoadPic").mouseleave(function(){t(this).find(".jl-upLoadPicHover").css("display","none")})},methods:{getIndex:function(t){this.alertIndex=t,console.log(this.alertIndex)},rebuildScienspot:function(t){t.phScenicIds=[];for(var e in t.scenicspot){t.scenicspot[e].id,t.scenicspot[e].sName;t.phScenicIds.push(t.scenicspot[e].id)}},rebuildHotel:function(t){t.phHotelIds=[];for(var e in t.hotel){t.hotel[e].id,t.hotel[e].hName;t.phHotelIds.push(t.hotel[e].id)}},rebuildMeals:function(t){var e=t.tMeals;return"111"==e?void(t.haveMeals=["早餐","午餐","晚餐"]):"110"==e?void(t.haveMeals=["早餐","午餐"]):"011"==e?void(t.haveMeals=["晚餐","午餐"]):"101"==e?void(t.haveMeals=["早餐","晚餐"]):"001"==e?void(t.haveMeals=["晚餐"]):"100"==e?void(t.haveMeals=["早餐"]):"010"==e?void(t.haveMeals=["午餐"]):"000"==e||""==e?void(t.haveMeals=[]):void 0},rebuildFormData:function(t){for(var e in t)this.rebuildMeals(t[e]);console.log("trips",t),console.log("this",this)},setVehicle:function(e,a){t("#focusInput"+e).focus(),console.log(this.ruleForm.trips[this.alertIndex].tFromTo,"bbbbb");var i=this.ruleForm.trips[this.alertIndex].tFromTo;switch(a){case 1:i+="[邮轮]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 2:i+="[飞机]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 3:i+="[火车]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 4:i+="[巴士]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 5:i+="[汽车]",this.ruleForm.trips[this.alertIndex].tFromTo=i}console.log(this.ruleForm.trips[this.alertIndex].tFromTo,"hhhhhhh")},queryHotelList:function(t){this.$http.post(api_prefix+"hotel/list",{companyId:123,currPage:1,hName:null,pageSize:15,startNum:0}).then(function(t){},function(t){console.log("出错了")})},getChangeEating:function(t){var e=this.ruleForm.trips[t].haveMeals;console.log(this.ruleForm.trips[t].haveMeals,"1");var a=e.toString();3==e.length&&(this.ruleForm.trips[t].tMeals="111"),2==e.length&&(a.indexOf("早餐")>-1&&a.indexOf("午餐")>-1&&(this.ruleForm.trips[t].tMeals="110"),a.indexOf("早餐")>-1&&a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="101"),a.indexOf("午餐")>-1&&a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="011")),1==e.length&&(a.indexOf("早餐")>-1&&(this.ruleForm.trips[t].tMeals="100"),a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="001"),a.indexOf("午餐")>-1&&(this.ruleForm.trips[t].tMeals="010")),0==e.length&&(this.ruleForm.trips[t].tMeals="000"),console.log(this.ruleForm.trips[t].tMeals,"2")},getEatRemark:function(t){this.eatRemark=t,console.log(this.eatRemark,"this.eatRemark")},pushHotelIds:function(t){console.log(t)},getRoomRemark:function(t){this.roomRemark=t,console.log(this.roomRemark,"this.roomRemark")},getEasyTrip:function(t){this.easyTripValue=t,console.log(this.easyTripValue,"this.easyTripValue")},getChangeAddress:function(t){this.addressValue=t,console.log(this.addressValue,"this.addressValue")},pushScenicIds:function(t){console.log(t,"景点ID")},getChangeView:function(t){var e=this;this.$http.post(api_prefix+"/scenic_spot/list",{sName:t,sPym:t}).then(function(t){if(0==t.data.code){var a=t.data.body;if(a.list){console.log(e.ruleForm.trips[e.alertIndex],"11111"),e.ruleForm.trips[e.alertIndex].scenicspot=a.list;var i=e.ruleForm.trips[e.alertIndex];e.$set(e.ruleForm.trips,e.alertIndex,i)}}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangeLive:function(t){var e=this;console.log(t),this.$http.post(api_prefix+"/hotel/list",{hName:t,hPym:t}).then(function(t){if(0==t.data.code){var a=t.data.body;if(a.list){console.log(e.ruleForm.trips[e.alertIndex],"11111"),e.ruleForm.trips[e.alertIndex].hotel=a.list;var i=e.ruleForm.trips[e.alertIndex];e.$set(e.ruleForm.trips,e.alertIndex,i)}console.log(e.ruleForm.trips[e.alertIndex].hotel,"2123421")}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},UniteBtn:function(t,e,a){console.log(t,"zzzzs"),console.log(e,"cccccc"),console.log(this.ruleForm.trips,"sssss");for(var i in this.ruleForm.trips)console.log(this.ruleForm.trips[i],"ooo"),this.ruleForm.trips[i].phHotelIds=t,this.ruleForm.trips[i].hotel=e,this.ruleForm.trips[i].tHotelRemark=a,console.log("rrrrr",this.ruleForm.trips[i].phHotelIds),console.log("bbbbbbb",this.ruleForm.trips[i].hotel)},alertTag:function(t){this.getPic="",this.photoListData=[],this.alertIndex=t,console.log(this.alertIndex,"alertIndex`1"),this.alertTagFlag=!this.alertTagFlag,this.alertTageFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertTag")}),0==this.alertTagFlag&&(this.addTagStyle.picName="",this.addTagStyle.pAlbumId="",this.tableDataTotal=0),this.getPic=this.ruleForm.trips[this.alertIndex].phScenicIds[0],void 0==this.getPic&&(this.getPic=""),console.log(this.getPic,"this.alertIndex",this.alertIndex),this.getPic&&this.getPicList(this.getPic)},getChangeSort:function(t){var e=this;console.log(t),"景点"==t?this.$http.post(api_prefix+"/album/list",{aType:1}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,e.pType=1,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")}):this.$http.post(api_prefix+"/album/list",{aType:0}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,e.pType=0,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangeaName:function(t){var e=this;console.log(t),this.$http.post(api_prefix+"/album/list",{aType:this.pType,aName:t}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getPicList:function(t){var e=this;console.log(t,"相册ID"),this.pAlbumIdPage=t,this.$http.post(api_prefix+"/attach/list",{pAlbumId:t,pageSize:15,currPage:this.currentPage}).then(function(t){if(0==t.data.code){var a=t.data.body;e.photoListData=a.resultList,e.tableDataTotal=a.totalNum,console.log(e.photoListData,"photoListData1")}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getPicName:function(t){console.log(t),this.picName=t},getSearchPicList:function(){var t=this;this.isSearch=!0,this.$http.post(api_prefix+"/attach/list",{pRealName:this.picName,pageSize:15,currPage:this.currentPage}).then(function(e){if(t.currentPage,0==e.data.code){var a=e.data.body;t.photoListData=a.resultList,t.tableDataTotal=a.totalNum,console.log(t.photoListData,"photoListData2")}else t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangePicList:function(e,a,i){if(console.log("选中了",e,a),t(".picIndex"+i).is(":checked")){t(".picIndex"+i).removeAttr("checked");var s=t.inArray(a,this.picNameArry);i>=0&&(this.picNameArry.splice(s,1),console.log(this.picNameArry))}else t(".picIndex"+i).attr("checked",!0),this.picNameArry.push(a),console.log(this.picNameArry)},saveToTrip:function(){console.log(this.alertIndex,"(this.alertIndex2"),console.log(this.picNameArry.length,"picNameArry.length"),console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),console.log(this.ruleForm.trips[this.alertIndex].attachs.length+this.picNameArry.length,"yiqi.length"),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length>4&&this.$message.error("最多只能上传四张图片!"),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length==4&&(Array.prototype.push.apply(this.ruleForm.trips[this.alertIndex].attachs,this.picNameArry),console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库1"),this.picNameArry=[],console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),this.alertTagFlag=!1),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length<4&&(Array.prototype.push.apply(this.ruleForm.trips[this.alertIndex].attachs,this.picNameArry),console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库1"),this.picNameArry=[],console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),this.alertTagFlag=!1)},setDays:function(t){var e=this.ruleForm.pDays,a=s()(this.tripObj);if(this.ruleForm.trips.length>t){console.log(this.ruleForm.trips.length,"this.ruleForm.trips.length");for(var i=this.ruleForm.trips.length;i>t;i--)this.ruleForm.trips.pop()}else for(var n=this.ruleForm.trips.length;n<t;n++)this.ruleForm.trips.push(JSON.parse(a));console.log(this.ruleForm.trips),console.log(e)},editorUpdate:function(t,e,a){console.log(a,"sadsad"),console.log(t,"value"),this.ruleForm.trips[a].tDetailTrip=t,console.log(this.ruleForm.trips)},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.picNameArry.push(t),this.dialogVisible=!0},getTripList:function(){var t=this;this.$http.post(api_prefix+"/trip/list",{tProductId:this.newId,tType:0}).then(function(e){0==e.data.code?e.data.body.trips.length>0?(t.isAdd=!1,console.log("bianji"),console.log(t.ruleForm.trips.length,"this.ruleForm.trips.length"),console.log(t.ruleForm.trips,"this.ruleForm.trips"),t.ruleForm=e.data.body,t.ruleForm.pDays=t.ruleForm.trips.length,t.ruleForm.tType=0,t.ruleForm.tProductId=t.$route.query.id,t.ruleForm.puserId=1,t.ruleForm.trips.length>0&&t.rebuildFormData(t.ruleForm.trips)):(t.isAdd=!0,console.log("xinzeng"),t.ruleForm.pDays=1):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}),t.flag=!0},function(t){console.log("出错了")})},onSubmitGo:function(){var t=this;1==this.isAdd?(console.log("下一步 保存"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/save",this.ruleForm).then(function(e){0==e.data.code?(t.$message({type:"success",message:"保存成功!"}),setTimeout(function(){t.btnFlag=!1,t.$router.push({name:"Ticketprice",query:{id:t.$route.query.id}})},500)):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")})):0==this.isAdd&&(console.log("下一步 更新"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/update",this.ruleForm).then(function(e){0==e.data.code?(t.$message({type:"success",message:"保存成功!"}),setTimeout(function(){t.btnFlag=!1,t.$router.push({name:"Ticketprice",query:{id:t.$route.query.id}})},500)):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")}))},goback:function(t){var e=this;"List"==t?(console.log("gotoList"),this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t})}).catch(function(){})):this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t,query:{id:e.$route.query.id}})}).catch(function(){})},onSubmit:function(){var t=this;0==this.isAdd?(console.log("更新"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/update",this.ruleForm).then(function(e){0==e.data.code?(t.btnFlag=!1,t.$message({type:"success",message:"保存成功!"}),t.getTripList()):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")})):(console.log("保存"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/save",this.ruleForm).then(function(e){0==e.data.code?(t.btnFlag=!1,t.$message({type:"success",message:"保存成功!"}),t.getTripList()):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")}))},getTheIndex:function(t){this.alertIndex=t,console.log(this.alertIndex,"ceshi")},changecover:function(t){var e=event.currentTarget.files||event.dataTransfer.files;if(e.length){if(console.log(e.length,"files.length"),console.log(t,"$event"),e.length+this.ruleForm.trips[this.alertIndex].attachs.length>4)return void console.log(e.length+this.ruleForm.trips[this.alertIndex].attachs.length,"files.length + this.picNameArry.length");e.length+this.ruleForm.trips[this.alertIndex].attachs.length==4&&console.log(e.length+this.ruleForm.trips[this.alertIndex].attachs.length,"files.length + this.picNameArry.length");var a=e[0].size/1024,i=e[0].type.startsWith("image/");console.log(a,"fileSize");for(var s=0;s<e.length;s++)i?a>5120?this.$alert("图片大小不能超过5M！","温馨提示",{confirmButtonText:"确定",callback:function(t){}}):this.createImage(e[s]):this.$alert("请选择图片上传！","温馨提示",{confirmButtonText:"确定",callback:function(t){}});event.currentTarget.value=""}},createImage:function(t){var e=this,a=new FormData;a.append("fileType","jpg"),a.append("file",t),this.$http.post(api_prefix+"/common/file/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t);var a=t.body.body.key;e.ruleForm.trips[e.alertIndex].attachs.push(a),console.log(e.ruleForm.trips[e.alertIndex].attachs,"图库2","this.alertIndex",e.alertIndex),console.log(e.alertIndex,"zuizhong")})},delImage:function(t,e){console.log(t,"dele index"),console.log(e,"alertindex index"),console.log("deleta index",this.alertIndex),this.alertIndex=e,this.ruleForm.trips[this.alertIndex].attachs.length>0&&this.ruleForm.trips[this.alertIndex].attachs.splice(t,1),this.ruleForm.trips[this.alertIndex].attachs.length,this.ruleForm.trips[this.alertIndex].attachs.length,this.ruleForm.trips[this.alertIndex].attachs.length,console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库3")},handleCurrentChange:function(t){if(t){this.isSearch?(console.log(1),this.getSearchPicList()):(console.log(2),this.getPicList(this.pAlbumIdPage)),this.currentPage=t}}}}}.call(e,a(2))},643:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(69),r=a.n(n),l=a(62),o=a.n(l),c=a(4),u=a.n(c);e.default={name:"supplement",data:function(){return{tripObj:{tFromTo:null,tMeals:"",tMealsRemark:null,phHotelIds:[],tHotelRemark:null,tSimpleTrip:null,"tDetailTrip ":null,dialogImageUrl:null,dialogVisible:!1,vehicle:null,phScenicIds:[],attachs:[],haveMeals:[]},msg:"trip",easyTripValue:"",action:"common/file/upload",picArry:[],picNameArry:[],showPlus:[!0],uploadImages:[],showPicHover:!1,isSearch:!1,dateRange:[],ruleForm:{tTitle:"",tProductId:this.$route.query.id,tType:1,puserId:1,pDays:this.$route.query.pDays,tcEndDay:null,tcStartDay:null,trips:[{tTitle:"",tFromTo:"",tMeals:"",tMealsRemark:"",phHotelIds:[],tHotelRemark:"",tSimpleTrip:"",tDetailTrip:"",dialogImageUrl:"",dialogVisible:!0,vehicle:"",phScenicIds:[],attachs:[],hotel:[],haveMeals:[]}]},scienspotFlag:!1,rules:{},accommodationOption:[],dialogImageUrl:"",dialogVisible:!1,viewData:[],picData:[],photoListData:[],picListData:[],alertTagFlag:!1,alertIndex:null,currentPage:1,tableDataTotal:0,pageSizeAll:20,addTagStyle:{sort:"景点",pAlbumId:"",picName:"",picList:[]},sortData:[{value:"酒店",label:"酒店"},{value:"景点",label:"景点"}],forceUpdateViewArray:[1],isUpdate:!1,flag:!1,row:[],pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},isAdd:this.$route.query.isAdd,pAlbumIdPage:""}},updated:function(){t(".jl-upLoadPic").mouseenter(function(){console.log("1"),t(this).find(".jl-upLoadPicHover").css("display","inline-block")}),t(".jl-upLoadPic").mouseleave(function(){console.log("1"),t(this).find(".jl-upLoadPicHover").css("display","none")})},mounted:function(){var t=this;console.log(this.$route.query.tcStartDay,"this.$route.query.tcStartDay"),console.log(this.$route.query.tcEndDay,"this.$route.query.tcEndDay"),this.setDays(),this.$nextTick(function(){t.ruleForm.pDays=parseInt(t.$route.query.pDays),t.$http.post(api_prefix+"/album/list",{aType:1}).then(function(e){if(0==e.data.code){var a=e.data.body;t.picData=a.resultList,t.pType=1,console.log(t.picData)}else t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")}),0==t.$route.query.isAdd?t.$http.post(api_prefix+"/trip/list",{tProductId:t.$route.query.id,tType:1,tcEndDay:t.$route.query.tcEndDay.replace(/-/g,""),tcStartDay:t.$route.query.tcStartDay.replace(/-/g,"")}).then(function(e){0==e.data.code?(t.ruleForm=e.data.body,t.dateRange=[new Date(t.$route.query.tcStartDay),new Date(t.$route.query.tcEndDay)],t.ruleForm.pDays=t.$route.query.pDays,t.ruleForm.tType=1,t.ruleForm.tProductId=t.$route.query.id,t.ruleForm.puserId=1,console.log(t.dateRange,"pppppp"),t.ruleForm.trips.length>0&&t.rebuildFormData(t.ruleForm.trips)):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}),t.flag=!0},function(t){console.log("出错了")}):t.flag=!0}),this.ruleForm=r()({},this.ruleForm)},methods:{toLineInfo:function(){if(this.dateRange.length<2||this.isAdd)return void this.$message.error("请先完善行程信息~");var t=r()(this.$route.query,{tcStartDay:window.FormatDate(this.dateRange[0],"yyyy-MM-dd"),tcEndDay:window.FormatDate(this.dateRange[1],"yyyy-MM-dd")},{isAdd:this.isAdd});this.$router.push({name:"SupplementLine",query:t})},datetimerange:function(t){console.log(t,"时间范围");var e=t.replace(/-/g,"").replace(/\s+/g,"");this.ruleForm.tcStartDay=e.substring(0,8),this.ruleForm.tcEndDay=e.substring(8),console.log(this.ruleForm.tcStartDay,"this.ruleForm.tcStartDay"),console.log(this.ruleForm.tcEndDay,"this.ruleForm.tcEndDay")},getIndex:function(t){this.alertIndex=t,console.log(this.alertIndex)},rebuildScienspot:function(t){t.phScenicIds=[];for(var e in t.scenicspot){t.scenicspot[e].id,t.scenicspot[e].sName;t.phScenicIds.push(t.scenicspot[e].id)}},rebuildHotel:function(t){t.phHotelIds=[];for(var e in t.hotel){t.hotel[e].id,t.hotel[e].hName;t.phHotelIds.push(t.hotel[e].id)}},rebuildMeals:function(t){var e=t.tMeals;return"111"==e?void(t.haveMeals=["早餐","午餐","晚餐"]):"110"==e?void(t.haveMeals=["早餐","午餐"]):"011"==e?void(t.haveMeals=["晚餐","午餐"]):"101"==e?void(t.haveMeals=["早餐","晚餐"]):"001"==e?void(t.haveMeals=["晚餐"]):"100"==e?void(t.haveMeals=["早餐"]):"010"==e?void(t.haveMeals=["午餐"]):"000"==e||""==e?void(t.haveMeals=[]):void 0},rebuildFormData:function(t){for(var e in t)this.rebuildMeals(t[e]);console.log("trips",t),console.log("this",this)},setVehicle:function(e,a){t("#focusInput"+e).focus(),console.log(this.ruleForm.trips[this.alertIndex].tFromTo,"bbbbb");var i=this.ruleForm.trips[this.alertIndex].tFromTo;switch(a){case 1:i+="[邮轮]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 2:i+="[飞机]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 3:i+="[火车]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 4:i+="[巴士]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 5:i+="[汽车]",this.ruleForm.trips[this.alertIndex].tFromTo=i}console.log(this.ruleForm.trips[this.alertIndex].tFromTo,"hhhhhhh")},queryHotelList:function(t){this.$http.post(api_prefix+"hotel/list",{companyId:123,currPage:1,hName:null,pageSize:15,startNum:0}).then(function(t){},function(t){console.log("出错了")})},getChangeEating:function(t){var e=this.ruleForm.trips[t].haveMeals;console.log(this.ruleForm.trips[t].haveMeals,"1");var a=e.toString();3==e.length&&(this.ruleForm.trips[t].tMeals="111"),2==e.length&&(a.indexOf("早餐")>-1&&a.indexOf("午餐")>-1&&(this.ruleForm.trips[t].tMeals="110"),a.indexOf("早餐")>-1&&a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="101"),a.indexOf("午餐")>-1&&a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="011")),1==e.length&&(a.indexOf("早餐")>-1&&(this.ruleForm.trips[t].tMeals="100"),a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="001"),a.indexOf("午餐")>-1&&(this.ruleForm.trips[t].tMeals="010")),0==e.length&&(this.ruleForm.trips[t].tMeals="000"),console.log(this.ruleForm.trips[t].tMeals,"2")},getEatRemark:function(t){this.eatRemark=t,console.log(this.eatRemark,"this.eatRemark")},pushHotelIds:function(t){console.log(t)},getRoomRemark:function(t){this.roomRemark=t,console.log(this.roomRemark,"this.roomRemark")},getEasyTrip:function(t){this.easyTripValue=t,console.log(this.easyTripValue,"this.easyTripValue")},getChangeAddress:function(t){this.addressValue=t,console.log(this.addressValue,"this.addressValue")},pushScenicIds:function(t){console.log(t)},getChangeView:function(t){var e=this;this.$http.post(api_prefix+"/scenic_spot/list",{sName:t,sPym:t}).then(function(t){if(0==t.data.code){var a=t.data.body;if(a.list){console.log(e.ruleForm.trips[e.alertIndex],"11111"),e.ruleForm.trips[e.alertIndex].scenicspot=a.list;var i=e.ruleForm.trips[e.alertIndex];e.$set(e.ruleForm.trips,e.alertIndex,i)}}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangeLive:function(t){var e=this;console.log(t),this.$http.post(api_prefix+"/hotel/list",{hName:t,hPym:t}).then(function(t){if(0==t.data.code){var a=t.data.body;if(a.list){console.log(e.ruleForm.trips[e.alertIndex],"11111"),e.ruleForm.trips[e.alertIndex].hotel=a.list;var i=e.ruleForm.trips[e.alertIndex];e.$set(e.ruleForm.trips,e.alertIndex,i)}console.log(e.ruleForm.trips[e.alertIndex].hotel,"2123421")}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},UniteBtn:function(t,e,a){console.log(t,"zzzzs"),console.log(e,"cccccc"),console.log(this.ruleForm.trips,"sssss");for(var i in this.ruleForm.trips)console.log(this.ruleForm.trips[i],"ooo"),this.ruleForm.trips[i].phHotelIds=t,this.ruleForm.trips[i].hotel=e,this.ruleForm.trips[i].tHotelRemark=a,console.log("rrrrr",this.ruleForm.trips[i].phHotelIds),console.log("bbbbbbb",this.ruleForm.trips[i].hotel)},alertTag:function(t){this.alertIndex=t,console.log(this.alertIndex,"alertIndex`1"),this.alertTagFlag=!this.alertTagFlag,this.alertTageFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertTag")})},getChangeSort:function(t){var e=this;console.log(t),"景点"==t?this.$http.post(api_prefix+"/album/list",{aType:1}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,e.pType=1,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")}):this.$http.post(api_prefix+"/album/list",{aType:0}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,e.pType=0,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangeaName:function(t){var e=this;console.log(t),this.$http.post(api_prefix+"/album/list",{aType:this.pType,aName:t}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getPicList:function(t){var e=this;console.log(t),this.pAlbumIdPage=t,this.$http.post(api_prefix+"/attach/list",{pAlbumId:t,pSize:20,currPage:this.currentPage}).then(function(t){if(0==t.data.code){var a=t.data.body;e.photoListData=a.resultList,e.tableDataTotal=a.totalNum,console.log(e.photoListData,"photoListData1")}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getPicName:function(t){console.log(t),this.picName=t},getSearchPicList:function(){var t=this;this.isSearch=!0,this.$http.post(api_prefix+"/attach/list",{pRealName:this.picName,pSize:20,currPage:this.currentPage}).then(function(e){if(0==e.data.code){var a=e.data.body;t.photoListData=a.resultList,t.tableDataTotal=a.totalNum,console.log(t.photoListData,"photoListData2")}else t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangePicList:function(e,a,i){if(console.log("选中了",e,a),t(".picIndex"+i).is(":checked")){t(".picIndex"+i).removeAttr("checked");var s=t.inArray(a,this.picNameArry);i>=0&&(this.picNameArry.splice(s,1),console.log(this.picNameArry))}else t(".picIndex"+i).attr("checked",!0),this.picNameArry.push(a),console.log(this.picNameArry)},saveToTrip:function(){console.log(this.alertIndex,"(this.alertIndex2"),console.log(this.picNameArry.length,"picNameArry.length"),console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),console.log(this.ruleForm.trips[this.alertIndex].attachs.length+this.picNameArry.length,"yiqi.length"),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length>4&&this.$message.error("最多只能上传四张图片!"),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length==4&&(Array.prototype.push.apply(this.ruleForm.trips[this.alertIndex].attachs,this.picNameArry),console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库1"),this.picNameArry=[],console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),this.alertTagFlag=!1),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length<4&&(Array.prototype.push.apply(this.ruleForm.trips[this.alertIndex].attachs,this.picNameArry),console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库1"),this.picNameArry=[],console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),this.alertTagFlag=!1)},setDays:function(){console.log("");for(var t=this.ruleForm.pDays,e=s()(this.tripObj),a=0;a<t-1;a++)this.ruleForm.trips.push(JSON.parse(e));console.log(this.ruleForm.trips,"jjjjj"),console.log(t,"kkkklk")},editorUpdate:function(t,e,a){console.log(a,"sadsad"),this.ruleForm.trips[a].tDetailTrip=t},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.picNameArry.push(t),this.dialogVisible=!0},goback:function(t){var e=this;this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t})}).catch(function(){})},onSubmit:function(){var t=this;console.log(this.ruleForm,"popopop"),0==this.isAdd?(console.log("更新"),this.$http.post(api_prefix+"trip/update",this.ruleForm).then(function(e){0==e.data.code?t.$message({type:"success",message:"保存成功!"}):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})):(console.log("保存"),this.$http.post(api_prefix+"trip/save",this.ruleForm).then(function(e){0==e.data.code?(t.$message({type:"success",message:"保存成功!"}),t.isAdd=!1):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")}))},getTheIndex:function(t){this.alertIndex=t,console.log(this.alertIndex,"ceshi")},changecover:function(t){var e=event.currentTarget.files||event.dataTransfer.files;if(e.length){if(e.length+this.ruleForm.trips[this.alertIndex].attachs.length>4)return void console.log(e.length+this.ruleForm.trips[this.alertIndex].attachs.length,"files.length + this.picNameArry.length");e.length+this.ruleForm.trips[this.alertIndex].attachs.length==4&&console.log(e.length+this.ruleForm.trips[this.alertIndex].attachs.length,"files.length + this.picNameArry.length");var a=e[0].size/1024,i=e[0].type.startsWith("image/");console.log(a,"fileSize");for(var s=0;s<e.length;s++)i?a>5120?this.$alert("图片大小不能超过5M！","温馨提示",{confirmButtonText:"确定",callback:function(t){}}):this.createImage(e[s]):this.$alert("请选择图片上传！","温馨提示",{confirmButtonText:"确定",callback:function(t){}});event.currentTarget.value=""}},createImage:function(t){var e=this,a=new FormData;a.append("fileType","jpg"),a.append("file",t),this.$http.post(api_prefix+"/common/file/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t);var a=t.body.body.key;e.ruleForm.trips[e.alertIndex].attachs.push(a),console.log(e.ruleForm.trips[e.alertIndex].attachs,"图库2"),console.log(e.alertIndex,"zuizhong")})},delImage:function(t,e){console.log(t,"dele index"),console.log("deleta index",this.alertIndex),this.alertIndex=e,this.ruleForm.trips[this.alertIndex].attachs.length>0&&this.ruleForm.trips[this.alertIndex].attachs.splice(t,1),this.ruleForm.trips[this.alertIndex].attachs.length,this.ruleForm.trips[this.alertIndex].attachs.length,this.ruleForm.trips[this.alertIndex].attachs.length,console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库3")},handleCurrentChange:function(t){if(t){this.isSearch?(console.log(1),this.getSearchPicList()):(console.log(2),this.getPicList(this.pAlbumIdPage)),this.currentPage=t}}},components:{jdyEditor:o.a,jdyAlert:u.a}}}.call(e,a(2))},644:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(13),s=a.n(i),n=a(69),r=a.n(n),l=a(62),o=a.n(l),c=a(148),u=a.n(c);e.default={name:"line",data:function(){return{fileType:{fileType:"jpg"},action:"/common/file/upload",productType:{10:"周边短线",11:"国内长线",20:"出境旅游",30:"邮轮",40:"特色游",50:"自助游"},modifyAttr:{},copyLineForm:null,brandList:[],peopleList:[],lineForm:{companyId:JSON.parse(sessionStorage.loginData).uCompanyId,cover:null,pBrand:null,pConfirm:null,pContacts:null,pCostExclude:null,pCostInclude:null,pName:null,pNo:null,pNotes:null,pPhone:null,pQq:null,pRecommend:null,pShortName:null,pSort:null,pSpecial:null,pStatus:null,pType:null,pVisa:null,puserId:JSON.parse(sessionStorage.loginData).userId}}},computed:{},methods:{queryUserList:function(t){var e=this;this.$http.post(api_prefix+"/user/list",{uCompanyId:t}).then(function(t){0==t.body.code?e.peopleList=t.body.body.list:e.defalutErrorMessage(t.body.message)},function(t){e.defalutErrorMessage()})},queryBrandList:function(t){var e=this;this.$http.post(api_prefix+"/brand/list",{bCompanyId:t}).then(function(t){0==t.body.code?e.brandList=t.body.body.resultList:e.defalutErrorMessage(t.body.message)},function(t){e.defalutErrorMessage()})},productTypeChange:function(t){this.lineForm.pType=t.toString()},onSubmit:function(){var t=this,e=r()(this.copyLineForm,this.modifyAttr,{line:null,lineType:1,tcEndDay:this.$route.query.tcEndDay,tcStartDay:this.$route.query.tcStartDay});this.$http.post(api_prefix+"/product/update",e).then(function(e){0==e.body.code?t.$message.success("保存成功"):t.defalutErrorMessage(e.body.message)},function(e){t.defalutErrorMessage()})},goback:function(){this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){location.href="/transfer.html#/list"}).catch(function(){})},editorUpdate:function(t,e){this.modifyAttr[e]=t},defaultProcut:function(t){var e=this;this.loadDefaultLineInfo(t,1,function(a){if(console.log(a.line),a.line){a.cover=a.attach,r()(a,a.line),e.lineForm=a;for(var i in a)""==a[i]&&(a[i]=null);e.copyLineForm=JSON.parse(s()(e.lineForm))}else e.loadDefaultLineInfo(t,0,function(t){t.cover=t.attach;var a=t.line;delete a.id,t.line=null,r()(e.lineForm,t,a);for(var i in t)""==t[i]&&(t[i]=null);e.copyLineForm=JSON.parse(s()(e.lineForm))})})},loadDefaultLineInfo:function(t,e,a){var i=this;this.$http.post(api_prefix+"/product/detail",{id:t,lineType:e,tcEndDay:this.$route.query.tcEndDay,tcStartDay:this.$route.query.tcStartDay}).then(function(t){if(0==t.body.code){var e=t.data.body.body.product;a&&a(e)}else i.defalutErrorMessage(t.body.message)},function(t){i.defalutErrorMessage(t.body.message)})},defaultProductType:function(){var t=this;this.$http.post(api_prefix+"/product/get_product_type").then(function(e){0==e.body.code?t.productType=e.body.body:t.defalutErrorMessage(e.body.message)},function(e){t.defalutErrorMessage()})},defalutErrorMessage:function(t){t?this.$alert(t,"温馨提示",{type:"error"}):this.$alert("网络出错了~","温馨提示",{type:"error"})}},components:{ElFormItem:u.a,jdyEditor:o.a},created:function(){this.queryBrandList(JSON.parse(sessionStorage.loginData).uCompanyId),this.queryUserList(JSON.parse(sessionStorage.loginData).uCompanyId),this.$route.query.id?this.defaultProcut(this.$route.query.id):this.$alert("请返回产品列表选择产品后操作！","温馨提示",{type:"error"}),this.defaultProductType()}}},645:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(4),r=a.n(n),l=a(58);e.default={name:"",data:function(){return{btnFlag:!1,tickForm:{userId:JSON.parse(sessionStorage.loginData).userId,tCompanyId:JSON.parse(sessionStorage.loginData).uCompanyId,tProductId:this.$route.query.id,tTicketType:0,tType:0,tName:"成人票",tLimitType:0,tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:0,tGatherPrice:1,tAdultNum:1,tChildNum:0,tPeerPrice:1,tPriceAdd:"",tPriceReduce:"",tStock:-1,tEffectWeek:[],tIntroduction:"",ticketDepartureList:[],ticketAreaList:[],ascription:null},productDetail:{},baseCategory:[],limits:null,selectCityArr:{id:[],name:[]},showcfCityFlag:!1,proviceArr:{},submitArr:[],selectStationArr:[],stationArr:{},checkWeekAll:!1,rules:{tName:[{required:!0,message:"请输入票价名称",trigger:"blur"},{max:20,message:"长度在20个字符以内",trigger:"blur"}],tType:[{type:"number",required:!0,message:"请输入票价类型",trigger:"change"}],tCategory:[{type:"number",required:!0,message:"请输入票价类目",trigger:"blur"}],tTraffic:[{type:"number",required:!0,message:"请输入交通类目",trigger:"change"}],tEffectWeek:[{type:"array",required:!0,message:"请选择周几有效",trigger:"change"}],tMarketPrice:[{validator:l.a,trigger:"blur"},{required:!0,message:"请输入门市价"}],tGatherPrice:[{validator:l.b,trigger:"blur"},{required:!0,message:"请输入内部集结价"}],selectStationArr:[{required:!0,message:"请选择始发站",trigger:"change"}],tPriceAdd:[{validator:l.a,trigger:"blur"}],tPriceReduce:[{validator:l.a,trigger:"blur"}]}}},methods:{getProductDetail:function(){var t=this,e={id:this.$route.query.id,lineType:0};this.$http.post(api_prefix+"product/detail",e).then(function(e){0==e.data.code?t.productDetail=e.data.body.body.product:t.$alert(e.data.message)},function(t){console.log("获取产品详情出错了")})},toEdit:function(){var t=this;1==this.$route.query.type&&this.$http.get(api_prefix+"ticket/get/"+this.$route.query.priceId+"/0").then(function(e){0==e.data.code?(t.tickForm=e.data.body,t.tickForm.tLimitCondition=e.data.body.tLimitCondition,t.getStationList(!1),t.formatEdit()):t.$alert("获取当前编辑数据失败！")},function(t){console.log("获取当前编辑数据失败！")})},formatEdit:function(){var t=this;this.checkWeekAll=1111111==this.tickForm.tEffectWeek,this.tickForm.tEffectWeek=this.num2week(this.tickForm.tEffectWeek),this.tickForm.ticketAreaList.forEach(function(e){t.selectCityArr.name.push(e.taCity)}),this.submitArr=this.tickForm.ticketAreaList,this.tickForm.ticketDepartureList.forEach(function(e){t.selectStationArr.push(e.departueId)});var e=this.baseCategory.filter(function(e){return t.tickForm.tCategory==e.id});0!=e.length&&(this.tickForm.tCategory=e[0].id);var a=this.tickForm.tLimitCondition;this.getLimits(this.tickForm.tLimitType),this.$nextTick(function(e){t.tickForm.tLimitCondition=a,2==t.tickForm.tLimitType&&(t.tickForm.tLimitCondition=0==t.tickForm.tLimitCondition?"男":"女")})},getLimits:function(t){this.tickForm.tLimitCondition="",this.limits=t},getName:function(t){console.log(t,"090909090"),this.$route.query.type||(this.tickForm.tName=1==t?"儿童票":"成人票"),0==t?(this.tickForm.tAdultNum=1,this.tickForm.tChildNum=0):(this.tickForm.tAdultNum=0,this.tickForm.tChildNum=1),console.log(this.tickForm.tAdultNum,"090909090"),console.log(this.tickForm.tChildNum,"090909090")},handleCheckAllWeek:function(t){t.target.checked?this.tickForm.tEffectWeek=["周一","周二","周三","周四","周五","周六","周日"]:this.tickForm.tEffectWeek=[]},getSelectWeeks:function(t){this.checkWeekAll=7==t.length},week2num:function(){for(var t=0,e=0;e<this.tickForm.tEffectWeek.length;e++)switch(this.tickForm.tEffectWeek[e]){case"周一":t+=1e6;break;case"周二":t+=1e5;break;case"周三":t+=1e4;break;case"周四":t+=1e3;break;case"周五":t+=100;break;case"周六":t+=10;break;case"周日":t+=1}return(Array(7).join("0")+t).slice(-7)},num2week:function(t){if("0000000"==t)return"未设置";for(var e=[],a={0:"一",1:"二",2:"三",3:"四",4:"五",5:"六",6:"日"},i=t.split(""),s=0;s<i.length;s++)1==i[s]&&e.push("周"+a[s]);return e},showtfCity:function(){this.showcfCityFlag=!0,this.selectStationArr=[],this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity"),jdyFn.selectCity2()})},closecfCity:function(){this.showcfCityFlag=!1,t(".alertbgg").remove()},getCategory:function(){var t=this;this.$http.post(api_prefix+"/Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},saveCC:function(){this.selectCityArr=jdyFn.selectCity2();var e=t(".showtfcityaaa-content span.active"),a={},i=0,s=void 0;this.submitArr=[];for(var n=0;n<e.length;n++)i=t(e[n]).index(),s=t(e[n]).parent().siblings(".hide"),a={taCountry:s.children(".taCountry").eq(i).text(),taProvince:s.children(".taProvince").eq(i).text(),taCity:t(e[n]).text()},this.submitArr.push(a);console.log("投放城市",this.selectCityArr,e,this.submitArr),this.getStationList(!1),this.closecfCity()},removeAll:function(){t(".showtfcityaaa-span.active").removeClass("active"),this.submitArr=[]},selectAllAll:function(){t(".showtfcityaaa-content span").addClass("active"),console.log("投放城市",this.selectCityArr,this.submitArr)},defaultProviceArr:function(){var t=this;this.$http.post(api_prefix+"/City/selectCityPutList",{isopen:!0}).then(function(e){t.proviceArr=e.body.body,t.toEdit()})},getStationList:function(t){var e=this;console.log(999);var a={citys:this.selectCityArr.name,companyId:this.tickForm.tCompanyId,currPage:1,dStatus:0,dTraffic:this.tickForm.tTraffic,pageSize:1e4};t&&(console.log("1111",t),this.selectStationArr=[]),this.$http.post(api_prefix+"departure/start_site_group",a).then(function(t){0==t.data.code&&(e.stationArr=t.body.body.resultList)})},clearSFstation:function(){console.log("选的始发站",this.selectStationArr),this.selectStationArr=[]},goback:function(t){var e=this;this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t,query:{id:e.$route.query.id}})}).catch(function(){})},onSubmit:function(){var t=this;this.$refs.tickForm.validate(function(e){if(e){console.log("保存",t.tickForm);var a=JSON.parse(s()(t.tickForm));if(3==a.tLimitType){if(!/^<+?[1-9][0-9]*$|^>+?[1-9][0-9]*$|^\d+-[1-9][0-9]*$/.test(a.tLimitCondition))return void t.$message.error('只能输入"<正整数 或 >正整数 或 正整数—正整数",如<10、>10、10-20等')}if(0==a.tMarketPrice)return void t.$message.error("门市价不能为0");if(0==t.selectStationArr.length)return void t.$message.error("始发站不能为空");if(0==a.tType&&0==a.tAdultNum)return void t.$message.error("选择成人票，成人数不能小于1");if(1==a.tType&&0==a.tChildNum)return void t.$message.error("选择儿童票，儿童数不能小于1");a.ticketDepartureList=[],t.selectStationArr.forEach(function(t){a.ticketDepartureList.push({departueId:t})}),a.ticketAreaList=t.submitArr;var i="";a.ascription=t.productDetail.ascription,i=1==t.$route.query.type?"ticket/update":"ticket/save",a.tEffectWeek=t.week2num(),a.tPeerPrice=a.tMarketPrice,t.btnFlag=!0,t.$http.post(api_prefix+i,a).then(function(e){var a=e.body;"0"==a.code?(t.btnFlag=!1,t.$alert("保存成功","温馨提示",{type:"success"}),t.$router.push({name:"Ticketprice",query:{id:t.$route.query.id}})):(t.btnFlag=!1,t.$alert(a.message,"温馨提示",{type:"error"}))},function(e){t.$alert("保存失败","温馨提示",{type:"error"})})}else t.$message.error("提交失败了")})}},components:{jdyAlert:r.a},watch:{selectCityArr:"getStationList(false)"},mounted:function(){var e=this;this.getProductDetail(),this.defaultProviceArr(),this.getCategory(),t("#TrafficDiv .el-input").click(function(){e.selectStationArr=[]})}}}.call(e,a(2))},646:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(39),r=a.n(n),l=a(4),o=a.n(l);e.default={name:"",data:function(){var t;return t={btnFlag:!1,tickForm:{userId:123,tCompanyId:123,tProductId:123,tTicketType:0,tType:"",tName:"",tLimitType:"",tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:"",tPeerPrice:"",tPriceAdd:"",tPriceReduce:"",tStock:"",tEffectWeek:[],tIntroduction:"",ticketDepartureList:[{ticketId:1,departueId:""}],ticketAreaList:[{taTicketId:1,taCountry:"CN",taProvince:"山东",taCity:""}]},selectCityArr:{id:[],name:[]},showcfCityFlag:!1,proviceArr:{},submitArr:[],activeCityArr:[],showStationFlag:!1,selectStationArr:[],stationArr:{},activeStationArr:[],tickForm3:[],tickForm3Obj:{Index:null,tProductId:this.$route.query.id,userId:123,tCompanyId:123,tTicketType:"0",tType:"0",tName:"成人票",tLimitType:"",tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:0,tPeerPrice:0,tPriceAdd:0,tPriceReduce:0,tStock:-1,tEffectWeek:"1111111",ticketDepartureList:[],sfStationShow:[],ticketAreaList:[],tfCityShow:[]},limits:[],multipleSelection3:[],rules:[{tName:[{required:!0,message:"请输入票价名称",trigger:"blur"}],tType:[{required:!0,message:"请输入票价类型",trigger:"change"}],tTraffic:[{type:"number",required:!0,message:"请输入交通类目",trigger:"change"}],tMarketPrice:[{type:"number",required:!0,message:"请输入门市价",trigger:"blur"}],tPeerPrice:[{type:"number",required:!0,message:"请输入同行价",trigger:"blur"}],ticketAreaList:[{}],ticketDepartureList:[{}]}]},r()(t,"rules",{tName:[{required:!0,message:"请输入票价名称",trigger:"blur"}],tType:[{required:!0,message:"请输入票价类型",trigger:"change"}],tTraffic:[{type:"number",required:!0,message:"请输入交通类目",trigger:"change"}],tMarketPrice:[{type:"number",required:!0,message:"请输入门市价",trigger:"blur"}],tPeerPrice:[{type:"number",required:!0,message:"请输入同行价",trigger:"blur"}],ticketAreaList:[{}],ticketDepartureList:[{}]}),r()(t,"productDetail",{}),r()(t,"selectIdList",[]),r()(t,"maxIdList",[]),r()(t,"baseCategory",[]),r()(t,"currentDomIndex",null),t},methods:{getProductDetail:function(){var t=this,e={id:this.$route.query.id,lineType:0};this.$http.post(api_prefix+"product/detail",e).then(function(e){0==e.data.code?t.productDetail=e.data.body.body.product:t.$alert(e.data.message)},function(t){console.log("获取产品详情出错了")})},handleSelectionChange:function(t){this.selectIdList=[];for(var e=0;e<t.length;e++)this.selectIdList.push(t[e].Index);this.selectIdList.sort()},getLimits:function(t,e){this.tickForm3[t].tLimitCondition="",this.limits[t]=e},getNames:function(t){this.tickForm3[t].tName=1==this.tickForm3[t].tType?"儿童票":"成人票"},goback:function(t){var e=this;this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t,query:{id:e.$route.query.id}})}).catch(function(){})},getCategory:function(){var t=this;this.$http.post(api_prefix+"/Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},showtfCity:function(t){var e=this;this.currentDomIndex=t,this.showcfCityFlag=!0,this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity"),jdyFn.selectCity2()}),this.activeCityArr=[];var a=this.tickForm3.filter(function(t){return e.currentDomIndex==t.Index});this.activeCityArr=a[0].tfCityShow},closecfCity:function(){this.showStationFlag=!1,this.showcfCityFlag=!1,t(".alertbgg").remove()},saveCC:function(){var e=this;this.selectCityArr=jdyFn.selectCity2();for(var a=t(".showtfcityaaa-content span.active"),i={},s=0,n=void 0,r=0;r<a.length;r++)s=t(a[r]).index(),n=t(a[r]).parent().siblings(".hide"),i={taCountry:n.children(".taCountry").eq(s).text(),taProvince:n.children(".taProvince").eq(s).text(),taCity:t(a[r]).text()},this.submitArr.push(i);var l=this.tickForm3.filter(function(t){return e.currentDomIndex==t.Index});l[0].ticketAreaList=this.submitArr,this.clearSFstation(this.currentDomIndex);var o=[];this.submitArr.forEach(function(t,e){o.push(t.taCity)}),l[0].tfCityShow=o,this.submitArr=[],this.closecfCity()},removeAll:function(){t(".showtfcityaaa-span.active").removeClass("active")},selectAllAll:function(){t(".showtfcityaaa-content span").addClass("active")},defaultProviceArr:function(){var t=this;this.$http.post(api_prefix+"City/selectCityPutList",{isopen:!0}).then(function(e){t.proviceArr=e.body.body})},showStation:function(t){var e=this;this.currentDomIndex=t;var a=this.tickForm3.filter(function(t){return e.currentDomIndex==t.Index});if(0==a[0].tfCityShow.length||""==a[0].tTraffic)this.$message.info("请先选择投放城市和交通工具");else{this.showStationFlag=!0,this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity"),jdyFn.selectCity2()});var i={citys:a[0].tfCityShow,companyId:a[0].tCompanyId,currPage:1,dStatus:0,dTraffic:parseInt(a[0].tTraffic),pageSize:1e4};this.$http.post(api_prefix+"departure/start_site_group",i).then(function(t){e.stationArr=t.body.body.resultList,0!=a[0].ticketDepartureList.length&&(e.selectStationArr=[],a[0].ticketDepartureList.forEach(function(t){e.selectStationArr.push(t.departueId)}))})}},saveStation:function(){var t=this,e=[],a=this.tickForm3.filter(function(e){return t.currentDomIndex==e.Index});console.log("保存始发站序列",this.selectStationArr),this.selectStationArr.forEach(function(a){var i=t.stationArr.filter(function(t){return t.id==a});0!=i.length&&e.push(i[0].dName)}),a[0].sfStationShow=e,a[0].ticketDepartureList=[],this.selectStationArr.forEach(function(t){a[0].ticketDepartureList.push({departueId:t})}),this.selectStationArr=[],this.closecfCity()},clearSFstation:function(t){var e=this;this.currentDomIndex=t;var a=this.tickForm3.filter(function(t){return e.currentDomIndex==t.Index});0!=a.length&&(a[0].sfStationShow=[]),0!=a.length&&(a[0].sfStationShow=[],a[0].ticketDepartureList=[]);var i={citys:a[0].tfCityShow,companyId:a[0].tCompanyId,currPage:1,dStatus:0,dTraffic:parseInt(a[0].tTraffic),pageSize:1e4};this.$http.post(api_prefix+"departure/start_site_group",i).then(function(t){e.stationArr=t.body.body.resultList,e.selectStationArr=[]})},onSubmit:function(){var t=this,e=[];if(e=this.tickForm3.filter(function(t){return""==t.tTraffic}),0!=e.length)return this.$alert("请选择交通方式","温馨提示",{type:"error"});e=this.tickForm3.filter(function(t){return 0==t.tMarketPrice}),a=this.tickForm3.filter(function(t){return t.tMarketPrice});var a=[];if(0!=e.length)return this.$alert("门市价不能为0","温馨提示",{type:"error"});this.tickForm3.forEach(function(t){a.push(t.tMarketPrice)});for(var i=0;i<a.length;i++)if(!RegExObj.moneyTwoPoint.test(a[i]))return this.$alert("门市价金钱数字格式不正确","温馨提示",{type:"error"});a=[],this.tickForm3.forEach(function(t){a.push(t.tPriceAdd)});for(var s=0;s<a.length;s++)if(!RegExObj.moneyTwoPoint.test(a[s]))return this.$alert("补房差格式不正确（参考：99.88，无小数或最多两位小数）","温馨提示",{type:"error"});a=[],this.tickForm3.forEach(function(t){a.push(t.tPriceReduce)});for(var n=0;n<a.length;n++)if(!RegExObj.moneyTwoPoint.test(a[n]))return this.$alert("退房差格式不正确（参考：99.88，无小数或最多两位小数）","温馨提示",{type:"error"});e=this.tickForm3.filter(function(t){return 3==t.tLimitType});var r=/^<+?[1-9][0-9]*$|^>+?[1-9][0-9]*$|^\d+-[1-9][0-9]*$/;if(0!=e.length){var l=[];if(e.forEach(function(t){!r.test(t.tLimitCondition)&&l.push(1)}),0!=l.length)return this.$alert('只能输入"<正整数 或 >正整数 或 正整数—正整数",如<10、>10、10-20等',{type:"error"})}if(e=this.tickForm3.filter(function(t){return""==t.sfStationShow}),0!=e.length)return this.$alert("始发站不能为空","温馨提示",{type:"error"});this.$refs.tickForm.validate(function(e){if(e){for(var a=t.tickForm3,i=0;i<a.length;i++)a[i].tPeerPrice=a[i].tMarketPrice;t.btnFlag=!0,t.$http.post(api_prefix+"/ticket/saveBash",a).then(function(e){var a=e.body;"0"==a.code?(t.btnFlag=!1,t.tickForm.id||(t.tickForm.id=a.body.id),t.$alert("保存成功","温馨提示",{type:"success"}),t.$router.push({name:"Ticketprice",query:{id:t.$route.query.id}})):(t.btnFlag=!1,t.$alert(a.message,"温馨提示",{type:"error"}))},function(e){t.$alert("保存失败","温馨提示",{type:"error"})})}else t.$message.error("提交失败了")})},addTr:function(){var t=this;this.tickForm3.push(JSON.parse(s()(this.tickForm3Obj))),this.maxIdList=[],this.tickForm3.forEach(function(e){t.maxIdList.push(e.Index)});var e=Math.max.apply(null,this.maxIdList);this.tickForm3[this.tickForm3.length-1].Index=e+1},removeTr:function(){var t=this;0==this.selectIdList.length?this.$message.info("请选择要删除的行"):(this.tickForm3=this.tickForm3.filter(function(e){return-1==t.selectIdList.indexOf(e.Index)}),this.selectIdList=[],this.$refs.multipleTable.clearSelection())},cloneTr:function(){var t=this;if(0==this.selectIdList.length)this.$message.info("请选择要复制的行");else{var e=this.tickForm3.filter(function(e){return-1!=t.selectIdList.indexOf(e.Index)});e=JSON.parse(s()(e)),this.maxIdList=[],this.tickForm3.forEach(function(e){t.maxIdList.push(e.Index)}),e.forEach(function(e,a){e.Index=Math.max.apply(null,t.maxIdList)+a+1}),this.tickForm3=this.tickForm3.concat(e),e=[],this.selectIdList=[],this.$refs.multipleTable.clearSelection()}}},components:{jdyAlert:o.a},mounted:function(){this.getProductDetail(),this.defaultProviceArr(),this.getCategory()}}}.call(e,a(2))},647:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(4),r=a.n(n),l=a(58);e.default={name:"",data:function(){return{btnFlag:!1,tickForm2:{userId:123,tCompanyId:123,tProductId:this.$route.query.id,tTicketType:1,tType:1,tName:"套票",tCategory:"",tMarketPrice:0,tPeerPrice:0,tPriceAdd:0,tPriceReduce:0,tEffectWeek:[],ticketAreaList:[],tIntroduction:"",tStock:-1,sets:[]},baseCategory:[],selectCityArr:{id:[],name:[]},showcfCityFlag:!1,proviceArr:{},submitArr:[],rules:{tType:[{type:"number",required:!0,message:"请输入票价类型",trigger:"change"}],tName:[{required:!0,message:"请输入票价名称",trigger:"blur"},{max:20,message:"长度在20个字符以内",trigger:"blur"}],tEffectWeek:[{type:"array",required:!0,message:"请选择周几有效",trigger:"change"}],tMarketPrice:[{validator:l.a,trigger:"blur"}],tPeerPrice:[{type:"number",required:!0,message:"请输入同行价",trigger:"blur"}]},tableData3:[],productDetail:{},searchParams:{currPage:1,pageSize:10,tName:"",tProductId:this.$route.query.id,tTicketType:0},currentPage:1,pageSize:10,tableDataTotal:0,singleLists:[],checkWeekAll:!1}},methods:{goback:function(t){var e=this;this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t,query:{id:e.$route.query.id}})}).catch(function(){})},getProductDetail:function(){var t=this,e={id:this.$route.query.id,lineType:0};this.$http.post(api_prefix+"product/detail",e).then(function(e){0==e.data.code?t.productDetail=e.data.body.body.product:t.$alert(e.data.message)},function(t){console.log("获取产品详情出错了")})},toEdit:function(){var t=this;1==this.$route.query.type&&this.$http.get(api_prefix+"ticket/get/"+this.$route.query.priceId+"/"+this.$route.query.type).then(function(e){if(0==e.data.code){var a=e.data.body;t.tickForm2=a,a.sets.forEach(function(e){var a=t.tableData3.filter(function(t){return e.tsSingleId==t.id});console.log("临时",a),0!=a.length&&(a[0].sets=e.tsSeats,t.$refs.multipleTable.toggleRowSelection(a[0]))}),t.tableDataTotal=a.singleList.length,t.formatEdit()}else t.$alert("获取当前编辑数据失败！")},function(t){console.log("获取当前编辑数据失败！")})},formatEdit:function(){var t=this;this.checkWeekAll=1111111==this.tickForm2.tEffectWeek,this.tickForm2.tEffectWeek=this.num2week(this.tickForm2.tEffectWeek),this.tickForm2.ticketAreaList.forEach(function(e){t.selectCityArr.name.push(e.taCity)}),this.submitArr=this.tickForm2.ticketAreaList;var e=this.baseCategory.filter(function(e){return t.tickForm2.tCategory==e.id});this.tickForm2.tCategory=e[0].name},handleCheckAllWeek:function(t){t.target.checked?this.tickForm2.tEffectWeek=["周一","周二","周三","周四","周五","周六","周日"]:this.tickForm2.tEffectWeek=[]},getSelectWeeks:function(t){this.checkWeekAll=7==t.length},week2num:function(){for(var t=0,e=0;e<this.tickForm2.tEffectWeek.length;e++)switch(this.tickForm2.tEffectWeek[e]){case"周一":t+=1e6;break;case"周二":t+=1e5;break;case"周三":t+=1e4;break;case"周四":t+=1e3;break;case"周五":t+=100;break;case"周六":t+=10;break;case"周日":t+=1}return(Array(7).join("0")+t).slice(-7)},num2week:function(t){if("0000000"==t)return"未设置";for(var e=[],a={0:"一",1:"二",2:"三",3:"四",4:"五",5:"六",6:"日"},i=t.split(""),s=0;s<i.length;s++)1==i[s]&&e.push("周"+a[s]);return e},fareTableData:function(){var t=this;this.$http.post(api_prefix+"ticket/list",this.searchParams).then(function(e){var a=e.data.body;a.list.forEach(function(t){t.sets=0,2==t.tLimitType&&(t.tLimitCondition="0"==t.tLimitCondition?"男":"女")}),t.tableData3=a.list,t.tableDataTotal=a.total},function(t){console.log("获取单票列表出错了")})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){t&&(this.searchParams.currPage=t,this.searchParams.pageNum=t,this.fareTableData())},handleSelectionChange:function(t){console.log(this.singleLists),this.singleLists=t},getCategory:function(){var t=this;this.$http.post(api_prefix+"/Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},showtfCity:function(){this.showcfCityFlag=!0,this.$nextTick(function(){jdyFn.setAlertStyle("showtfcity"),jdyFn.selectCity2()})},closecfCity:function(){this.showcfCityFlag=!1,t(".alertbgg").remove()},saveCC:function(){this.selectCityArr=jdyFn.selectCity2();var e=t(".showtfcityaaa-content span.active"),a={},i=0,s=void 0;this.submitArr=[];for(var n=0;n<e.length;n++)i=t(e[n]).index(),s=t(e[n]).parent().siblings(".hide"),a={taCountry:s.children(".taCountry").eq(i).text(),taProvince:s.children(".taProvince").eq(i).text(),taCity:t(e[n]).text()},this.submitArr.push(a);this.closecfCity()},removeAll:function(){t(".showtfcityaaa-span.active").removeClass("active"),this.submitArr=[]},selectAllAll:function(){t(".showtfcityaaa-content span").addClass("active")},defaultProviceArr:function(){var t=this;this.$http.post(api_prefix+"/City/selectCityPutList",{isopen:!0}).then(function(e){t.proviceArr=e.body.body,t.toEdit()})},onSubmit:function(){var t=this;console.log("票价",this.tickForm2),this.$refs.tickForm2.validate(function(e){if(e){var a=JSON.parse(s()(t.tickForm2));if(0==t.submitArr.length)return void t.$message.error("投放城市不能为空");if(a.ticketAreaList=t.submitArr,0==a.tMarketPrice)return void t.$message.error("门市价不能为0");var i="";if(1==t.$route.query.type?(i="ticket/update",a.sets=[]):i="ticket/save",0==t.singleLists.length)return t.$message.error("您未选择单票");t.singleLists.forEach(function(t){a.sets.push({tsSingleId:t.id,tsSeats:t.sets})}),a.tEffectWeek=t.week2num(),a.tPeerPrice=a.tMarketPrice,t.btnFlag=!0,t.$http.post(api_prefix+i,a).then(function(e){var a=e.body;"0"==a.code?(t.btnFlag=!1,t.tickForm2.id||(t.tickForm2.id=a.body.id),t.$alert("保存成功","温馨提示",{type:"success"}),t.$router.push({name:"Ticketprice",query:{id:t.$route.query.id}})):(t.btnFlag=!1,t.$alert(a.message,"温馨提示",{type:"error"}))},function(e){t.$alert("保存失败","温馨提示",{type:"error"})})}else t.$message.error("提交失败了")})}},filters:{filterLimitType:function(t){if(!(3|0==t))return"未设置";switch(t){case 0:return"无限制";case 1:return"实名制";case 2:return"限制性别";case 3:return"限制年龄"}},filterLimitCondition:function(t){return""==t?"未设置":t},filterTimeFormat:function(t){return new Date(t).format("yyyy-MM-dd hh:mm")},filterEffectWeek:function(t){if("0000000"==t)return"未设置";for(var e=[],a={0:"一",1:"二",2:"三",3:"四",4:"五",5:"六",6:"日"},i=t.split(""),s=0;s<i.length;s++)1==i[s]&&e.push("周"+a[s]);return e.join(" ")}},components:{jdyAlert:r.a},mounted:function(){this.getProductDetail(),this.fareTableData(),this.defaultProviceArr(),this.getCategory()}}}.call(e,a(2))},648:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i),n=a(14),r=a.n(n);e.default={name:"ticketprice",data:function(){return{msg:"Ticketprice",search:{selectProduct:"",addProduct:"",selectProduct_select:""},productDetail:{},limits:null,searchParams:{currPage:1,pageSize:100,flag:2,tName:"",tProductId:this.$route.query.id,tCompanyId:null},focusPriceId:null,tableDataTotal:0,tickForm:{userId:123,tCompanyId:123,tProductId:this.$route.query.id,tTicketType:0,tType:"",tName:"",tLimitType:"",tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:"",tPeerPrice:"",tPriceAdd:"",tPriceReduce:"",tStock:"",tIntroduction:"",ticketDepartureList:[{ticketId:1,departueId:""}],ticketAreaList:[{taTicketId:1,taCountry:"CN",taProvince:"山东",taCity:""}]},rules:{tName:[{required:!0,message:"请输入票价名称",trigger:"blur"}],tType:[{required:!0,message:"请输入票价类型",trigger:"change"}],tTraffic:[{required:!1,message:"请输入交通类目",trigger:"change"}],tMarketPrice:[{required:!0,message:"请输入门市价",trigger:"blur"}],tPeerPrice:[{required:!0,message:"请输入同行价",trigger:"blur"}],tEffectWeek:[{type:"array",required:!0,message:"请选择周几有效",trigger:"change"}],ticketAreaList:[{}],ticketDepartureList:[{}]},tickForm2:{tType:"",tName:"",tLimitType:"",tCategory:"",tTraffic:"",tLimitCondition:"",tMarketPrice:1,tPeerPrice:2,tPriceAdd:3,tPriceReduce:3,tStock:1,tEffectWeek:[],sets:"",departureList:"",tIntroduction:""},rules2:{tType:[{required:!0,message:"请输入票价类型",trigger:"change"}],tName:[{required:!0,message:"请输入票价名称",trigger:"blur"}],tTraffic:[{required:!0,message:"请输入交通类目",trigger:"change"}],tPeerPrice:[{required:!0,message:"请输入同行价",trigger:"blur"}],tEffectWeek:[{required:!0,message:"请选择周几有效",trigger:"change"}],tMarketPrice:[{required:!0,message:"请输入门市价",trigger:"blur"}],sets:[{required:!0,message:"请输入投放市场",trigger:"blur"}]},tickForm3:[{tType:"",tName:"",tLimitType:"",tCategory:"",tTraffic:"",tLimitCondition:"",tMarketPrice:1,tPeerPrice:2,tPriceAdd:3,tPriceReduce:3,tStock:1,tEffectWeek:[],sets:"",departureList:"",tIntroduction:""}],tickForm3Obj:{userId:123,tCompanyId:123,tProductId:123,tTicketType:0,tType:"",tName:"123",tLimitType:"",tLimitCondition:"",tCategory:"",tTraffic:"",tMarketPrice:"",tPeerPrice:"",tPriceAdd:"",tPriceReduce:"",tStock:"",tEffectWeek:[],tIntroduction:"",ticketDepartureList:[{ticketId:1,departueId:""}],ticketAreaList:[{taTicketId:1,taCountry:"CN",taProvince:"山东",taCity:""}]},rules3:{},tableData:[],currentPage:1,pageSize:100,addProductFlag1:!1,addProductFlag2:!1,addProductFlag3:!1,tableData3:[{tStatus:"1",tName:"王小虎",tsSeats:3,tType:1,tMarketPrice:1,tPeerPrice:1,tEffectWeek:"周一",tLimitType:"2",tLimitCondition:"1",updateTime:"2017-07-02"}],multipleSelection:[],multipleSelection3:[],fullscreenLoading:!1,baseCategory:[],module:"Ticket",journalTotal:0,journalCurrentData:[],alertJournalFlag:!1,journalStyle:{top:"164px",left:"300px"},booleanValue:{on:0,off:1},logId:""}},mounted:function(){this.getTableData(),this.getProductDetail(),this.getCategory()},methods:{handleRemove:function(t,e){console.log(t,e)},getProductDetail:function(){var t=this,e={id:this.$route.query.id,lineType:0};this.$http.post(api_prefix+"product/detail",e).then(function(e){0==e.data.code?t.productDetail=e.data.body.body.product:t.$alert(e.data.message)},function(t){console.log("获取产品详情出错了")})},editFare:function(t,e,a){0==a?this.$router.push({name:"Addfare",query:{id:t,priceId:e,type:1}}):this.$router.push({name:"Ticketmanagement",query:{id:t,priceId:e,type:1}})},setDefaultPrice:function(){var t=this;if(null==this.focusPriceId)this.$alert("请选择一个票价");else{var e={id:this.focusPriceId,tProductId:this.$route.query.id};this.$http.post(api_prefix+"ticket/default",e).then(function(e){t.$alert(e.data.message),t.getTableData()},function(t){console.log("设置默认价格出错了")})}},getCategory:function(){var t=this;this.$http.post(api_prefix+"Dictionaries/dictList",{dGroupId:111}).then(function(e){if(0==e.data.code){e.body.body.forEach(function(e){t.baseCategory.push({id:e.id,name:e.dName})})}else t.$alert("获取票价类目失败")},function(t){console.log("获取票价类目失败！")})},filterCategory:function(t){var e=[];return""==t?t="---":e=this.baseCategory.filter(function(e){return t==e.id}),0!=e.length?e[0].name:t},getRowId:function(t){this.focusPriceId=t,console.log(this.focusPriceId,"this.focusPriceId")},setStatus:function(t){var e=this;console.log(t,"status"),this.$http.post(api_prefix+"ticket/status",{id:this.focusPriceId,tStatus:t}).then(function(t){0==t.data.code?e.getTableData():e.$message.error("票价状态修改失败")},function(t){console.log("修改票价状态出错了")})},getLimits:function(t){this.tickForm.tLimitCondition="",this.limits=t},deleteRow:function(t,e,a){var i=this;this.$confirm("是否删除该票价？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.splice(t,1);var s={id:a,tStatus:2};i.$http.post(api_prefix+"ticket/status",s).then(function(t){0==t.data.code?i.getTableData():i.$message.error("票价删除失败"),i.getTableData()},function(t){console.log("票价删除出错了")})}).catch(function(){})},searchTableData:function(){this.searchParams.currPage=1,this.currentPage=1,this.getTableData()},alertJournal:function(t){if(!this.logId)return void this.$alert("请选择一个票价");this.alertJournalFlag=!this.alertJournalFlag,this.alertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")})},getLogData:function(t){var e=this;this.$http.post(api_prefix+"logs/selectLogs?pageIndex="+t+"&module="+this.module+"&pid="+this.logId).then(function(t){var a=e;e.journalTotal=t.data.body.total,e.journalCurrentData=[],t.data.body.list.forEach(function(t){a.journalCurrentData.push(t)})},function(t){console.log("获取日志出错了")})},updatePage:function(){var t=this;this.fullscreenLoading=!0,this.searchParams={currPage:1,pageSize:100,tName:"",tProductId:this.$route.query.id,flag:2},setTimeout(function(){t.fullscreenLoading=!1,t.$message({showClose:!0,message:"刷新成功",type:"success"}),t.currentPage=1,t.getTableData()})},getTableData:function(){var t=this;this.searchParams.tCompanyId=JSON.parse(sessionStorage.loginData).uCompanyId,this.$http.post(api_prefix+"ticket/outList",this.searchParams).then(function(e){var a=e.data.body;a.list.forEach(function(e){e.tickList.forEach(function(e){switch(e.tCategory=t.filterCategory(e.tCategory),e.tTraffic){case 0:e.tTraffic="飞机";break;case 1:e.tTraffic="火车";break;case 2:e.tTraffic="汽车";break;case 3:e.tTraffic="邮轮"}if(e.tLimitType&&""!=e.tLimitType)switch(e.tLimitType){case 0:e.tLimitCondition="无";break;case 1:e.tLimitCondition="实名";break;case 2:0==e.tLimitCondition?e.tLimitCondition="男":e.tLimitCondition="女"}else e.tLimitType=99,e.tLimitCondition="---";if(0==e.departureList.length)e.departureList="未设置";else{var a=[];e.departureList.forEach(function(t){a.push(t.dName)}),e.departureList=a.join(",")}})}),t.tableData=a.list,t.tableDataTotal=a.total},function(t){console.log("出错了")})},addProduct:function(t){1==t&&this.$router.push({name:"Addfare",query:{id:this.$route.query.id}}),2==t&&this.$router.push({name:"Ticketmanagement",query:{id:this.$route.query.id}}),3==t&&this.$router.push({name:"Batchfare",query:{id:this.$route.query.id}}),(this.addProductFlag1||this.addProductFlag2||this.addProductFlag3)&&this.$nextTick(function(){jdyFn.setAlertStyle("")})},submitForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return console.log("error submit!!"),!1;"tickForm"==t&&e.$http.post(api_prefix+"/ticket/save",e.tickForm).then(function(t){var a=t.data.code;alert(a),e.$router.go({name:"Ticketprice"})},function(t){console.log("添加票价出错了")}),"tickForm2"==t&&e.$http.post(api_prefix+"/ticket/save",e.tickForm2).then(function(t){var a=t.data.code;alert(a),e.$router.go({name:"Ticketprice"})},function(t){console.log("添加套票出错了")}),"tickForm3"==t&&e.$http.post(api_prefix+"/ticket/saveBash",e.tickForm3).then(function(t){var a=t.data.code;alert(a),e.$router.go({name:"Ticketprice"})},function(t){console.log("批量添加出错了")})})},handleCurrentJournalChange:function(t){},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){t&&(this.searchParams.currPage=t,this.searchParams.pageNum=t,this.getTableData())},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionChange3:function(t){this.multipleSelection3=t},handleRowChange:function(t){this.logId=t.id,this.getLogData(1)},onSubmitGo:function(t){this.$router.push({name:t,query:{id:this.$route.query.id}})},goback:function(t){this.$router.push({name:t,query:{id:this.$route.query.id}})}},filters:{filterType:function(t){return 0==t?"单票":1==t?"套票":"未设置"},filterProType:function(t){if(!(62|null==t))return"未设置";switch(t){case null:return"全部类型";case 10:return"周边短线";case 11:return"国内长线";case 20:return"出境旅游";case 30:return"邮轮";case 40:return"特色游";case 50:return"自助游"}},filterLimitType:function(t){if(!(99|0==t))return"未设置";switch(t){case 0:return"无限制";case 1:return"实名制";case 2:return"限制性别";case 3:return"限制年龄";case 99:return"---"}},filterEffectWeek:function(t){if("0000000"==t)return"未设置";for(var e=[],a={0:"一",1:"二",2:"三",3:"四",4:"五",5:"六",6:"日"},i=t.split(""),s=0;s<i.length;s++)1==i[s]&&e.push(a[s]);return e.join(" ")}},computed:{},components:{jdyAlert:s.a,jdyLog:r.a}}},649:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(13),s=a.n(i),n=a(102),r=a.n(n),l=a(62),o=a.n(l),c=a(4),u=a.n(c);e.default={name:"trip",components:{jdyCalendar:r.a,jdyEditor:o.a,jdyAlert:u.a},data:function(){return{btnFlag:!1,focusStatus:!1,tripObj:{tFromTo:"",tMeals:"",tMealsRemark:null,phHotelIds:[],haveMeals:[],tHotelRemark:null,tSimpleTrip:null,"tDetailTrip ":null,dialogImageUrl:null,dialogVisible:!1,vehicle:null,phScenicIds:[],attachs:[]},msg:"trip",easyTripValue:"",action:"common/file/upload",picArry:[],picNameArry:[],uploadImages:[],showPicHover:!1,isSearch:!1,ruleForm:{tProductId:this.$route.query.id,tType:0,puserId:1,pDays:1,trips:[{haveMeals:[],tFromTo:"",tMeals:"",tMealsRemark:"",phHotelIds:[],tHotelRemark:"",tSimpleTrip:"",tDetailTrip:"",dialogImageUrl:"",dialogVisible:!0,vehicle:"",phScenicIds:[],attachs:[],hotel:[]}]},scienspotFlag:!1,rules:{},accommodationOption:[],dialogImageUrl:"",dialogVisible:!1,viewData:[],picData:[],photoListData:[],picListData:[],alertTagFlag:!1,alertIndex:0,currentPage:1,tableDataTotal:0,pageSizeAll:20,addTagStyle:{sort:"景点",pAlbumId:"",picName:"",picList:[]},sortData:[{value:"酒店",label:"酒店"},{value:"景点",label:"景点"}],forceUpdateViewArray:[1],isUpdate:!1,flag:!1,isAdd:"",getPic:"",newId:"",oldId:"",pAlbumIdPage:""}},mounted:function(){var t=this;this.newId=this.$route.query.id,console.log(this.newId,"this.newId"),this.oldId=this.$route.query.copyId,console.log(this.oldId,"this.oldId"),this.$nextTick(function(){t.$http.post(api_prefix+"/album/list",{aType:1}).then(function(e){if(0==e.data.code){var a=e.data.body;t.picData=a.resultList,t.pType=1,console.log(t.picData)}else t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")}),t.$route.query.copyId?t.$http.post(api_prefix+"/trip/list",{tProductId:t.oldId,tType:0}).then(function(e){0==e.data.code?e.data.body.trips.length>0?(t.isAdd=!0,console.log("fuzhi"),console.log(t.ruleForm.trips.length,"this.ruleForm.trips.length"),console.log(t.ruleForm.trips,"this.ruleForm.trips"),t.ruleForm=e.data.body,t.ruleForm.pDays=t.ruleForm.trips.length,t.ruleForm.tType=0,t.ruleForm.tProductId=t.$route.query.id,t.ruleForm.puserId=1,t.ruleForm.trips.length>0&&t.rebuildFormData(t.ruleForm.trips)):(t.isAdd=!0,console.log("fuzhi"),t.ruleForm.pDays=1):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}),t.flag=!0},function(t){console.log("出错了")}):t.$http.post(api_prefix+"/trip/list",{tProductId:t.newId,tType:0}).then(function(e){0==e.data.code?e.data.body.trips.length>0?(t.isAdd=!1,console.log("bianji"),console.log(t.ruleForm.trips.length,"this.ruleForm.trips.length"),console.log(t.ruleForm.trips,"this.ruleForm.trips"),t.ruleForm=e.data.body,t.ruleForm.pDays=t.ruleForm.trips.length,t.ruleForm.tType=0,t.ruleForm.tProductId=t.$route.query.id,t.ruleForm.puserId=1,t.ruleForm.trips.length>0&&t.rebuildFormData(t.ruleForm.trips)):(t.isAdd=!0,console.log("xinzeng"),t.ruleForm.pDays=1):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}),t.flag=!0},function(t){console.log("出错了")})})},computed:{imgUploadPath:function(){return api_prefix+this.action}},updated:function(){t(".jl-upLoadPic").mouseenter(function(){t(this).find(".jl-upLoadPicHover").css("display","inline-block")}),t(".jl-upLoadPic").mouseleave(function(){t(this).find(".jl-upLoadPicHover").css("display","none")})},methods:{getIndex:function(t){this.alertIndex=t,console.log(this.alertIndex)},rebuildScienspot:function(t){t.phScenicIds=[];for(var e in t.scenicspot){t.scenicspot[e].id,t.scenicspot[e].sName;t.phScenicIds.push(t.scenicspot[e].id)}},rebuildHotel:function(t){t.phHotelIds=[];for(var e in t.hotel){t.hotel[e].id,t.hotel[e].hName;t.phHotelIds.push(t.hotel[e].id)}},rebuildMeals:function(t){var e=t.tMeals;return"111"==e?void(t.haveMeals=["早餐","午餐","晚餐"]):"110"==e?void(t.haveMeals=["早餐","午餐"]):"011"==e?void(t.haveMeals=["晚餐","午餐"]):"101"==e?void(t.haveMeals=["早餐","晚餐"]):"001"==e?void(t.haveMeals=["晚餐"]):"100"==e?void(t.haveMeals=["早餐"]):"010"==e?void(t.haveMeals=["午餐"]):"000"==e||""==e?void(t.haveMeals=[]):void 0},rebuildFormData:function(t){for(var e in t)this.rebuildMeals(t[e]);console.log("trips",t),console.log("this",this)},setVehicle:function(e,a){t("#focusInput"+e).focus(),console.log(this.ruleForm.trips[this.alertIndex].tFromTo,"bbbbb");var i=this.ruleForm.trips[this.alertIndex].tFromTo;switch(a){case 1:i+="[邮轮]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 2:i+="[飞机]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 3:i+="[火车]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 4:i+="[巴士]",this.ruleForm.trips[this.alertIndex].tFromTo=i;break;case 5:i+="[汽车]",this.ruleForm.trips[this.alertIndex].tFromTo=i}console.log(this.ruleForm.trips[this.alertIndex].tFromTo,"hhhhhhh")},queryHotelList:function(t){this.$http.post(api_prefix+"hotel/list",{companyId:123,currPage:1,hName:null,pageSize:15,startNum:0}).then(function(t){},function(t){console.log("出错了")})},getChangeEating:function(t){var e=this.ruleForm.trips[t].haveMeals;console.log(this.ruleForm.trips[t].haveMeals,"1");var a=e.toString();3==e.length&&(this.ruleForm.trips[t].tMeals="111"),2==e.length&&(a.indexOf("早餐")>-1&&a.indexOf("午餐")>-1&&(this.ruleForm.trips[t].tMeals="110"),a.indexOf("早餐")>-1&&a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="101"),a.indexOf("午餐")>-1&&a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="011")),1==e.length&&(a.indexOf("早餐")>-1&&(this.ruleForm.trips[t].tMeals="100"),a.indexOf("晚餐")>-1&&(this.ruleForm.trips[t].tMeals="001"),a.indexOf("午餐")>-1&&(this.ruleForm.trips[t].tMeals="010")),0==e.length&&(this.ruleForm.trips[t].tMeals="000"),console.log(this.ruleForm.trips[t].tMeals,"2")},getEatRemark:function(t){this.eatRemark=t,console.log(this.eatRemark,"this.eatRemark")},pushHotelIds:function(t){console.log(t)},getRoomRemark:function(t){this.roomRemark=t,console.log(this.roomRemark,"this.roomRemark")},getEasyTrip:function(t){if(t.length>=500)return this.$message.info("简易行程不能超过500字！");this.easyTripValue=t},getChangeAddress:function(t){this.addressValue=t,console.log(this.addressValue,"this.addressValue")},pushScenicIds:function(t){console.log(t,"景点ID")},getChangeView:function(t){var e=this;this.$http.post(api_prefix+"/scenic_spot/list",{sName:t,sPym:t}).then(function(t){if(0==t.data.code){var a=t.data.body;if(a.list){console.log(e.ruleForm.trips[e.alertIndex],"11111"),e.ruleForm.trips[e.alertIndex].scenicspot=a.list;var i=e.ruleForm.trips[e.alertIndex];e.$set(e.ruleForm.trips,e.alertIndex,i)}}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangeLive:function(t){var e=this;console.log(t),this.$http.post(api_prefix+"/hotel/list",{hName:t,hPym:t}).then(function(t){if(0==t.data.code){var a=t.data.body;if(a.list){console.log(e.ruleForm.trips[e.alertIndex],"11111"),e.ruleForm.trips[e.alertIndex].hotel=a.list;var i=e.ruleForm.trips[e.alertIndex];e.$set(e.ruleForm.trips,e.alertIndex,i)}console.log(e.ruleForm.trips[e.alertIndex].hotel,"2123421")}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},UniteBtn:function(t,e,a){console.log(t,"zzzzs"),console.log(e,"cccccc"),console.log(this.ruleForm.trips,"sssss");for(var i in this.ruleForm.trips)console.log(this.ruleForm.trips[i],"ooo"),this.ruleForm.trips[i].phHotelIds=t,this.ruleForm.trips[i].hotel=e,this.ruleForm.trips[i].tHotelRemark=a,console.log("rrrrr",this.ruleForm.trips[i].phHotelIds),console.log("bbbbbbb",this.ruleForm.trips[i].hotel)},alertTag:function(t){this.getPic="",this.photoListData=[],this.alertIndex=t,console.log(this.alertIndex,"alertIndex`1"),this.alertTagFlag=!this.alertTagFlag,this.alertTageFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertTag")}),0==this.alertTagFlag&&(this.addTagStyle.picName="",this.addTagStyle.pAlbumId="",this.tableDataTotal=0),this.getPic=this.ruleForm.trips[this.alertIndex].phScenicIds[0],void 0==this.getPic&&(this.getPic=""),console.log(this.getPic,"this.alertIndex",this.alertIndex),this.getPic&&this.getPicList(this.getPic)},getChangeSort:function(t){var e=this;console.log(t),"景点"==t?this.$http.post(api_prefix+"/album/list",{aType:1}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,e.pType=1,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")}):this.$http.post(api_prefix+"/album/list",{aType:0}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,e.pType=0,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangeaName:function(t){var e=this;console.log(t),this.$http.post(api_prefix+"/album/list",{aType:this.pType,aName:t}).then(function(t){if(0==t.data.code){var a=t.data.body;e.picData=a.resultList,console.log(e.picData)}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getPicList:function(t){var e=this;console.log(t,"相册ID"),this.pAlbumIdPage=t,this.$http.post(api_prefix+"/attach/list",{pAlbumId:t,pageSize:15,currPage:this.currentPage}).then(function(t){if(0==t.data.code){var a=t.data.body;e.photoListData=a.resultList,e.tableDataTotal=a.totalNum,console.log(e.photoListData,"photoListData1")}else e.$alert(t.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getPicName:function(t){console.log(t),this.picName=t},getSearchPicList:function(){var t=this;this.isSearch=!0,this.$http.post(api_prefix+"/attach/list",{pRealName:this.picName,pageSize:15,currPage:this.currentPage}).then(function(e){if(t.currentPage,0==e.data.code){var a=e.data.body;t.photoListData=a.resultList,t.tableDataTotal=a.totalNum,console.log(t.photoListData,"photoListData2")}else t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}})},function(t){console.log("出错了")})},getChangePicList:function(e,a,i){if(console.log("选中了",e,a),t(".picIndex"+i).is(":checked")){t(".picIndex"+i).removeAttr("checked");var s=t.inArray(a,this.picNameArry);i>=0&&(this.picNameArry.splice(s,1),console.log(this.picNameArry))}else t(".picIndex"+i).attr("checked",!0),this.picNameArry.push(a),console.log(this.picNameArry)},saveToTrip:function(){console.log(this.alertIndex,"(this.alertIndex2"),console.log(this.picNameArry.length,"picNameArry.length"),console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),console.log(this.ruleForm.trips[this.alertIndex].attachs.length+this.picNameArry.length,"yiqi.length"),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length>4&&this.$message.error("最多只能上传四张图片!"),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length==4&&(Array.prototype.push.apply(this.ruleForm.trips[this.alertIndex].attachs,this.picNameArry),console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库1"),this.picNameArry=[],console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),this.alertTagFlag=!1),this.picNameArry.length+this.ruleForm.trips[this.alertIndex].attachs.length<4&&(Array.prototype.push.apply(this.ruleForm.trips[this.alertIndex].attachs,this.picNameArry),console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库1"),this.picNameArry=[],console.log(this.ruleForm.trips[this.alertIndex].attachs.length,"attachs.length"),this.alertTagFlag=!1)},setDays:function(t){var e=this.ruleForm.pDays,a=s()(this.tripObj);if(this.ruleForm.trips.length>t){console.log(this.ruleForm.trips.length,"this.ruleForm.trips.length");for(var i=this.ruleForm.trips.length;i>t;i--)this.ruleForm.trips.pop()}else for(var n=this.ruleForm.trips.length;n<t;n++)this.ruleForm.trips.push(JSON.parse(a));console.log(this.ruleForm.trips),console.log(e)},editorUpdate:function(t,e,a){console.log(a,"sadsad"),console.log(t,"value"),this.ruleForm.trips[a].tDetailTrip=t,console.log(this.ruleForm.trips)},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.picNameArry.push(t),this.dialogVisible=!0},getTripList:function(){var t=this;this.$http.post(api_prefix+"/trip/list",{tProductId:this.newId,tType:0}).then(function(e){0==e.data.code?e.data.body.trips.length>0?(t.isAdd=!1,console.log("bianji"),console.log(t.ruleForm.trips.length,"this.ruleForm.trips.length"),console.log(t.ruleForm.trips,"this.ruleForm.trips"),t.ruleForm=e.data.body,t.ruleForm.pDays=t.ruleForm.trips.length,t.ruleForm.tType=0,t.ruleForm.tProductId=t.$route.query.id,t.ruleForm.puserId=1,t.ruleForm.trips.length>0&&t.rebuildFormData(t.ruleForm.trips)):(t.isAdd=!0,console.log("xinzeng"),t.ruleForm.pDays=1):t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}),t.flag=!0},function(t){console.log("出错了")})},onSubmitGo:function(){var t=this;1==this.isAdd?(console.log("下一步 保存"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/save",this.ruleForm).then(function(e){0==e.data.code?(t.$message({type:"success",message:"保存成功!"}),setTimeout(function(){t.btnFlag=!1,t.$router.push({name:"Ticketprice",query:{id:t.$route.query.id}})},500)):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")})):0==this.isAdd&&(console.log("下一步 更新"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/update",this.ruleForm).then(function(e){0==e.data.code?(t.$message({type:"success",message:"保存成功!"}),setTimeout(function(){t.btnFlag=!1,t.$router.push({name:"Ticketprice",query:{id:t.$route.query.id}})},500)):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")}))},goback:function(t){var e=this;"List"==t?(console.log("gotoList"),this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t})}).catch(function(){})):this.$confirm("数据未保存，是否关闭？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push({name:t,query:{id:e.$route.query.id}})}).catch(function(){})},onSubmit:function(){var t=this;0==this.isAdd?(console.log("更新"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/update",this.ruleForm).then(function(e){0==e.data.code?(t.btnFlag=!1,t.$message({type:"success",message:"保存成功!"}),t.getTripList()):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")})):(console.log("保存"),this.btnFlag=!0,this.$http.post(api_prefix+"trip/save",this.ruleForm).then(function(e){0==e.data.code?(t.btnFlag=!1,t.$message({type:"success",message:"保存成功!"}),t.getTripList()):(t.btnFlag=!1,t.$alert(e.data.message,"温馨提示",{confirmButtonText:"确定",callback:function(t){}}))},function(t){console.log("出错了")}))},getTheIndex:function(t){this.alertIndex=t,console.log(this.alertIndex,"ceshi")},changecover:function(t){var e=event.currentTarget.files||event.dataTransfer.files;if(e.length){if(console.log(e.length,"files.length"),console.log(t,"$event"),e.length+this.ruleForm.trips[this.alertIndex].attachs.length>4)return void console.log(e.length+this.ruleForm.trips[this.alertIndex].attachs.length,"files.length + this.picNameArry.length");e.length+this.ruleForm.trips[this.alertIndex].attachs.length==4&&console.log(e.length+this.ruleForm.trips[this.alertIndex].attachs.length,"files.length + this.picNameArry.length");var a=e[0].size/1024,i=e[0].type.startsWith("image/");console.log(a,"fileSize");for(var s=0;s<e.length;s++)i?a>5120?this.$alert("图片大小不能超过5M！","温馨提示",{confirmButtonText:"确定",callback:function(t){}}):this.createImage(e[s]):this.$alert("请选择图片上传！","温馨提示",{confirmButtonText:"确定",callback:function(t){}});event.currentTarget.value=""}},createImage:function(t){var e=this,a=new FormData;a.append("fileType","jpg"),a.append("file",t),this.$http.post(api_prefix+"/common/file/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log(t);var a=t.body.body.key;e.ruleForm.trips[e.alertIndex].attachs.push(a),console.log(e.ruleForm.trips[e.alertIndex].attachs,"图库2","this.alertIndex",e.alertIndex),console.log(e.alertIndex,"zuizhong")})},delImage:function(t,e){console.log(t,"dele index"),console.log(e,"alertindex index"),console.log("deleta index",this.alertIndex),this.alertIndex=e,this.ruleForm.trips[this.alertIndex].attachs.length>0&&this.ruleForm.trips[this.alertIndex].attachs.splice(t,1),this.ruleForm.trips[this.alertIndex].attachs.length,this.ruleForm.trips[this.alertIndex].attachs.length,this.ruleForm.trips[this.alertIndex].attachs.length,console.log(this.ruleForm.trips[this.alertIndex].attachs,"图库3")},handleCurrentChange:function(t){if(t){this.isSearch?(console.log(1),this.getSearchPicList()):(console.log(2),this.getPicList(this.pAlbumIdPage)),this.currentPage=t}}}}}.call(e,a(2))},669:function(t,e,a){"use strict";a(670)},670:function(t,e,a){"use strict";var i=a(6),s=a(7),n=a.n(s),r=a(12);i.default.use(r.a);var l={orderResource:i.default.resource(n.a.api_prefix+"Schedule{/id}")};e.a=l},671:function(t,e){var a={name:"vue-html5-editor",showModuleName:!1,icons:{text:"fa fa-pencil",color:"fa fa-paint-brush",font:"fa fa-font",align:"fa fa-align-justify",list:"fa fa-list",link:"fa fa-chain",unlink:"fa fa-chain-broken",tabulation:"fa fa-table",image:"fa fa-file-image-o",hr:"fa fa-minus",eraser:"fa fa-eraser",undo:"fa-undo fa","full-screen":"fa fa-arrows-alt",info:"fa fa-info"},image:{sizeLimit:524288,upload:{url:null,headers:{},params:{},fieldName:{}},compress:{width:1600,height:1600,quality:80},uploadHandler:function(t){var e=JSON.parse(t);if(e.ok)return e.data;alert(e.msg)}},language:"zh-cn",i18n:{"zh-cn":{align:"对齐方式",image:"图片",list:"列表",link:"链接",unlink:"去除链接",table:"表格",font:"文字","full screen":"全屏",text:"排版",eraser:"格式清除",info:"关于",color:"颜色","please enter a url":"请输入地址","create link":"创建链接",bold:"加粗",italic:"倾斜",underline:"下划线","strike through":"删除线",subscript:"上标",superscript:"下标",heading:"标题","font name":"字体","font size":"文字大小","left justify":"左对齐","center justify":"居中","right justify":"右对齐","ordered list":"有序列表","unordered list":"无序列表","fore color":"前景色","background color":"背景色","row count":"行数","column count":"列数",save:"确定",upload:"上传",progress:"进度",unknown:"未知","please wait":"请稍等",error:"错误",abort:"中断",reset:"重置"}},hiddenModules:[],visibleModules:["text","color","font","align","list","link","unlink","tabulation","image","hr","eraser","undo","full-screen","info"],modules:{}},i={},s={};t.exports={opt1:a,opt2:i,opt3:s}},672:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),s=a(465),n=a.n(s),r=a(453),l=a(27),o=a.n(l),c=a(9),u=a(12),d=a(2),p=(a.n(d),a(15),a(7)),m=a.n(p),h=(a(10),a(21),a(16)),f=(a.n(h),a(17)),v=(a.n(f),a(18)),g=(a.n(v),a(25)),b=(a.n(g),a(24));a.n(b);i.default.config.productionTip=!1,i.default.use(o.a),i.default.use(c.a),i.default.use(u.a),window.api_prefix=m.a.api_prefix;new i.default({el:"#app",router:r.a,template:"<App/>",components:{App:n.a},methods:{}})},7:function(t,e,a){var i="b2b.fingercrm.cn"==location.host?"http://sp.fingercrm.cn/":"http://zjdev.fingercrm.cn/",s="b2b.fingercrm.cn"==location.host?"http://card.fingercrm.cn/":"http://tuyi.dev.fingercrm.cn/",n="b2b.fingercrm.cn"==location.host?"http://cm.fingercrm.cn/":"http://tuyi.dev.fingercrm.cn/";t.exports={api_prefix:"",error_url:"/login.html#/error",index_url:"/console.html#/",inner_host:i,cardHostUrl:s,cardRedirectUrl:n}},77:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(4),s=a.n(i);e.default={data:function(){return{pageSize:10,LjournalCurrentData:this.journalCurrentData,LjournalTotal:this.journalTotal,LalertJournalFlag:this.alertJournalFlag,blCompany:null,blUsername:null,blAccount:null,blDescription:null,blModule:null,blMethod:null,bpid:this.pid,bmodule:this.module}},props:{alertJournalFlag:Boolean,journalTotal:Number,journalCurrentData:Array,pid:Number,module:String},components:{jdyAlert:s.a},methods:{alertJournal:function(){this.LalertJournalFlag=!this.LalertJournalFlag,this.LalertJournalFlag&&this.$nextTick(function(){jdyFn.setAlertStyle("alertJournal")}),this.$emit("listenToChildEvent",this.LalertJournalFlag)},rowclickHandler:function(t,e,a){this.blCompany=t.blCompany,this.blUsername=t.blUsername,this.blAccount=t.blAccount,this.blDescription=t.blDescription,this.blModule=t.blModule,this.blMethod=t.blMethod},getData:function(t){var e=this;this.$http.post(api_prefix+"/logs/selectLogs?pageIndex="+t+"&module="+this.bmodule+"&pid="+this.pid).then(function(t){e.LjournalTotal=t.data.body.total,e.LjournalCurrentData=t.data.body.list},function(t){console.log("获取日志出错了")})},handleCurrentJournalChange:function(t){this.getData(t)}},filters:{changeCreate:function(t){function e(t){return parseInt(t)<10&&(t="0"+t),t}var a=new Date(t),i=a.getFullYear(),s=a.getMonth()+1,n=a.getDate(),r=a.getHours(),l=a.getMinutes(),o=a.getSeconds();return t=(i+"-"+e(s)+"-"+e(n)+" "+e(r)+":"+e(l)+":"+e(o)).substr(0,10)}}}},90:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.LjournalCurrentData,height:"250",border:""},on:{"row-click":t.rowclickHandler}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"blDescription",label:"事件描述",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"blIp",label:"来源",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"blAccount",label:"操作人"}}),t._v(" "),a("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("changeCreate")(e.row.createTime)))])]}}])})],1),t._v(" "),a("el-row",{staticClass:"journalpage clearfix tc"},[a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.LjournalTotal},on:{"current-change":t.handleCurrentJournalChange}})],1),t._v(" "),a("el-row",{staticClass:"f12 p30 cp"},[a("p",{staticClass:"mt25 ctitle ctitle"},[t._v("操作人基本信息")]),t._v(" "),a("p",{staticClass:"mt15"},[t._v("单位："+t._s(t.blCompany))]),t._v(" "),a("p",{staticClass:"mt15"},[t._v("姓名："+t._s(t.blUsername))]),t._v(" "),a("p",{staticClass:"mt15"},[t._v("账号："+t._s(t.blAccount))]),t._v(" "),a("p",{staticClass:"mt25 ctitle ctitle"},[t._v("日志信息")]),t._v(" "),a("p",{staticClass:"mt15"},[t._v("描述："+t._s(t.blDescription))]),t._v(" "),a("p",{staticClass:"mt15"},[t._v("模块："+t._s(t.blModule))]),t._v(" "),a("p",{staticClass:"mt15"},[t._v("方法："+t._s(t.blMethod))])])],1)},staticRenderFns:[]}},996:function(t,e){},999:function(t,e){}},[672]);
//# sourceMappingURL=transfer.67c0c.js.map